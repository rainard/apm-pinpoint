/*! @preserve pinpoint - v1.6.0 - 2018-08-13*/
!function(){"use strict";angular.module("pinpointApp").filter("iconUrl","PreferenceService",function(a){return function(b){var c=a.getIconPath(),d="";if(angular.isString(b)){switch(b){case"UNKNOWN_GROUP":d=c+"UNKNOWN.png";break;default:d=c+b+".png"}return d}return""}})}(),function(){"use strict";pinpointApp.factory("TimeSliderVoService",function(){return function(){this._nFrom=!1,this._nTo=!1,this._nInnerFrom=!1,this._nInnerTo=!1,this._nCount=!1,this._nTotal=!1,this.setFrom=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setFrom, It should be number. "+a);if(angular.isNumber(this._nTo)&&a>=this._nTo)throw"timeSliderVoService:setFrom, It should be smaller than To value.";return this._nFrom=a,this}.bind(this),this.getFrom=function(){return this._nFrom}.bind(this),this.setTo=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setTo It should be number. "+a);if(angular.isNumber(a)&&this._nFrom>=a)throw"timeSliderVoService:setTo, It should be bigger than From value.";return this._nTo=a,this}.bind(this),this.getTo=function(){return this._nTo}.bind(this),this.setInnerFrom=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVo:setInnerFrom It should be number. "+a);if(angular.isNumber(this._nInnerTo)&&a>=this._nInnerTo)throw"timeSliderVo:setInnerFrom, It should be smaller than InnerTo value.";return this._nInnerFrom=a,this}.bind(this),this.getInnerFrom=function(){return this._nInnerFrom}.bind(this),this.setInnerTo=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setInnerTo It should be number. "+a);if(angular.isNumber(this._nInnerFrom)&&this._nInnerFrom>=a)throw"timeSliderVoService:setInnerTo, It should be bigger than InnerFrom value.";return this._nInnerTo=a,this}.bind(this),this.getInnerTo=function(){return this._nInnerTo}.bind(this),this.setCount=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setCount It should be number. "+a);if(angular.isNumber(this._nTotal)&&a>this._nTotal)throw"timeSliderVoService:setCount, It should be smaller than Total value.";return this._nCount=a,this}.bind(this),this.addCount=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setCount It should be number. "+a);if(angular.isNumber(this._nTotal)&&a+this._nCount>this._nTotal)throw"timeSliderVoService:setCount, It should be smaller than Total value.";return this._nCount+=a,this}.bind(this),this.getCount=function(){return this._nCount}.bind(this),this.setTotal=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setTotal It should be number. "+a);if(angular.isNumber(this._nCount)&&this._nCount>a)throw"timeSliderVoService:setTotal, It should be bigger than Count value.";return this._nTotal=a,this}.bind(this),this.getTotal=function(){return this._nTotal}.bind(this),this.getReady=function(){return this._nFrom&&this._nTo&&this._nInnerFrom&&this._nInnerTo}.bind(this)}})}(),function(){"use strict";pinpointApp.factory("AlertsService",["$timeout",function(a){return function(b){this.$parent=b||null,this.setParent=function(a){return this.$parent=a,this}.bind(this),this.getParent=function(){return this.$parent}.bind(this),this.showError=function(b){a(function(){this.getElement(".error").show(),"string"==typeof b?this.getElement(".error .msg").text(b):(this.getElement(".error .msg").text(b.message),this.getElement(".error .method").text(b.request.method),this.getElement(".error .header").html(this._transTableFormat(b.request.heads)),this.getElement(".error .parameters").html(this._transTableFormat(b.request.parameters)),this.getElement(".error .url").text(b.request.url),this.getElement(".error .stacktrace").text(b.stacktrace))}.bind(this),300)}.bind(this),this.hideError=function(){a(function(){this.getElement(".error").hide()}.bind(this))}.bind(this),this.showWarning=function(b){a(function(){this.getElement(".warning").show(),this.getElement(".warning .msg").text(b)}.bind(this),300)}.bind(this),this.hideWarning=function(){a(function(){this.getElement(".warning").hide()}.bind(this))}.bind(this),this.showInfo=function(b){a(function(){this.getElement(".info").show(),this.getElement(".info .msg").html(b)}.bind(this),300)}.bind(this),this.hideInfo=function(){a(function(){this.getElement(".info").hide()}.bind(this))}.bind(this),this.getElement=function(a){return this.$parent?$(a,this.$parent):$(a)}.bind(this),this._transTableFormat=function(a){var b=["<table>"];for(var c in a)b.push("<tr>"),b.push("<td>"+c+"</td><td style='padding-left:20px'>"+a[c]+"</td>"),b.push("</tr>");return b.push("</table>"),b.join("")}}}])}(),function(){"use strict";pinpointApp.factory("ProgressBarService",["$timeout","$window","$location","CommonUtilService","UserLocalesService",function(a,b,c,d,e){var f=["ko","en"],g=5,h="__HIDE_LOADING_TIP";return function(i){this.$parent=i||null,this.nPercentage=0,this.bAutoIncrease=!0,this.nTimePromise=null,this.setParent=function(a){return this.$parent=a,this}.bind(this),this.getParent=function(){return this.$parent}.bind(this),this.startLoading=function(d){var e=!0;if(b.localStorage){var f=b.localStorage.getItem(h)||"-";e="-"===f||!((new Date).valueOf()<parseInt(f))}this.bAutoIncrease=d||!0,this.setLoading(0),a(function(){/^\/main/.test(c.path())&&e&&(this.showBackground(),this.showTip()),this.getProgress().show(),this.autoIncrease()}.bind(this))}.bind(this),this.stopLoading=function(){a.cancel(this.nTimePromise),a(function(){this.getProgress().hide(),this.hideTip(),this.hideBackground()}.bind(this),300)}.bind(this),this.setLoading=function(a){return this.nPercentage=a,this.getProgressBar().width(a+"%"),this}.bind(this),this.getProgress=function(){return this.$parent?$(".progress",this.$parent):$(".progress")}.bind(this),this.getProgressBar=function(){return this.$parent?$(".progress .bar",this.$parent):$(".progress .bar")}.bind(this),this.autoIncrease=function(){if(this.bAutoIncrease!==!1){var b=d.random(1,4);this.nPercentage+b<=99&&(this.setLoading(this.nPercentage+b),this.nTimePromise=a(function(){this.autoIncrease()}.bind(this),500))}}.bind(this),this.showBackground=function(){}.bind(this),this.showTip=function(){}.bind(this),this._getRandomNum=function(){var a=parseInt(Math.random()*(g+1));return a<10?"0"+a:a+""}.bind(this),this._getLocale=function(){return f.indexOf(e.userLocale)==-1?e.defaultLocale:e.userLocale}.bind(this),this.hideBackground=function(){this.$parent&&$(".progress-back",this.$parent).hide()}.bind(this),this.hideTip=function(){this.$parent&&$(".progress-tip",this.$parent).hide()}.bind(this)}}])}(),function(){"use strict";pinpointApp.factory("NavbarVoService",["UserConfigurationService","CommonUtilService",function(a,b){return function(){var c=this;this._sApplication=!1,this._periodType="",this._nPeriod=!1,this._nQueryEndTime=!1,this._sFilter=!1,this._sAgentId=!1,this._nQueryPeriod=!1,this._nQueryStartTime=!1,this._sReadablePeriod=!1,this._sQueryEndDateTime=!1,this._nCalleeRange=a.getCallee(),this._nCallerRange=a.getCaller(),this._bBidirectional=a.getBidirectional(),this._bWasOnly=a.getWasOnly(),this._sHint=!1,this.setApplication=function(a){return angular.isString(a)&&a.indexOf("@")>0&&(c._sApplication=a),c},this.getApplication=function(){return c._sApplication},this.setPeriod=function(a){return angular.isNumber(a)&&a>0&&(c._nPeriod=a),c},this.getPeriod=function(){return c._nPeriod},this.setQueryEndTime=function(a){return angular.isNumber(a)&&a>0&&(c._nQueryEndTime=a),c},this.getQueryEndTime=function(){return c._nQueryEndTime},this.getQueryPeriod=function(){return c._nQueryPeriod},this.getApplicationName=function(){return c._sApplication.split("@")[0]},this.getServiceTypeName=function(){return c._sApplication.split("@")[1]},this.getCalleeRange=function(){return c._nCalleeRange},this.getCallerRange=function(){return c._nCallerRange},this.getBidirectional=function(){return c._bBidirectional},this.getWasOnly=function(){return c._bWasOnly},this.setCalleeRange=function(a){c._nCalleeRange=a},this.setCallerRange=function(a){c._nCallerRange=a},this.setBidirectional=function(a){c._bBidirectional=a},this.setWasOnly=function(a){c._bWasOnly=a},this.setQueryStartTime=function(a){return angular.isNumber(a)&&a>0&&(c._nQueryStartTime=a),c},this.getQueryStartTime=function(){return c._nQueryStartTime},this.getReady=function(){return c._sApplication&&c._nPeriod&&c._nQueryEndTime},this.setFilter=function(a){return angular.isString(a)&&(c._sFilter=a),c},this.getFilter=function(){return c._sFilter},this.getFilterAsJson=function(){return JSON.parse(c._sFilter)},this.setHint=function(a){return angular.isString(a)&&(c._sHint=a),c},this.getHint=function(){return c._sHint},this.setAgentId=function(a){return angular.isString(a)&&(c._sAgentId=a),c},this.getAgentId=function(){return c._sAgentId},this.setReadablePeriod=function(a){var b=/^(\d)+(s|m|h|d|w|M|y)$/,d=b.exec(a);if(d){c._sReadablePeriod=a;var e=parseInt(a,10);switch(d[2]){case"m":c.setPeriod(60*e);break;case"h":c.setPeriod(60*e*60);break;case"d":c.setPeriod(60*e*60*24);break;case"w":c.setPeriod(60*e*60*24*7);break;case"M":c.setPeriod(60*e*60*24*30);break;case"y":c.setPeriod(60*e*60*24*30*12);break;default:c.setPeriod(e)}}else"realtime"===a&&(c.setPeriodType("realtime"),c._sReadablePeriod="1m",c.setPeriod(300));return c},this.isRealtime=function(){return"realtime"===this._periodType},this.getReadablePeriod=function(){return c._sReadablePeriod},this.setQueryEndDateTime=function(a){var b=/^(19[7-9][0-9]|20\d{2})-(0[0-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])-(0[0-9]|1[0-9]|2[0-3])-([0-5][0-9])-([0-5][0-9])$/;return b.test(a)&&(c._sQueryEndDateTime=a,c.setQueryEndTime(c._parseQueryEndDateTimeToTimestamp(a))),c},this.getQueryEndDateTime=function(){return c._sQueryEndDateTime},this._parseQueryEndDateTimeToTimestamp=function(a){return b.getMilliSecond(a)},this.autoCalcultateByQueryStartTimeAndQueryEndTime=function(){return c._nQueryPeriod=c._nQueryEndTime-c._nQueryStartTime,c._nPeriod=c._nQueryPeriod/1e3/60,c._sReadablePeriod=c._nQueryPeriod/1e3/60+"m",c._sQueryEndDateTime=b.formatDate(c._nQueryEndTime),c},this.autoCalculateByQueryEndDateTimeAndReadablePeriod=function(){return c._nQueryPeriod=1e3*c._nPeriod,c._nQueryStartTime=c._nQueryEndTime-c._nQueryPeriod,c},this.getPartialURL=function(a,b){return(a?c.getApplication()+"/":"")+c.getReadablePeriod()+"/"+c.getQueryEndDateTime()+(b&&c.getFilter()?"/"+c.getFilter():"")},this.setPeriodType=function(a){this._periodType=a},this.getPeriodType=function(){return this._periodType}}}])}(),function(){"use strict";pinpointApp.service("UrlVoService",["$location","$routeParams","PreferenceService","UserConfigurationService","CommonUtilService",function(a,b,c,d,e){function f(a){return e.getMilliSecond(a)}function g(a){switch(a){case"m":return 60;case"h":return 3600;case"d":return 86400;case"w":return 604800;case"M":return 2592e3;case"y":return 31104e3;default:return 1}}var h="",i="",j="",k="",l="",m=5,n=-1,o=-1,p="",q="",r=-1,s="",t="",u=d.getCallee(),v=d.getCaller(),w=d.getBidirectional(),x=d.getWasOnly(),y=c.getPeriodType(),z=c.getPeriodTime();this.initUrlVo=function(a,b){switch(a){case"main":b.readablePeriod===y.REALTIME?this.setApplication(b.application).setReadablePeriod(b.readablePeriod):this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setCallee(c.getCalleeByApp(b.application)).setCaller(c.getCallerByApp(b.application)).setBidirectional(c.getBidirectionalByApp(b.application));break;case"filteredMap":this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setFilter(b.filter).setHint(b.hint);break;case"inspector":this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setAgentId(b.agentId);break;case"transactionList":this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setTransactionInfo(b.transactionInfo);break;case"scatterFullScreenMode":this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setAgentList(b.agentList)}return this},this.getApplication=function(){return h},this.setApplication=function(a){return h=angular.isString(a)&&a.indexOf("@")>0?a:h,this},this.getApplicationName=function(){return h.split("@")[0]},this.getServiceType=function(){return h.split("@")[1]},this.getCallee=function(){return u},this.setCallee=function(a){return u=a,this},this.getCaller=function(){return v},this.setCaller=function(a){return v=a,this},this.getBidirectional=function(){return w},this.setBidirectional=function(a){return w=a,this},this.setWasOnly=function(a){return x=a,this},this.getPeriod=function(){return m},this.getQueryEndTime=function(){return r},this.setQueryEndTime=function(a){return r=angular.isNumber(a)&&a>0?a:r,q=e.formatDate(a),this},this.getQueryStartTime=function(){return o},this.setQueryStartTime=function(a){return o=a,this},this.getFilter=function(){return j},this.setFilter=function(a){return j=angular.isString(a)?a:j,this},this.getFilterAsJson=function(){return JSON.parse(j)},this.getHint=function(){return k},this.setHint=function(a){return k=angular.isString(a)?a:k,this},this.getAgentId=function(){return l},this.setAgentId=function(a){return l=a,this},this.getPeriodType=function(a){return i},this.setPeriodType=function(a){return i=a,i===y.REALTIME&&(m=parseInt(c.getRealtimeScatterXRangeStr()),n=60*m*1e3),this},this.setTransactionInfo=function(a){return s=angular.isString(a)?a:s,this},this.getTransactionInfo=function(){return s},this.setAgentList=function(a){return t=angular.isString(a)?a.split(","):t,this},this.getAgentList=function(){return t},this.isRealtime=function(){return i===y.REALTIME},this.setReadablePeriod=function(a){if(a===y.REALTIME)i=y.REALTIME,p="5m",m=5,n=3e5;else{var b=/^(\d)+(s|m|h|d|w|M|y)$/,c=b.exec(a);c&&(p=a,n=parseInt(a,10)*g(c[2])*1e3,i=z.indexOf(a)>-1?y.LAST:y.RANGE)}return this},this.getReadablePeriod=function(){return p},this.setQueryEndDateTime=function(a){var b=/^(19[7-9][0-9]|20\d{2})-(0[0-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])-(0[0-9]|1[0-9]|2[0-3])-([0-5][0-9])-([0-5][0-9])$/;return b.test(a)&&(q=a,this.setQueryEndTime(f(a))),this},this.getQueryEndDateTime=function(){return q},this.autoCalcultateByQueryStartTimeAndQueryEndTime=function(){return n=r-o,m=n/1e3/60,p=m+"m",q=e.formatDate(r),this},this.autoCalculateByQueryEndDateTimeAndReadablePeriod=function(){return n===-1&&(n=1e3*m*60),o=r-n,this},this.getPartialURL=function(a,b){return(a?h+"/":"")+p+"/"+q+(b&&j?"/"+j:"")},this.initUrlVo(a.path().split("/")[1],b),this.autoCalculateByQueryEndDateTimeAndReadablePeriod()}])}(),function(){"use strict";pinpointApp.constant("TransactionDaoServiceConfig",{transactionInfoUrl:"transactionInfo.pinpoint"}),pinpointApp.service("TransactionDaoService",["TransactionDaoServiceConfig","$timeout","$window",function(a,b,c){b(function(){c.transactionData={}}),this.addData=function(a,b,d){c.transactionData[a]=b},this.getDataByName=function(a,b){angular.isFunction(b)&&b(opener.transactionData[a]||{})},this.getTransactionDetail=function(b,c,d,e,f){jQuery.ajax({type:"GET",url:a.transactionInfoUrl,cache:!1,dataType:"json",data:{agentId:b,spanId:c,traceId:d,focusTimestamp:e},success:function(a){angular.isFunction(f)&&f(null,a)},error:function(a,b,c){angular.isFunction(f)&&f("ERROR",{})}})}}])}(),function(){"use strict";pinpointApp.factory("locationService",["$location","$route","$rootScope",function(a,b,c){return a.skipReload=function(){var d=b.current,e=c.$on("$locationChangeSuccess",function(){b.current=d,e()});return a},a}])}(),function(){"use strict";pinpointApp.constant("serverMapDaoServiceConfig",{serverMapDataUrl:"getServerMapDataV2.pinpoint",filteredServerMapDataUrl:"getFilteredServerMapDataMadeOfDotGroup.pinpoint",lastTransactionListUrl:"lastTransactionList.pinpoint",transactionListUrl:"transactionList.pinpoint",FILTER_FETCH_LIMIT:5e3,MAX_DISPLAY_COUNT_GROUP_LIST:3}),pinpointApp.service("ServerMapDaoService",["serverMapDaoServiceConfig",function(a){var b,c=this;this.abort=function(){this._oAjax&&this._oAjax.abort()},this.getFromToData=function(a){for(var c={from:[],to:[]},d=0;d<b.applicationMapData.linkDataArray.length;d++){var e=b.applicationMapData.linkDataArray[d];e.from===a?c.to.push([e.targetInfo.applicationName,e.targetInfo.serviceTypeCode]):e.to===a&&c.from.push([e.sourceInfo.applicationName,e.sourceInfo.serviceTypeCode])}return c},this.getServerMapData=function(d,e){var f={applicationName:d.applicationName,from:d.from,to:d.to,callerRange:d.callerRange,calleeRange:d.calleeRange,bidirectional:d.bidirectional,wasOnly:d.wasOnly};isNaN(parseInt(d.serviceTypeName))?f.serviceTypeName=d.serviceTypeName:f.serviceTypeCode=d.serviceTypeName,this._oAjax=jQuery.ajax({type:"GET",url:a.serverMapDataUrl,cache:!1,dataType:"json",data:f,success:function(a){b=a,angular.isFunction(e)&&e(null,d,a),c._oAjax=null},error:function(a,b,f){"abort"!==b&&angular.isFunction(e)&&e(f,d,{}),c._oAjax=null}})},this.getFilteredServerMapData=function(b,c){var d={applicationName:b.applicationName,from:b.from,to:b.to,originTo:b.originTo,filter:b.filter,limit:a.FILTER_FETCH_LIMIT,callerRange:b.callerRange,calleeRange:b.calleeRange,v:3,xGroupUnit:987,yGroupUnit:57};isNaN(parseInt(b.serviceTypeName))?d.serviceTypeName=b.serviceTypeName:d.serviceTypeCode=b.serviceTypeName,b.hint&&(d.hint=b.hint),jQuery.ajax({type:"GET",url:a.filteredServerMapDataUrl,cache:!1,dataType:"json",data:d,success:function(a){angular.isFunction(c)&&c(null,b,a)},error:function(a,d,e){angular.isFunction(c)&&c(e,b,{})}})},this.mergeFilteredMapData=function(a,b){return 0===a.linkDataArray.length&&0===a.nodeDataArray.length?(a.linkDataArray=b.linkDataArray,a.nodeDataArray=b.nodeDataArray):(angular.forEach(b.nodeDataArray,function(b,c){var d=this.findExistingNodeKeyFromLastMapData(a,b);d>=0?a=this.mergeNodeData(a,d,b):a.nodeDataArray.push(b)},this),angular.forEach(b.linkDataArray,function(b,c){var d=this.findExistingLinkFromLastMapData(a,b);d>=0?a=this.mergeLinkData(a,d,b):a.linkDataArray.push(b)},this)),a},this.findExistingNodeKeyFromLastMapData=function(a,b){for(var c in a.nodeDataArray)if(a.nodeDataArray[c].key===b.key)return c;return-1},this.findExistingLinkFromLastMapData=function(a,b){for(var c in a.linkDataArray)if(a.linkDataArray[c].from===b.from&&a.linkDataArray[c].to===b.to)return c;return-1},this.addFilterProperty=function(a,b){var c=this.parseFilterText(a,b);return angular.forEach(b.nodeDataArray,function(a){angular.isDefined(_.findWhere(c,{nodeKey:a.key}))?a.isFiltered=!0:a.isFiltered=!1}),angular.forEach(b.linkDataArray,function(a,b){angular.isDefined(_.findWhere(c,{fromKey:a.from,toKey:a.to}))?a.isFiltered=!0:a.isFiltered=!1},this),b},this.parseFilterText=function(a,b){var c=[];return angular.forEach(a,function(a){c.push({fromServiceType:a.fst,fromApplication:a.fa,fromKey:this.findNodeKeyByApplicationName(a.fa,b),toServiceType:a.tst,toApplication:a.ta,toKey:this.findNodeKeyByApplicationName(a.ta,b),nodeKey:""})},this),c},this.findNodeKeyByApplicationName=function(a,b){var c=_.findWhere(b.nodeDataArray,{applicationName:a});return!!angular.isDefined(c)&&c.key},this.mergeNodeData=function(a,b,c){if(angular.isUndefined(a.nodeDataArray[b]))return a.nodeDataArray[b]=c,a;var d,e,f=a.nodeDataArray[b];if(f.errorCount+=c.errorCount,f.slowCount+=c.slowCount,f.totalCount+=c.totalCount,c.hasAlert&&(f.hasAlert=c.hasAlert),angular.isDefined(c.histogram))if(angular.isDefined(f.histogram))for(d in c.histogram)angular.isDefined(f.histogram[d])?f.histogram[d]+=c.histogram[d]:f.histogram[d]=c.histogram[d];else f.histogram=c.histogram;if(angular.isDefined(c.agentHistogram))for(d in c.agentHistogram)if(angular.isDefined(f.agentHistogram[d]))for(e in c.agentHistogram[d])angular.isDefined(f.agentHistogram[d][e])?f.agentHistogram[d][e]+=c.agentHistogram[d][e]:f.agentHistogram[d][e]=c.agentHistogram[d][e];else f.agentHistogram[d]=c.agentHistogram[d];if(angular.isDefined(c.timeSeriesHistogram))for(d in c.timeSeriesHistogram)if(angular.isDefined(f.timeSeriesHistogram)){var g=[];a:for(e in c.timeSeriesHistogram[d].values){for(var h in f.timeSeriesHistogram[d].values)if(f.timeSeriesHistogram[d].values[h][0]===c.timeSeriesHistogram[d].values[e][0]){f.timeSeriesHistogram[d].values[h][1]+=c.timeSeriesHistogram[d].values[e][1];continue a}g.push(c.timeSeriesHistogram[d].values[e])}f.timeSeriesHistogram[d].values=g.concat(f.timeSeriesHistogram[d].values)}else f.timeSeriesHistogram=c.timeSeriesHistogram;if(angular.isDefined(c.agentTimeSeriesHistogram))for(d in c.agentTimeSeriesHistogram)if(angular.isDefined(f.agentTimeSeriesHistogram))if(angular.isDefined(f.agentTimeSeriesHistogram[d]))for(e in c.agentTimeSeriesHistogram[d])angular.isDefined(f.agentTimeSeriesHistogram[d][e])?f.agentTimeSeriesHistogram[d][e].values=c.agentTimeSeriesHistogram[d][e].values.concat(f.agentTimeSeriesHistogram[d][e].values):f.agentTimeSeriesHistogram[d][e]=c.agentTimeSeriesHistogram[d][e];else f.agentTimeSeriesHistogram[d]=c.agentTimeSeriesHistogram[d];else f.agentTimeSeriesHistogram=c.agentTimeSeriesHistogram;if(angular.isDefined(c.serverList))for(d in c.serverList)if(f.serverList[d])for(e in c.serverList[d].instanceList)if(f.serverList[d].instanceList[e])for(var i in c.serverList[d].instanceList[e].histogram)f.serverList[d].instanceList[e].histogram[i]?f.serverList[d].instanceList[e].histogram[i]+=c.serverList[d].instanceList[e].histogram[i]:f.serverList[d].instanceList[e].histogram[i]=c.serverList[d].instanceList[e].histogram[i];else f.serverList[d].instanceList[e]=c.serverList[d].instanceList[e];else f.serverList[d]=c.serverList[d];return a},this.mergeLinkData=function(a,b,c){if(angular.isUndefined(a.linkDataArray[b]))return a.linkDataArray[b]=c,a;var d,e,f=a.linkDataArray[b];if(f.errorCount+=c.errorCount,f.slowCount+=c.slowCount,f.totalCount+=c.totalCount,c.hasAlert&&(f.hasAlert=c.hasAlert),angular.isDefined(c.histogram))for(d in c.histogram)f.histogram[d]?f.histogram[d]+=c.histogram[d]:f.histogram[d]=c.histogram[d];if(angular.isDefined(c.timeSeriesHistogram))for(d in c.timeSeriesHistogram)if(angular.isDefined(f.timeSeriesHistogram)){var g=[];a:for(e in c.timeSeriesHistogram[d].values){for(var h in f.timeSeriesHistogram[d].values)if(f.timeSeriesHistogram[d].values[h][0]===c.timeSeriesHistogram[d].values[e][0]){f.timeSeriesHistogram[d].values[h][1]+=c.timeSeriesHistogram[d].values[e][1];continue a}g.push(c.timeSeriesHistogram[d].values[e])}f.timeSeriesHistogram[d].values=g.concat(f.timeSeriesHistogram[d].values)}else f.timeSeriesHistogram=c.timeSeriesHistogram;if(angular.isDefined(c.sourceHistogram))for(d in c.sourceHistogram)if(angular.isDefined(f.sourceHistogram[d]))for(e in c.sourceHistogram[d])f.sourceHistogram[d][e]?f.sourceHistogram[d][e]+=c.sourceHistogram[d][e]:f.sourceHistogram[d][e]=c.sourceHistogram[d][e];else f.sourceHistogram[d]=c.sourceHistogram[d];if(angular.isDefined(c.targetHistogram))for(d in c.targetHistogram)if(angular.isDefined(f.targetHistogram[d]))for(e in c.targetHistogram[d])f.targetHistogram[d][e]?f.targetHistogram[d][e]+=c.targetHistogram[d][e]:f.targetHistogram[d][e]=c.targetHistogram[d][e];else f.targetHistogram[d]=c.targetHistogram[d];return a},this.mergeTimeSeriesResponses=function(a,b){return angular.forEach(b.values,function(b,c){angular.isUndefined(a.timeSeriesResponses.values[c])?a.timeSeriesResponses.values[c]=b:a.timeSeriesResponses.values[c]=_.union(b,a.timeSeriesResponses.values[c])},this),a.timeSeriesResponses.time=_.union(b.time,a.timeSeriesResponses.time),a},this.mergeGroup=function(a,b){var c=this,d=a.nodeDataArray,e=a.linkDataArray,f=c._getInboundCountMap(d,e);return b.forEach(function(a){var b=a+"_GROUP",g=[],h=[],i={},j={};d.forEach(function(k){var l,m,n=b+"_"+k.key,o=0;e.forEach(function(b){b.from==k.key&&b.targetInfo.serviceType==a&&f[b.to]&&1==f[b.to].toCount&&o++}),o<2||(e.forEach(function(e){e.targetInfo.serviceType==a&&(f[e.to]&&f[e.to].toCount>1||e.from==k.key&&(l||(l=c._createNewNode(n,b)),m||(m=c._createNewLink(k.key,n)),c._addToSubNode(l,c._getNodeByApplicationName(d,e.targetInfo.applicationName,a),function(){}),c._mergeLinkData(m,e),m.unknownLinkGroup.push(e),i[e.to]=null,j[e.key]=null))}),l&&(l.unknownNodeGroup.sort(function(a,b){return b.totalCount-a.totalCount}),c._addListTopX(l),g.push(l)),m&&(m.unknownLinkGroup.sort(function(a,b){return b.totalCount-a.totalCount}),h.push(m)))}),c._addToOriginal(d,g),c._addToOriginal(e,h),c._removeByKey(d,i),c._removeByKey(e,j)}),a},this._addToOriginal=function(a,b){b.forEach(function(b){a.push(b)})},this._getInboundCountMap=function(a,b){var c={};return a.forEach(function(a){var d={toCount:0,fromCount:0,totalCallCount:0};b.forEach(function(b){b.to===a.key&&(d.toCount++,d.totalCallCount+=b.totalCount),b.from===a.key&&d.fromCount++}),c[a.key]=d}),c},this._selectMergeTarget=function(a,b){var c=[];return a.forEach(function(a,d){b[a.key].fromCount>0||b[a.key].toCount<2||c.push(a)}),c},this._getFromNodes=function(a,b){var c=[];return a.forEach(function(a){a.to===b&&c.push(a.from)}),c},this.mergeMultiLinkGroup=function(a,b){var c=this,d=a.nodeDataArray,e=a.linkDataArray,f=this._getInboundCountMap(d,e),g=this._selectMergeTarget(d,f),h={},i=[],j=[],k={},l={};return g.forEach(function(a,d){if(h[a.key]!==!0||b.indexOf(a.serviceType)!=-1){h[a.key]=!0;var f=a.serviceType+"_GROUP",m=null,n=null,o=f+"_"+a.key,p=c._getFromNodes(e,a.key);if(g.forEach(function(d,g){if(h[d.key]!==!0&&a.serviceType===d.serviceType&&b.indexOf(d.serviceType)!=-1){var i=c._getFromNodes(e,d.key);if(p.length===i.length){var j=0;for(j=0;j<p.length;j++)if(i.indexOf(p[j])===-1)return;if(h[d.key]=!0,null===m&&(m=c._createNewMultiGroupNode(o,f)),null===n)for(n=[],j=0;j<i.length;j++)n.push(c._createNewLink(i[j],o));c._addToSubNode(m,d,function(a){k[a]=null}),c._addToSubLink(e,n,d.key,function(a,b){l[a]=null;var c=/(.*)\^(.*)/.exec(b.from),d=/(.*)\^(.*)/.exec(b.to);"undefined"==typeof m.subGroup[d[1]]&&(m.subGroup[d[1]]=[]),m.subGroup[d[1]].push({applicationName:c[1],hasAlert:b.hasAlert,totalCount:b.totalCount,serviceType:c[2],key:b.from})})}}}),null!==m&&c._addToSubNode(m,a,function(a){k[a]=null}),null!==n&&c._addToSubLink(e,n,a.key,function(a,b){l[a]=null;var c=/(.*)\^(.*)/.exec(b.from),d=/(.*)\^(.*)/.exec(b.to);"undefined"==typeof m.subGroup[d[1]]&&(m.subGroup[d[1]]=[]),m.subGroup[d[1]].push({applicationName:c[1],hasAlert:b.hasAlert,totalCount:b.totalCount,serviceType:c[2],key:b.from})}),null!==m&&null!==n){i.push(m),m.unknownNodeGroup.sort(function(a,b){return b.totalCount-a.totalCount});for(var q in m.subGroup)m.subGroup[q].sort(function(a,b){return b.totalCount-a.totalCount});c._addListTopX(m),i.push(m),n.forEach(function(a){a.unknownLinkGroup.sort(function(a,b){return b.totalCount-a.totalCount}),j.push(a)})}m=null,n=null}}),c._addToOriginal(d,i),c._addToOriginal(e,j),c._removeByKey(d,k),c._removeByKey(e,l),a},this._addListTopX=function(b){b.listTopX.push({applicationName:"Total : "+b.unknownNodeGroup.length,totalCount:b.totalCount,tableHeader:!0});for(var c=0;c<Math.min(b.unknownNodeGroup.length,a.MAX_DISPLAY_COUNT_GROUP_LIST);c++)b.listTopX.push(b.unknownNodeGroup[c]);b.unknownNodeGroup.length>a.MAX_DISPLAY_COUNT_GROUP_LIST&&b.listTopX.push({applicationName:"...",totalCount:""})},this._createNewLink=function(a,b){return{key:a+"-"+b,from:a,to:b,sourceInfo:{},targetInfo:[],totalCount:0,errorCount:0,slowCount:0,hasAlert:!1,unknownLinkGroup:[],histogram:{}}},this._createNewNode=function(a,b){return{key:a,category:b,nodeCount:0,alertCount:0,totalCount:0,serviceType:b,instanceCount:0,unknownNodeGroup:[],listTopX:[]}},this._createNewMultiGroupNode=function(a,b){return{key:a,category:b,subGroup:{},nodeCount:0,alertCount:0,totalCount:0,serviceType:b,instanceCount:0,unknownNodeGroup:[],listTopX:[]}},this._removeByKey=function(a,b){$.each(b,function(b,c){a.forEach(function(c,d){c.key==b&&a.splice(d,1)})})},this._addToSubNode=function(a,b,c){delete b.category,a.instanceCount+=b.instanceCount,a.nodeCount++,a.alertCount+=b.hasAlert?1:0,a.totalCount+=b.totalCount,a.unknownNodeGroup.push(b),c(b.key)},this._addToSubLink=function(a,b,c,d){var e=this;a.forEach(function(a){a.to===c&&(b.forEach(function(b){b.from==a.from&&(e._mergeLinkData(b,a),b.unknownLinkGroup.push(a))}),d(a.key,a))})},this._mergeLinkData=function(a,b){a.totalCount+=b.totalCount,a.errorCount+=b.errorCount,a.slowCount+=b.slowCount,a.sourceInfo=b.sourceInfo,b.hasAlert&&(a.hasAlert=b.hasAlert)},this._getNodeByApplicationName=function(a,b,c){for(var d in a)if(b===a[d].applicationName&&c===a[d].serviceType)return a[d];return!1},this.getNodeDataByKey=function(a,b){var c=a.nodeDataArray,d=!1;return c.forEach(function(a){a.key===b&&(d=a)}),d},this.getLinkNodeDataByNodeKey=function(a,b,c){var d=a.linkDataArray,e=!1;return d.forEach(function(a){a.to===b&&a.from.indexOf(c)!=-1&&(e=a)}),e},this.getLinkDataByKey=function(a,b){var c=a.linkDataArray,d=!1;return c.forEach(function(a){a.key===b&&(d=a)}),d},this.getUnknownNodeDataByUnknownNodeGroup=function(a,b){for(var d in b)b[d]=c.getNodeDataByKey(a,b[d].key);return b},this.getUnknownLinkDataByUnknownLinkGroup=function(a,b){for(var d in b)b[d]=c.getLinkDataByKey(a,b[d].key),b[d].fromNode=c.getNodeDataByKey(a,b[d].from),b[d].toNode=c.getNodeDataByKey(a,b[d].to);return b},this.extractDataFromApplicationMapData=function(a){var b=["applicationName","category","errorCount","hasAlert","instanceCount","isWas","isQueue","isAuthorized","key","slowCount","serviceType","totalCount","histogram"],c=["errorCount","from","hasAlert","key","sourceInfo","slowCount","to","targetInfo","totalCount"],d={nodeDataArray:[],linkDataArray:[]};return angular.forEach(a.nodeDataArray,function(a,c){d.nodeDataArray.push({}),angular.forEach(b,function(b){d.nodeDataArray[c][b]=a[b]})}),angular.forEach(a.linkDataArray,function(a,b){d.linkDataArray.push({}),angular.forEach(c,function(c){d.linkDataArray[b][c]=a[c]})}),d}}])}(),function(){"use strict";pinpointApp.constant("agentDaoServiceConfig",{dateFormat:"YYYY-MM-DD HH:mm:ss"}),pinpointApp.service("AgentDaoService",["agentDaoServiceConfig",function(a){this.getSampleRate=function(a){var b=100,c=a/5,d=Math.floor(c/b);return c<=b?1:d},this.parseDataSourceChartDataForAmcharts=function(b,c){for(var d=b.length,e={data:[],empty:!1,forceMax:!1,defaultMax:10},f=0,g=0;g<d;g++){var h=b[g],i=h.id,j=h.charts.y.ACTIVE_CONNECTION_SIZE,k=h.charts.x.length,l=j.length;0===l&&(e.empty=!0);for(var m=0;m<k;m++)if(0===g&&(e.data[m]={time:moment(h.charts.x[m]).format(a.dateFormat)}),l>m){var n=j[m];f=Math.max(f,n[2]),e.data[m][c+i]=n[2]}}return e.defaultMax=e.empty?10:Math.max(10,parseInt(f)+5),e}}])}(),function(){"use strict";pinpointApp.constant("MemoryChartDaoServiceConfig",{dateFormat:"YYYY-MM-DD HH:mm:ss"}),pinpointApp.service("MemoryChartDaoService",["MemoryChartDaoServiceConfig",function(a){function b(b,c){for(var d=c.charts.x,e=c.charts.y.JVM_GC_OLD_TIME,f=c.charts.y.JVM_GC_OLD_COUNT,g={data:[],empty:!1,forceMax:!1,defaultMax:100,defaultMax2:1e7},h=0,i=0;i<d.length;++i){var j={time:moment(d[i]).format(a.dateFormat)};if(0===e.length)g.empty=!0;else for(var k=0;k<b.length;k++)if(b[k].isFgc){var l=f[i][3],m=e[i][3];m>0&&(h+=m),l>0&&(j[b[k].key+"Count"]=l,j[b[k].key+"Time"]=h,h=0)}else{var n=c.charts.y[b[k].id][i][1];n>0&&(j[b[k].key]=n===-1?null:n)}g.data.push(j)}return g}this.parseNonHeapData=function(a){var c=[{id:"JVM_MEMORY_NON_HEAP_USED",key:"Used",isFgc:!1},{id:"JVM_MEMORY_NON_HEAP_MAX",key:"Max",isFgc:!1},{id:"fgc",key:"FGC",isFgc:!0}];return b(c,a)},this.parseHeapData=function(a){var c=[{id:"JVM_MEMORY_HEAP_USED",key:"Used",isFgc:!1},{id:"JVM_MEMORY_HEAP_MAX",key:"Max",isFgc:!1},{id:"fgc",key:"FGC",isFgc:!0}];return b(c,a)},this.getChartOptions=function(a){return{type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!1,align:"right",position:"top",valueWidth:70,
markerSize:10,valueAlign:"left",valueFunction:function(a,b){return parseInt(b)===-1?"":b}},usePrefixes:!0,dataProvider:a.data,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"right",title:"Full GC (ms)",minimum:0},{id:"v2",gridAlpha:0,axisAlpha:1,position:"left",title:"Memory (bytes)",minimum:0}],graphs:[{valueAxis:"v2",balloonText:"[[value]]B",legendValueText:"[[value]]B",lineColor:"rgb(174, 199, 232)",title:"Max",valueField:"Max",fillAlphas:0,connect:!1},{valueAxis:"v2",balloonText:"[[value]]B",legendValueText:"[[value]]B",lineColor:"rgb(31, 119, 180)",fillColor:"rgb(31, 119, 180)",title:"Used",valueField:"Used",fillAlphas:.4,connect:!1},{valueAxis:"v1",balloonFunction:function(a,b){var c=a.serialDataItem.dataContext,d=c.FGCTime+"ms",e=c.FGCCount;return e>1&&(d+=" ("+e+")"),d},legendValueText:"[[value]]ms",lineColor:"#FF6600",title:"FGC",valueField:"FGCTime",type:"column",fillAlphas:.3,connect:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}},chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1}}}}])}(),function(){"use strict";pinpointApp.constant("CPULoadChartDaoServiceConfig",{dateFormat:"YYYY-MM-DD HH:mm:ss"}),pinpointApp.service("CPULoadChartDaoService",["CPULoadChartDaoServiceConfig",function(a){this.parseData=function(b){var c=b.charts.x,d=b.charts.y.CPU_LOAD_JVM,e=b.charts.y.CPU_LOAD_SYSTEM,f=c.length,g=d.length,h=e.length,i={data:[],empty:!1,forceMax:!0,defaultMax:100};0===g&&0===h&&(i.empty=!0);for(var j=0;j<f;++j){var k={time:moment(c[j]).format(a.dateFormat)};g>j&&(k.jvmCpuLoad=d[j][1]===-1?null:d[j][1].toFixed(2)),h>j&&(k.systemCpuLoad=e[j][1]===-1?null:e[j][1].toFixed(2)),i.data.push(k)}return i},this.getChartOptions=function(a){return{type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:70,markerSize:10,valueAlign:"left",valueFunction:function(a,b){return parseInt(b)===-1?"":b}},usePrefixes:!0,dataProvider:a.data,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"left",title:"Cpu Usage (%)",maximum:100,minimum:0,labelFunction:function(a){return a+"%"}}],graphs:[{valueAxis:"v1",balloonText:"[[value]]%",legendValueText:"[[value]]%",lineColor:"rgb(31, 119, 180)",fillColor:"rgb(31, 119, 180)",title:"JVM",valueField:"jvmCpuLoad",fillAlphas:.4,connect:!1},{valueAxis:"v1",balloonText:"[[value]]%",legendValueText:"[[value]]%",lineColor:"rgb(174, 199, 232)",fillColor:"rgb(174, 199, 232)",title:"System",valueField:"systemCpuLoad",fillAlphas:.4,connect:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}},chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1}}}}])}(),function(){"use strict";pinpointApp.constant("TPSChartDaoServiceConfig",{dateFormat:"YYYY-MM-DD HH:mm:ss"}),pinpointApp.service("TPSChartDaoService",["TPSChartDaoServiceConfig",function(a){function b(a){return angular.isNumber(a)?a===-1?null:a.toFixed(2):0}this.parseData=function(c){var d=c.charts.x,e=c.charts.y.TPS_SAMPLED_CONTINUATION,f=c.charts.y.TPS_SAMPLED_NEW,g=c.charts.y.TPS_UNSAMPLED_CONTINUATION,h=c.charts.y.TPS_UNSAMPLED_NEW,i=c.charts.y.TPS_TOTAL,j=d.length,k=e.length,l=f.length,m=g.length,n=h.length,o=i.length,p={data:[],empty:!1,forceMax:!1,defaultMax:10};0===k&&0===l&&0===m&&0===n&&0===o&&(p.empty=!0);for(var q=0;q<j;q++){var r={time:moment(d[q]).format(a.dateFormat)};k>q&&(r.sampledContinuationTps=b(e[q][2])),l>q&&(r.sampledNewTps=b(f[q][2])),m>q&&(r.unsampledContinuationTps=b(g[q][2])),n>q&&(r.unsampledNewTps=b(h[q][2])),o>q&&(r.totalTps=b(i[q][2])),p.data.push(r)}return p},this.getChartOptions=function(a){return{type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:70,markerSize:10,valueAlign:"left",valueFunction:function(a,b){return parseInt(b)===-1?"":b}},usePrefixes:!0,dataProvider:a.data,valueAxes:[{stackType:"regular",gridAlpha:0,axisAlpha:1,position:"left",title:"Transaction(count)",minimum:0}],graphs:[{balloonText:"Sampled Continuation : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(214, 141, 8)",fillColor:"rgb(214, 141, 8)",title:"S.C",valueField:"sampledContinuationTps",fillAlphas:.4,connect:!1},{balloonText:"Sampled New : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(252, 178, 65)",fillColor:"rgb(252, 178, 65)",title:"S.N",valueField:"sampledNewTps",fillAlphas:.4,connect:!1},{balloonText:"Unsampled Continuation : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(90, 103, 166)",fillColor:"rgb(90, 103, 166)",title:"U.C",valueField:"unsampledContinuationTps",fillAlphas:.4,connect:!1},{balloonText:"Unsampled New : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(160, 153, 255)",fillColor:"rgb(160, 153, 255)",title:"U.N",valueField:"unsampledNewTps",fillAlphas:.4,connect:!1},{balloonText:"Total : [[value]]",legendValueText:"[[value]]",lineColor:"rgba(31, 119, 180, 0)",fillColor:"rgba(31, 119, 180, 0)",title:"Total",valueField:"totalTps",fillAlphas:.4,connect:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}},chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1}}}}])}(),function(){"use strict";pinpointApp.constant("ActiveThreadChartDaoServiceConfig",{dateFormat:"YYYY-MM-DD HH:mm:ss"}),pinpointApp.service("ActiveThreadChartDaoService",["ActiveThreadChartDaoServiceConfig",function(a){function b(a){return angular.isNumber(a)?a===-1?null:a.toFixed(2):0}this.parseData=function(c){var d=c.charts.x,e=c.charts.y.ACTIVE_TRACE_FAST,f=c.charts.y.ACTIVE_TRACE_NORMAL,g=c.charts.y.ACTIVE_TRACE_SLOW,h=c.charts.y.ACTIVE_TRACE_VERY_SLOW,i=d.length,j=e.length,k=f.length,l=g.length,m=h.length,n={data:[],empty:!1,forceMax:!1,defaultMax:10};0===j&&0===k&&0===l&&0===m&&(n.empty=!0);for(var o=0;o<i;o++){var p={time:moment(d[o]).format(a.dateFormat)};j>o&&(p.fast=b(e[o][2]),p.fastTitle=e[o][4]),k>o&&(p.normal=b(f[o][2]),p.normalTitle=f[o][4]),l>o&&(p.slow=b(g[o][2]),p.slowTitle=g[o][4]),m>o&&(p.verySlow=b(h[o][2]),p.verySlowTitle=h[o][4]),n.data.push(p)}return n},this.getChartOptions=function(a){return{type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:70,markerSize:10,valueAlign:"left",valueFunction:function(a,b){return parseInt(b.split(" ")[1])===-1?"":b}},usePrefixes:!0,dataProvider:a.data,valueAxes:[{stackType:"regular",gridAlpha:0,axisAlpha:1,position:"left",title:"Active Thread(count)",minimum:0}],graphs:[{balloonText:"[[description]] : [[value]]",legendValueText:"([[description]]) [[value]]",lineColor:"rgb(44, 160, 44)",fillColor:"rgb(44, 160, 44)",title:"Fast",descriptionField:"fastTitle",valueField:"fast",fillAlphas:.4,connect:!1},{balloonText:"[[description]] : [[value]]",legendValueText:"([[description]]) [[value]]",lineColor:"rgb(60, 129, 250)",fillColor:"rgb(60, 129, 250)",title:"Normal",descriptionField:"normalTitle",valueField:"normal",fillAlphas:.4,connect:!1},{balloonText:"[[description]] : [[value]]",legendValueText:"([[description]]) [[value]]",lineColor:"rgb(248, 199, 49)",fillColor:"rgb(248, 199, 49)",title:"Slow",descriptionField:"slowTitle",valueField:"slow",fillAlphas:.4,connect:!1},{balloonText:"[[description]] : [[value]]",legendValueText:"([[description]]) [[value]]",lineColor:"rgb(246, 145, 36)",fillColor:"rgb(246, 145, 36)",title:"Very Slow",descriptionField:"verySlowTitle",valueField:"verySlow",fillAlphas:.4,connect:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}},chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1}}}}])}(),function(){"use strict";pinpointApp.constant("ResponseTimeChartDaoServiceConfig",{dateFormat:"YYYY-MM-DD HH:mm:ss"}),pinpointApp.service("ResponseTimeChartDaoService",["ResponseTimeChartDaoServiceConfig",function(a){function b(a){return angular.isNumber(a)?a===-1?null:a.toFixed(2):0}function c(a){for(var b=["ms","sec","min"],c=a,d=0;c>=1e3;)d++,c/=1e3;return c+b[d]+" "}this.parseData=function(c){for(var d=c.charts.x,e=c.charts.y.AVG,f=c.charts.y.MAX,g=d.length,h=e.length,i={data:[],empty:0===h,forceMax:!1,defaultMax:100},j=0;j<g;j++){var k={time:moment(d[j]).format(a.dateFormat)};h>j&&(k.avg=b(e[j][2]),k.max=b(f[j][1]),k.title="AVG"),i.data.push(k)}return i},this.getChartOptions=function(a){return{type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:70,markerSize:10,valueAlign:"left",valueFunction:function(a,b){return parseInt(b)===-1?"":b}},usePrefixes:!0,dataProvider:a.data,valueAxes:[{gridAlpha:0,axisAlpha:1,position:"left",title:"Response Time(ms)",minimum:0,labelFunction:function(a){return c(a)}}],graphs:[{balloonText:"AVG : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(44, 160, 44)",fillColor:"rgb(44, 160, 44)",title:"AVG",valueField:"avg",fillAlphas:.4,connect:!1},{valueAxis:"v1",balloonText:"MAX : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(246, 145, 36)",title:"MAX",valueField:"max",fillAlphas:0,connect:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}},chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1}}}}])}(),function(){"use strict";pinpointApp.constant("OpenFileDescriptorDaoServiceConfig",{dateFormat:"YYYY-MM-DD HH:mm:ss"}),pinpointApp.service("OpenFileDescriptorDaoService",["OpenFileDescriptorDaoServiceConfig",function(a){this.parseData=function(b){var c=b.charts.x,d=b.charts.y.OPEN_FILE_DESCRIPTOR_COUNT,e=c.length,f=d.length,g={data:[],empty:!1,forceMax:!1,defaultMax:100};0===f&&(g.empty=!0);for(var h=0;h<e;++h){var i={time:moment(c[h]).format(a.dateFormat)};f>h&&(i.count=d[h][2]===-1?null:d[h][2].toFixed(2)),g.data.push(i)}return g},this.getChartOptions=function(a){return{type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,usePrefixes:!0,dataProvider:a.data,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"left",title:"File Descriptor(count)",minimum:0,labelFunction:function(a){return a}}],graphs:[{valueAxis:"v1",balloonText:"[[value]]",legendValueText:"[[value]]",lineColor:"rgb(31, 119, 180)",fillColor:"rgb(31, 119, 180)",title:"Open File Descriptor",valueField:"count",fillAlphas:.4,connect:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}},chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1}}}}])}(),function(){"use strict";pinpointApp.constant("DirectBufferDaoServiceConfig",{dateFormat:"YYYY-MM-DD HH:mm:ss"}),pinpointApp.service("DirectBufferDaoService",["DirectBufferDaoServiceConfig",function(a){this.parseData=function(b){var c=b.charts.x,d=b.charts.y.DIRECT_COUNT,e=b.charts.y.MAPPED_COUNT,f=b.charts.y.DIRECT_MEMORY_USED,g=b.charts.y.MAPPED_MEMORY_USED,h=c.length,i=d.length,j=e.length,k=f.length,l=g.length,m={data:[],empty:!1,forceMax:!1,defaultMax:100};0===i&&0===j&&(m.empty=!0);for(var n=0;n<h;++n){var o={time:moment(c[n]).format(a.dateFormat)};i>n&&(o.directCount=d[n][2]===-1?null:d[n][2].toFixed(2)),j>n&&(o.mappedCount=e[n][2]===-1?null:e[n][2].toFixed(2)),k>n&&(o.directMemoryUsed=f[n][2]===-1?null:f[n][2].toFixed(2)),l>n&&(o.mappedMemoryUsed=g[n][2]===-1?null:g[n][2].toFixed(2)),m.data.push(o)}return m},this.getDirectBufferCountChartOptions=function(a){return this.getCommonChartOptions(a,"Buffer (counts)",{valueAxis:"v1",balloonText:"Count : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(31, 119, 180)",title:"Direct",valueField:"directCount",fillAlphas:0,connect:!1})},this.getDirectBufferMemoryChartOptions=function(a){return this.getCommonChartOptions(a,"Memory (bytes)",{valueAxis:"v1",balloonText:"Memory : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(31, 119, 180)",title:"Direct",valueField:"directMemoryUsed",fillAlphas:0,connect:!1})},this.getMappedBufferCountChartOptions=function(a){return this.getCommonChartOptions(a,"Buffer (counts)",{valueAxis:"v1",balloonText:"Count : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(31, 119, 180)",title:"Direct",valueField:"mappedCount",fillAlphas:0,connect:!1})},this.getMappedBufferMemoryChartOptions=function(a){return this.getCommonChartOptions(a,"Memory (bytes)",{valueAxis:"v1",balloonText:"Memory : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(31, 119, 180)",title:"Direct",valueField:"mappedMemoryUsed",fillAlphas:0,connect:!1})},this.getCommonChartOptions=function(a,b,c){return{type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,usePrefixes:!0,dataProvider:a.data,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"left",title:b,minimum:0}],graphs:[c],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}},chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1}}}}])}(),function(){"use strict";pinpointApp.constant("agentHistogramDaoServiceConfig",{url:"getResponseTimeHistogramDataV2.pinpoint"}),pinpointApp.service("AgentHistogramDaoService",["agentHistogramDaoServiceConfig","$http","ServerMapDaoService",function(a,b,c){function d(a,b,c,d){return["?","applicationName=",a.applicationName,"&serviceTypeCode=",a.serviceTypeCode,"&from=",c||b.getQueryStartTime(),"&to=",d||b.getQueryEndTime()].join("")}this.loadAgentHistogram=function(e,f,g,h,i){e.agentHistogram&&e.agentTimeSeriesHistogram?g("success",{agentHistogram:e.agentHistogram,agentTimeSeriesHistogram:e.agentTimeSeriesHistogram,serverList:e.serverList}):b.post(a.url+d(e,f,h,i),c.getFromToData(e.key)).then(function(a){g("success",a.data)},function(a){g("error",a)})}}])}(),function(){"use strict";pinpointApp.factory("filteredMapUtilService",["filterConfig","ServerMapFilterVoService","$window",function(a,b,c){return{mergeFilters:function(a,b){var c=[];if(a.getFilter()){var d=JSON.parse(a.getFilter());if(angular.isArray(d)){c=d;var e=this.findFilterInNavbarVo(b.getFromApplication(),b.getFromServiceType(),b.getToApplication(),b.getToServiceType(),a);if(e)return c[e.index]=b.toJson(),c}}return c.push(b.toJson()),c},mergeHints:function(a,b){var c={},d=this.parseShortHintToLongHint(JSON.parse(a.getHint())),e=b.getHint();if(d)if(e){var f=_.keys(e)[0],g=e[f];c=angular.copy(d),angular.isDefined(c[f])?(c[f]=_.union(c[f],g),c[f]=this.uniqueHintValue(c[f])):c[f]=g}else c=d;else c=b.getHint();return c},uniqueHintValue:function(a){for(var b=0;b<a.length;++b)for(var c=b+1;c<a.length;++c)a[b].rpc===a[c].rpc&&a[b].rpcServiceTypeCode===a[c].rpcServiceTypeCode&&a.splice(c--,1);return a},parseShortHintToLongHint:function(a){var b=angular.copy(a);return angular.forEach(b,function(a,c){for(var d=[],e=0;e<a.length;e+=2)d.push({rpc:a[e],rpcServiceTypeCode:a[e+1]});b[c]=d}),b},parseLongHintToShortHint:function(a){var b=angular.copy(a);return angular.forEach(b,function(a,c){var d=[];for(var e in a)d.push(a[e].rpc),d.push(a[e].rpcServiceTypeCode);b[c]=d}),b},getStartValueForFilterByLabel:function(a,b){var c=function(){for(var c in b)if(b[c].label===a)return c;return!1}(),d=0;return c>0&&(d=parseInt(b[c-1].label,10)),d},getFilteredMapUrlWithFilterVo:function(a,b,d){var e=this.mergeFilters(a,b),f=b.getMainApplication()+"@"+b.getMainServiceTypeName(),g="#/filteredMap/"+f+"/"+a.getReadablePeriod()+"/"+a.getQueryEndDateTime()+"/"+c.encodeURIComponent(JSON.stringify(e));if(a.getHint()||d.getHint()){var h=this.mergeHints(a,d),i=this.parseLongHintToShortHint(h);g+="/"+c.encodeURIComponent(JSON.stringify(i))}return g},findFilterInNavbarVo:function(a,c,d,e,f){var g=JSON.parse(f.getFilter()),h=!1;return"USER"===c&&(a="USER"),angular.isArray(g)&&angular.forEach(g,function(f,g){var i=new b(f);a===i.getFromApplication()&&d===i.getToApplication()&&c===i.getFromServiceType()&&e===i.getToServiceType()&&(h={oServerMapFilterVoService:i,index:g})}),h},doFiltersHaveUnknownNode:function(a){for(var b in a)if("UNKNOWN"===a[b].tst)return!0;return!1}}}])}(),function(){"use strict";pinpointApp.constant("filterConfig",{FILTER_DELIMETER:"^",FILTER_ENTRY_DELIMETER:"|"})}(),function(){"use strict";pinpointApp.factory("ServerMapFilterVoService",[function(){return function(a){var b=this;this._sMainApplication=null,this._nMainServiceTypeCode=null,this._sMainServiceTypeName=null,this._sFromApplication=null,this._sFromServiceType=null,this._sFromAgentName=null,this._sToApplication=null,this._sToServiceType=null,this._sToAgentName=null,this._sResponseFrom=0,this._sResponseTo="max",this._bIncludeException=null,this._sRequestUrlPattern="",this.setMainApplication=function(a){if(!angular.isString(a))throw new Error("mainApplication should be string in ServerMapFilterVo. : ",a);return b._sMainApplication=a,b},this.getMainApplication=function(){return b._sMainApplication},this.setMainServiceTypeCode=function(a){if(!angular.isNumber(a))throw new Error("mainServiceTypeCode should be number in ServerMapFilterVo. : ",a);return b._nMainServiceTypeCode=a,b},this.setMainServiceTypeName=function(a){if(!angular.isString(a))throw new Error("mainServiceTypeName should be string in ServerMapFilterVo. : ",a);return b._sMainServiceTypeName=a,b},this.getMainServiceTypeCode=function(){return b._nMainServiceTypeCode},this.getMainServiceTypeName=function(){return b._sMainServiceTypeName},this.setFromApplication=function(a){if(!angular.isString(a))throw new Error("fromApplication should be string in ServerMapFilterVo. : ",a);return b._sFromApplication=a,b},this.getFromApplication=function(){return b._sFromApplication},this.setFromServiceType=function(a){if(!angular.isString(a))throw new Error("fromServiceType should be string in ServerMapFilterVo. : ",a);return b._sFromServiceType=a,b},this.getFromServiceType=function(){return b._sFromServiceType},this.setFromAgentName=function(a){if(!angular.isString(a))throw new Error("fromAgentName should be string in ServerMapFilterVo. : ",a);return b._sFromAgentName=a,b},this.getFromAgentName=function(){return b._sFromAgentName},this.setToApplication=function(a){if(!angular.isString(a))throw new Error("toApplication should be string in ServerMapFilterVo. : ",a);return b._sToApplication=a,b},this.getToApplication=function(){return b._sToApplication},this.setToServiceType=function(a){if(!angular.isString(a))throw new Error("toServiceType should be string in ServerMapFilterVo. : ",a);return b._sToServiceType=a,b},this.getToServiceType=function(){return b._sToServiceType},this.setToAgentName=function(a){if(!angular.isString(a))throw new Error("toAgentName should be string in ServerMapFilterVo. : ",a);return b._sToAgentName=a,b},this.getToAgentName=function(){return b._sToAgentName},this.setResponseFrom=function(a){if(angular.isString(a))b._sResponseFrom=parseInt(a,10);else{if(!angular.isNumber(a))throw new Error("responseFrom should be string in ServerMapFilterVo. : ",a);b._sResponseFrom=a}return b},this.getResponseFrom=function(){return b._sResponseFrom},this.setResponseTo=function(a){if("max"===a)b._sResponseTo="max";else{if(!angular.isNumber(a)&&!angular.isString(a))throw new Error("responseTo should be string in ServerMapFilterVo.");a=parseInt(a,10),a>=3e4?b._sResponseTo="max":b._sResponseTo=a}return b},this.getResponseTo=function(){return b._sResponseTo},this.setIncludeException=function(a){if(!angular.isDefined(a))throw new Error("includeException should be defined in ServerMapFilterVo.");return b._bIncludeException=a,b},this.getIncludeException=function(){return b._bIncludeException},this.setRequestUrlPattern=function(a){return angular.isString(a)&&(b._sRequestUrlPattern=a),b},this.getRequestUrlPattern=function(){return b._sRequestUrlPattern},this.toJson=function(){var a={fa:b._sFromApplication,fst:b._sFromServiceType,ta:b._sToApplication,tst:b._sToServiceType,ie:b._bIncludeException};return 0===b._sResponseFrom&&"max"===b._sResponseTo||(a.rf=b._sResponseFrom,a.rt=b._sResponseTo),b._sRequestUrlPattern&&(a.url=b._sRequestUrlPattern),b._sFromAgentName&&(a.fan=b._sFromAgentName),b._sToAgentName&&(a.tan=b._sToAgentName),a},a&&angular.isObject(a)&&(this.setFromApplication(a.fa).setFromServiceType(a.fst).setToApplication(a.ta).setToServiceType(a.tst).setIncludeException(a.ie),angular.isNumber(a.rf)&&a.rt&&this.setResponseFrom(a.rf).setResponseTo(a.rt),a.url&&this.setRequestUrlPattern(a.url),a.fan&&this.setFromAgentName(a.fan),a.tan&&this.setToAgentName(a.tan))}}])}(),function(a){"use strict";pinpointApp.constant("AlarmAjaxServiceConfig",{group:"userGroup.pinpoint",groupMember:"userGroup/member.pinpoint",pinpointUser:"user.pinpoint",alarmRule:"application/alarmRule.pinpoint",alarmRuleSet:"application/alarmRule/checker.pinpoint"}),pinpointApp.service("AlarmAjaxService",["AlarmAjaxServiceConfig","$http",function(b,c){function d(a,b,d){c.post(a,b).then(function(a){d(a.data)},function(a){d(a)})}function e(a,b,d){c.put(a,b).then(function(a){d(a.data)},function(a){d(a)})}function f(b,c,d){a.ajax(b,{type:"DELETE",data:JSON.stringify(c),contentType:"application/json"}).done(function(a){d(a)}).fail(function(a){d(a)})}function g(b,d,e){c.get(b+"?"+a.param(d||{})).then(function(a){e(a.data)},function(a){e(a)})}this.getUserGroupList=function(a,c){g(b.group,a,c)},this.createUserGroup=function(a,c){d(b.group,a,c)},this.updateUserGroup=function(a,c){e(b.group,a,c)},this.removeUserGroup=function(a,c){f(b.group,a,c)},this.addMemberInGroup=function(a,c){d(b.groupMember,a,c)},this.getGroupMemberListInGroup=function(a,c){g(b.groupMember,a,c)},this.removeMemberInGroup=function(a,c){f(b.groupMember,a,c)},this.getPinpointUserList=function(a,c){g(b.pinpointUser,a,c)},this.createPinpointUser=function(a,c){d(b.pinpointUser,a,c)},this.updatePinpointUser=function(a,c){e(b.pinpointUser,a,c)},this.removePinpointUser=function(a,c){f(b.pinpointUser,a,c)},this.getRuleList=function(a,c){g(b.alarmRule,a,c)},this.createRule=function(a,c){d(b.alarmRule,a,c)},this.updateRule=function(a,c){e(b.alarmRule,a,c)},this.removeRule=function(a,c){f(b.alarmRule,a,c)},this.getRuleSet=function(a,c){g(b.alarmRuleSet,a,c)}}])}(jQuery),function(a){"use strict";pinpointApp.constant("AlarmUtilServiceConfig",{hideClass:"hide-me"}),pinpointApp.service("AlarmUtilService",["AlarmUtilServiceConfig","$timeout","AlarmAjaxService","SystemConfigurationService",function(b,c,d,e){var f=this;this.show=function(a){a.removeClass(b.hideClass)},this.hide=function(){for(var a=0;a<arguments.length;a++)arguments[a].addClass(b.hideClass)},this.sendCRUD=function(a,b,c,d){angular.isUndefined(b)||""===b?e.getConfig().then(function(e){b={userId:e.userId||""},f.load(a,b,c,d)}):this.load(a,b,c,d)},this.load=function(a,b,c,e){d[a](b,function(a){a.errorCode||a.status?e(a):c(a)})},this.setTotal=function(a,b){a.html("("+b+")")},this.hasDuplicateItem=function(a,b){for(var c=a.length,d=!1,e=0;e<c;e++)if(b(a[e])){d=!0;break}return d},this.closeAlert=function(a,b){a.animate({height:50},100,function(){f.hide(a,b)})},this.extractID=function(a){return a.prop("id").split("_")[1]},this.getNode=function(b,c){return a(b.toElement||b.target).parents(c)}}])}(jQuery),function(a){"use strict";pinpointApp.service("InstallationAjaxService",["$http",function(b){function c(c,d,e){b.get(c+"?"+a.param(d)).then(function(a){e(a.data)},function(a){e(a)})}this.getAgentInstallationInfo=function(a){c("getAgentInstallationInfo.pinpoint",{},a)},this.isAvailableApplicationName=function(a,b){c("isAvailableApplicationName.pinpoint",a,b)},this.isAvailableAgentId=function(a,b){c("isAvailableAgentId.pinpoint",a,b)}}])}(jQuery),function(){"use strict";pinpointApp.factory("ServerMapHintVoService",[function(){return function(a){var b=this;this._sApplicationName=!1,this._aHint=!1,this.setHint=function(a,b){this._sApplicationName=a,this._aHint=b},this.getHint=function(){var a={};return b._sApplicationName?a[b._sApplicationName]=b._aHint:a=!1,a}}}])}(),function(){"use strict";pinpointApp.factory("isVisibleService",function(){function a(d,e,f,g,h,i,j,k){var l=d.parentNode,m=2;if(!c(d))return!1;if(e||0===e||(e=99999),9===l.nodeType)return!0;if("0"===b(d,"opacity")||"none"===b(d,"display")||"hidden"===b(d,"visibility"))return!1;if("undefined"!=typeof f&&"undefined"!=typeof g&&"undefined"!=typeof h&&"undefined"!=typeof i&&"undefined"!=typeof j&&"undefined"!=typeof k||(f=d.offsetTop,i=d.offsetLeft,h=f+d.offsetHeight,g=i+d.offsetWidth,j=d.offsetWidth,k=d.offsetHeight),l){var n=b(l,"overflow");return!(("hidden"===n||"scroll"===n||"auto"===n)&&e>0&&(e-=1,i+m>l.offsetWidth+l.scrollLeft||i+j-m<l.scrollLeft||f+m>l.offsetHeight+l.scrollTop||f+k-m<l.scrollTop))&&(d.offsetParent===l&&(i+=l.offsetLeft,f+=l.offsetTop),a(l,e,f,g,h,i,j,k))}return!0}function b(a,b){return window.getComputedStyle?document.defaultView.getComputedStyle(a,null)[b]:a.currentStyle?a.currentStyle[b]:void 0}function c(a){for(;a=a.parentNode;)if(a==document)return!0;return!1}return a})}(),function(){"use strict";pinpointApp.factory("UserLocalesService",["$window",function(a){var b="en",c=a.navigator.userLanguage||a.navigator.language;return c="string"===$.type(c)&&c.length>=2?c.substring(0,2):b,{userLocale:c,defaultLocale:b}}])}(),function(){"use strict";var a={configuration:{general:{warning:"(User configuration is stored in browser cache. Server-side storage will be supported in a future release.)",empty:"Favorite list is empty"},alarmRules:{mainStyle:"",title:"Types of Alarm Rule",desc:"The following types of alarm rules are supported by Pinpoint.",category:[{title:"[Type]",items:[{name:"SLOW COUNT",desc:"Sends an alarm when the number of slow requests sent by the application exceeds the configured threshold."},{name:"SLOW RATE",desc:"Sends an alarm when the percentage(%) of slow requests sent by the application exceeds the configured threshold."},{name:"ERROR COUNT",desc:"Sends an alarm when the number of failed requests sent by the application exceeds the configured threshold."},{name:"ERROR RATE",desc:"Sends an alarm when the percentage(%) of failed requests sent by the application exceeds the configured threshold."},{name:"TOTAL COUNT",desc:"Sends an alarm when the number of all requests sent by the application exceeds the configured threshold."},{name:"SLOW COUNT TO CALLEE",desc:"Sends an alarm when the number of slow responses returned by the application exceeds the configured threshold."},{name:"SLOW RATE TO CALLEE",desc:"Sends an alarm when the percentage(%) of slow responses returned by the application exceeds the configured threshold."},{name:"ERROR COUNT TO CALLEE",desc:"Sends an alarm when the number of failed responses returned by the application exceeds the configured threshold."},{name:"ERROR RATE TO CALLEE",desc:"Sends an alarm when the percentage(%) of failed responses returned by the application exceeds the configured threshold."},{name:"TOTAL COUNT TO CALLEE",desc:"Sends an alarm when the number of all remote calls sent to the application exceeds the configured threshold."},{name:"HEAP USAGE RATE",desc:"Sends an alarm when the application's heap usage(%) exceeds the configured threshold."},{name:"JVM CPU USAGE RATE",desc:"Sends an alarm when the application's CPU usage(%) exceeds the configured threshold."},{name:"DATASOURCE CONNECTION USAGE RATE",desc:"Sends an alarm when the application's DataSource connection usage(%) exceeds the configured threshold."},{name:"DEADLOCK OCCURRENCE",desc:"Sends an alarm when deadlock condition is detected in application."}]}]},installation:{desc:"* You can check if Application Name and Agent Id are duplicated.",lengthGuide:"You can enter up to {{MAX_CHAR}} characters."}},navbar:{searchPeriod:{guideDateMax:"Search duration may not be greater than {{day}} days.",guideDateOrder:"Date or time set incorrectly"},applicationSelector:{mainStyle:"",title:"Application List",desc:"Shows the list of applications with Pinpoint installed.",category:[{title:"[Legend]",items:[{name:"Icon",desc:"Type of the Application"},{name:"Text",desc:"Name of the Application. The value of <code>-Dpinpoint.applicationName</code> in Pinpoint agent configuration."}]}]},depth:{mainStyle:"",title:'<img src="images/inbound.png" width="22px" height="22px" style="margin-top:-4px;"> Inbound and <img src="images/outbound.png" width="22px" height="22px" style="margin-top:-4px"> Outbound',desc:"Search-depth of server map.",category:[{title:"[Legend]",items:[{name:"Inbound",desc:"Number of depth to render for requests coming into the selected node."},{name:"Outbound",desc:"Number of depth to render for requests going out from the selected node"}]}]},bidirectional:{mainStyle:"",title:'<img src="images/bidirect_on.png" width="22px" height="22px" style="margin-top:-4px;"> Bidirectional Search',desc:"Search-method of server map.",category:[{title:"[Legend]",items:[{name:"Bidirectional",desc:"Renders inbound/outbound nodes for each and every node (within limit) even if they are not directly related to the selected node.<br>Note that checking this option may lead to overly complex server maps."}]}]},periodSelector:{mainStyle:"",title:"Period Selector",desc:"Selects the time range for search data.",category:[{title:"[Usage]",items:[{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-th-list'></span></button>",desc:"Query for data traced during the most recent selected time-period.<br/>Auto-refresh is supported for 5m, 10m, 3h time-period."},{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-calendar'></span></button>",desc:"Query for traced data between two selected times with the maximum of 48 hours."}]}]}},servermap:{"default":{mainStyle:"width:560px;",title:"Server Map",desc:"Displays a topological view of the distributed server map.",category:[{title:"[Node]",list:["Each node is a logical unit of application.","The value on the top-right corner represents the number of server instances assigned to that application. (Not shown when there is only one such instance)","An alarm icon is displayed on the top-left corner if an error/exception is detected in one of the server instances.","Clicking a node shows information on all incoming transactions on the right-hand side of the screen."]},{title:"[Arrow]",list:["Each arrow represents a transaction flow.","The number shows the transaction count. Displayed in red for error counts that exceeds the threshold.","<span class='glyphicon glyphicon-filter' style='color:green;'></span> is shown when a filter is applied.","Clicking an arrow shows information on all transactions passing through the selected section on the right-hand side of the screen."]},{title:"[Usage of the Node]",list:["When the node is selected, the transaction information flowing into the application is displayed on the right side of the screen."]},{title:"[Usage of the Arrow]",list:["Select the arrow to show the transaction information that passes through the selected section on the right side of the screen.","The Filter in the Context menu shows only the transactions that pass through the selected section.","Filter wizard allows you to configure more detailed filters.","When the filter is applied, <span class = 'glyphicon glyphicon-filter' style = 'color: green;'> </span> icon will be displayed on the arrow."]},{title:"[Applying Filter]",list:["Right-clicking on an arrow displays the filter menu.","'Filter' filters the server map to show transactions that have passed through the selected section.","'Filter Wizard' allows additional filter configurations."]
},{title:"[Chart Configuration]",list:["Right-clicking on any blank area displays a chart configuration menu.","Node Setting / Merge Unknown : Groups all applications without agent and displays it as a single node.","Double-clicking on any blank area resets the zoom level of the server map."]}]}},scatter:{"default":{mainStyle:"",title:"Response Time Scatter Chart",desc:"",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-stop' style='color:#2ca02c'></span>",desc:"Successful Transaction"},{name:"<span class='glyphicon glyphicon-stop' style='color:#f53034'></span>",desc:"Failed Transaction"},{name:"X-axis",desc:"Transaction Timestamp (hh:mm)"},{name:"Y-axis",desc:"Response Time (ms)"}]},{title:"[Usage]",image:"<img src='images/help/scatter_01.png' width='200px' height='125px'>",items:[{name:"<span class='glyphicon glyphicon-plus'></span>",desc:"Drag on the scatter chart to show detailed information on selected transactions."},{name:"<span class='glyphicon glyphicon-cog'></span>",desc:"Set the min/max value of the Y-axis (Response Time)."},{name:"<span class='glyphicon glyphicon-download-alt'></span>",desc:"Download the chart as an image file."},{name:"<span class='glyphicon glyphicon-fullscreen'></span>",desc:"Open the chart in a new window."}]}]}},realtime:{"default":{mainStyle:"",title:"Realtime Active Thread Chart",desc:"Shows the Active Thread count of each agent in realtime.",category:[{title:"[Error Messages]",items:[{name:"UNSUPPORTED VERSION",desc:"Agent version too old. (Please upgrade the agent to 1.5.0+)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER OPTION NOTSET",desc:"Option disabled by agent. (Please set profiler.pinpoint.activethread to true in profiler.config)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"TIMEOUT",desc:"Agent connection timed out receiving active thread count. Please contact the administrator if problem persists.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"NOT FOUND",desc:"Agent not found. (If you get this message while the agent is running, please set profiler.tcpdatasender.command.accept.enable to true in profiler.config)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER CHANNEL CLOSED",desc:"Agent session expired.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"PINPOINT INTERNAL ERROR",desc:"Pinpoint internal error. Please contact the administrator.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Active Thread",desc:"The agent has no threads that are currently active.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Response",desc:"No response from Pinpoint Web. Please contact the administrator.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"}]}]}},nodeInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Response Time"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]}]},load:{mainStyle:"",title:"Load Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Transaction Timestamp (in minutes)"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]},{title:"[Usage]",list:["Clicking on a legend item shows/hides all transactions within the selected group.","Dragging on the chart zooms in to the dragged area."]}]},nodeServers:{mainStyle:"width:400px;",title:"Server Information",desc:"List of physical servers and their server instances.",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Hostname of the physical server"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"AgentId of the Pinpoint agent installed on the server instance running on the physical server"}]},{title:"[Usage]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Open a new window with detailed information on the WAS with Pinpoint installed."},{name:"<span class='glyphicon glyphicon-record' style='color:#3B99FC'></span>",desc:"Display statistics on transactions carried out by the server instance."},{name:"<span class='glyphicon glyphicon-hdd' style='color:red'></span>",desc:"Display statistics on transactions (with error) carried out by the server instance."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"From the chart's top-right icon",category:[{title:"[Usage]",items:[{name:"1st",desc:"Toggle between Response Summary Chart / Load Chart"},{name:"2nd",desc:"Show Node Details"}]}]},searchAndOrder:{mainStyle:"",title:"Search and Filter",desc:"You can search with server name and Counts.",category:[{title:"[Usage]",items:[{name:"Name",desc:"Sort names in ascending / descending order."},{name:"Count",desc:"Sort counts in ascending / descending order."}]}]}},linkInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Response Time"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]},{title:"[Usage]",list:["Click on the bar to query for transactions within the selected response time."]}]},load:{mainStyle:"",title:"Load Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Transaction Timestamp (in minutes)"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]},{title:"[Usage]",list:["Clicking on a legend item shows/hides all transactions within the selected group.","Dragging on the chart zooms in to the dragged area."]}]},linkServers:{mainStyle:"width:350px;",title:"Server Information",desc:"List of physical servers and their server instances.",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Hostname of the physical server"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"AgentId of the Pinpoint agent installed on the server instance running on the physical server"}]},{title:"[Usage]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Open a new window with detailed information on the WAS where Pinpoint is installed."},{name:"<button type='button' class='btn btn-default btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"Display statistics on transactions carried out by the server instance."},{name:"<button type='button' class='btn btn-danger btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"Display statistics on transactions (with error) carried out by the server instance."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"From the chart's top-right icon,",category:[{title:"[Usage]",items:[{name:"1st",desc:"Toggle between Response Summary Chart"},{name:"2dn",desc:"Show Node Details"}]}]},searchAndOrder:{mainStyle:"",title:"Search and Filter",desc:"You can search with server name and Counts.",category:[{title:"[Usage]",items:[{name:"Name",desc:"Sort names in ascending / descending order."},{name:"Count",desc:"Sort counts in ascending / descending order."}]}]}},inspector:{noDataCollected:"No data collected",list:{mainStyle:"",title:"Agent list",desc:"List of agents registered under the current Application Name",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Hostname of the agent's machine"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"Agent-id of the installed agent"},{name:"<span class='glyphicon glyphicon-ok-sign' style='color:#40E340'></span>",desc:"Agent was running at the time of query"},{name:"<span class='glyphicon glyphicon-minus-sign' style='color:#F00'></span>",desc:"Agent was shutdown at the time of query"},{name:"<span class='glyphicon glyphicon-remove-sign' style='color:#AAA'></span>",desc:"Agent was disconnected at the time of query"},{name:"<span class='glyphicon glyphicon-question-sign' style='color:#AAA'></span>",desc:"Agent status was unknown at the time of query"}]}]},heap:{mainStyle:"",title:"Heap",desc:"JVM's heap information and full garbage collection time required",category:[{title:"[Legend]",items:[{name:"Max",desc:"Maximum heap size"},{name:"Used",desc:"Heap size currently in use"},{name:"FGC",desc:"Time required for full garbage collection (number of FGCs in parenthesis if it occurred more than once)"}]}]},permGen:{mainStyle:"",title:"Non-Heap",desc:"JVM's non-heap information and full garbage collection time required",category:[{title:"[Legend]",items:[{name:"Max",desc:"Maximum non-heap size"},{name:"Used",desc:"Non-heap size currently in use"},{name:"FGC",desc:"Time required for full garbage collection (number of FGCs in parenthesis if it occurred more than once)"}]}]},cpuUsage:{mainStyle:"",title:"Cpu Usage",desc:"JVM/System's CPU Usage - For multi-core CPUs, displays the average CPU usage of all the cores",category:[{title:"[Legend]",items:[{name:"Java 1.6",desc:"Only JVM's CPU usage is collected"},{name:"Java 1.7+",desc:"Both JVM's and system's CPU usage are collected"}]}]},tps:{mainStyle:"",title:"TPS",desc:"Transactions received by the server per second ",category:[{title:"[Legend]",items:[{name:"Sampled New (S.N)",desc:"Profiled transactions that started from the selected agent"},{name:"Sampled Continuation (S.C)",desc:"Profiled transactions that started from another agent"},{name:"Unsampled New (U.N)",desc:"Unprofiled transactions that started from the selected agent"},{name:"Unsampled Continuation (U.C)",desc:"Unprofiled transactions that started from another agent"},{name:"Total",desc:"All transactions"}]}]},activeThread:{mainStyle:"",title:"Active Thread",desc:"Snapshots of the agent's active thread status, categorized by how long they have been active for serving a request.",category:[{title:"[Legend]",items:[{name:"Fast (1s)",desc:"Number of threads that have been active for less than or equal to 1s"},{name:"Normal (3s)",desc:"Number of threads that have been active for less than or equal to 3s but longer than 1s"},{name:"Slow (5s)",desc:"Number of threads that have been active for less than or equal to 5s but longer than 3s"},{name:"Very Slow (slow)",desc:"Number of threads that have been active for longer than 5s"}]}]},dataSource:{mainStyle:"",title:"Data Source",desc:"Show the status of agent's data source.",category:[{title:"[Legend]",items:[{name:"Active Avg",desc:"Average number of active connections"},{name:"Active Max",desc:"Maximum number of active connections"},{name:"Total Max",desc:"The maximum number of connections that can be allocated at the same time"},{name:"Type",desc:"Type of DB Connection Pool"}]}]},responseTime:{mainStyle:"",title:"Response time",desc:"Shows the status of agent's response time.",category:[{title:"[Legend]",items:[{name:"Avg",desc:"Average Response Time (unit : milliseconds)"}]}]},openFileDescriptor:{mainStyle:"",title:"File Descriptor",desc:"Shows the status of agent's file descriptors.",category:[{title:"[Legend]",items:[{name:"Open File Descriptor",desc:"Number of open file descriptor currently used"}]}]},directBufferCount:{mainStyle:"",title:"Direct Buffer",desc:"Shows the status of agent's direct buffer",category:[{title:"[Legend]",items:[{name:"Direct Buffer Count",desc:"Number of direct buffer"}]}]},directBufferMemory:{mainStyle:"",title:"Direct Buffer Memory",desc:"Shows the status of agent's used direct buffer memory",category:[{title:"[Legend]",items:[{name:"Direct Buffer Memory Used",desc:"Currently used direct buffer memory"}]}]},mappedBufferCount:{mainStyle:"",title:"Mapped Buffer",desc:"Shows the status of agent's Mapped buffer",category:[{title:"[Legend]",items:[{name:"Mapped Buffer Count",desc:"Number of Mapped buffer"}]}]},mappedBufferMemory:{mainStyle:"",title:"Mapped Buffer Memory",desc:"Shows the status of agent's used Mapped buffer memory",category:[{title:"[Legend]",items:[{name:"Mapped Buffer Memory Used",desc:"Currently used Mapped buffer memory"}]}]},wrongApp:["<div style='font-size:12px'>The agent is currently registered under {{application2}} due to the following:<br>","1. The agent has moved from {{application1}} to {{application2}}<br>","2. A different agent with the same agent id has been registered to {{application2}}<hr>","For case1, you should delete the mapping between {{application1}} and {{agentId}}.<br>","For case2, the agent id of the duplicate agent must be changed.</div>"].join(""),statHeap:{mainStyle:"",title:"Heap",desc:"Heap size used by the agent JVMs",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Largest heap size used by an agent JVM"},{name:"AVG",desc:"Average heap size used by the agent JVMs"},{name:"MIN",desc:"Smallest heap size used by an agent JVM"}]}]},statPermGen:{mainStyle:"",title:"Non-Heap",desc:"Non-heap size used by the agent JVMs",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Largest non-heap size used by an agent JVM"},{name:"AVG",desc:"Average non-heap size used by the agent JVMs"},{name:"MIN",desc:"Smallest non-heap size used by an agent JVM"}]}]},statJVMCpu:{mainStyle:"",title:"JVM Cpu Usage",desc:"CPU used by agent JVM processes - For multi-core CPUs, displays the average CPU usage of all the cores.",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Largest CPU usage of agent JVM processes"},{name:"AVG",desc:"Average CPU usage of agent JVM processes"},{name:"MIN",desc:"Smallest CPU usage of agent JVM processes"}]}]},statSystemCpu:{mainStyle:"",title:"System pu Usage",desc:"CPU usage of every agent's system - For multi-core CPUs, displays the average CPU usage of all cores.",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Largest system CPU usage of agents"},{name:"AVG",desc:"Average system CPU usage of agents"},{name:"MIN",desc:"Smallest system CPU usage of agents"}]},{title:"[Reference]",items:[{name:"Java 1.6",desc:"Only the JVM's CPU usage is collected"},{name:"Java 1.7+",desc:"Both JVM's and system's CPU usage are collected"}]}]},statTPS:{mainStyle:"",title:"TPS",desc:"Number of transactions received by the agents per second",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Highest TPS of the agents"},{name:"AVG",desc:"Average TPS of the agents"},{name:"MIN",desc:"Lowest TPS of the agents"}]}]},statActiveThread:{mainStyle:"",title:"Active Thread",desc:"Number of active threads serving user requests",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Highest active thread count of the agents serving user requests"},{name:"AVG",desc:"Average active thread count of the agents serving user requests"},{name:"MIN",desc:"Lowest active thread count of the agents serving user requests"}]}]},statResponseTime:{mainStyle:"",title:"Response Time",desc:"Average response times served by the agents",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Highest value of agents' average response time"},{name:"AVG",desc:"Average value of agents' average response time"},{name:"MIN",desc:"Lowest value of agents' average response time"}]}]},statDataSource:{mainStyle:"",title:"Data Source",desc:"Status of the agents' data source",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Largest data source connection count of the agents"},{name:"AVG",desc:"Average data source connection count of the agents"},{name:"MIN",desc:"Smallest data source connection count of the agents"}]}]},statOpenFileDescriptor:{mainStyle:"",title:"File Descriptor",desc:"Number of file descriptors used by agents",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Max number of open file descriptors"},{name:"AVG",desc:"average open file descriptors"},{name:"MIN",desc:"Min number of open file descriptors"}]}]},statDirectBufferCount:{mainStyle:"",title:"Direct Buffer",desc:"Number of direct buffer used by agents",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Max number of direct buffer"},{name:"AVG",desc:"average number of direct buffer"},{name:"MIN",desc:"Min number of direct buffer"}]}]},statDirectBufferMemory:{mainStyle:"",title:"Direct Buffer Memory",desc:"Number of Direct buffer used by agents",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Max number of direct buffer"},{name:"AVG",desc:"average number of direct buffer"},{name:"MIN",desc:"Min number of direct buffer"}]}]},statMappedBufferCount:{mainStyle:"",title:"Mapped Buffer",desc:"Number of Mapped buffer used by agents",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Max number of Mapped buffer"},{name:"AVG",desc:"average number of Mapped buffer"},{name:"MIN",desc:"Min number of Mapped buffer"}]}]},statMappedBufferMemory:{mainStyle:"",title:"Mapped Buffer Memory",desc:"Number of Mapped buffer used by agents",category:[{title:"[Legend]",items:[{name:"MAX",desc:"Max number of Mapped buffer"},{name:"AVG",desc:"average number of Mapped buffer"},{name:"MIN",desc:"Min number of Mapped buffer"}]}]}},callTree:{column:{mainStyle:"",title:"Call Tree",desc:"",category:[{title:"[Column]",items:[{name:"Gap",desc:"Elapsed time between the start of the previous method and the entry of this method"},{name:"Exec",desc:"Duration of the method call from entry to exit"},{name:"Exec(%)",desc:"<img src='images/help/callTree_01.png'/>"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#5bc0de'>Light blue</span> The execution time of the method call as a percentage of the total execution time of the transaction"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#4343C8'>Dark blue</span> A percentage of the self execution time"},{name:"Self",desc:"Duration of the method call from entry to exit, excluding time consumed in nested methods call"}]}]}},transactionTable:{log:{}},transactionList:{openError:{noParent:"Unable to scan any more data due to the change of\r\nscatter data in parent window.",noData:"There is no {{application}} scatter data in parent window."}},applicationInspectorGuideMessage:"Application Inspector is not enabled.<br>To enable Application Inspector, please refer to <a href='https://github.com/naver/pinpoint/blob/master/doc/application-inspector.md'>this link <span class='glyphicon glyphicon-new-window'></span></a>."};pinpointApp.constant("helpContent-en",a)}(),function(){"use strict";var a={configuration:{general:{warning:"*     .       .",empty:"  ."},alarmRules:{mainStyle:"",title:"  ",desc:"Pinpoint  Alarm rule   .",category:[{title:"[]",items:[{name:"SLOW COUNT",desc:"application      slow       ."},{name:"SLOW RATE",desc:"application      slow  (%)     ."},{name:"ERROR COUNT",desc:"application      error         ."},{name:"ERROR RATE",desc:"application      error         ."},{name:"TOTAL COUNT",desc:"application          ."},{name:"SLOW COUNT TO CALLEE",desc:" application              ."},{name:"SLOW RATE TO CALLEE",desc:" application         (%)     ."},{name:"ERROR COUNT TO CALLEE",desc:" application            ."},{name:"ERROR RATE TO CALLEE",desc:" application       (%)     ."},{name:"TOTAL COUNT TO CALLEE",desc:" application        ."},{name:"HEAP USAGE RATE",desc:"heap      ."},{name:"JVM CPU USAGE RATE",desc:"application CPU      ."},{name:"DATASOURCE CONNECTION USAGE RATE",desc:"application DataSource Connection      ."},{name:"DEADLOCK OCCURRENCE",desc:"application     ."}]}]},installation:{desc:"* Application Name  Agent Id      .",lengthGuide:"1 ~ {{MAX_CHAR}}  ."}},navbar:{searchPeriod:{guideDateMax:"       {{day}} .",guideDateOrder:"     ."},applicationSelector:{mainStyle:"",title:" ",desc:"   .",category:[{title:"[]",items:[{name:"",desc:" "},{name:"",desc:" . Pinpoint agent  applicationName  ."}]}]},depth:{mainStyle:"",title:'<img src="images/inbound.png" width="22px" height="22px" style="margin-top:-4px;"> Inbound  <img src="images/outbound.png" width="22px" height="22px" style="margin-top:-4px"> Outbound',desc:"   .",category:[{title:"[]",items:[{name:"Inbound",desc:"    "},{name:"Outbound",desc:"     "}]}]},bidirectional:{mainStyle:"",title:'<img src="images/bidirect_on.png" width="22px" height="22px" style="margin-top:-4px;"> Bidirectional Search',desc:"   .",category:[{title:"[]",items:[{name:"Bidirectional",desc:"            .<br> :          ."}]}]},periodSelector:{mainStyle:"",title:"  ",desc:"   .",category:[{title:"[]",items:[{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-th-list'></span></button>",desc:"          .<br/> 5m, 10m, 3h    ."},{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-calendar'></span></button>",desc:"     .     48   ."}]}]}},servermap:{"default":{mainStyle:"width:560px;",title:"",desc:"     .",category:[{title:"[]",list:["   .","       .(     .)","         ."]},{title:"[]",list:["   .","    .      .","<span class='glyphicon glyphicon-filter' style='color:green;'></span> :    ."]},{title:"[ ]",list:["        ."]},{title:"[ ]",list:["         .","Context menu Filter      .","Filter wizard       .","   <span class='glyphicon glyphicon-filter' style='color:green;'></span> ."]},{title:"[ ]",list:["     context menu    .","Node Setting / Merge Unknown : agent      .","   :   ."]}]}},realtime:{"default":{mainStyle:"",title:"Realtime Active Thread Chart",desc:" Agent Active Thread   .",category:[{title:"[  ]",items:[{name:"UNSUPPORTED VERSION",desc:"     . (1.5.0   .)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER OPTION NOTSET",desc:"     . (pinpoint   profiler.pinpoint.activethread  true .)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"TIMEOUT",desc:"        .(    .)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"NOT FOUND",desc:"    .(        pinpoint   profiler.tcpdatasender.command.accept.enable  true .)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER CHANNEL CLOSED",desc:"   .",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"PINPOINT INTERNAL ERROR",desc:"   .( .)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Active Thread",desc:"      .",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Response",desc:"     .( .)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"}]}]}},scatter:{"default":{mainStyle:"",title:"Response Time Scatter Chart",desc:"   .",category:[{title:"[]",items:[{name:"<span class='glyphicon glyphicon-stop' style='color:#2ca02c'></span>",desc:"   (Success)"},{name:"<span class='glyphicon glyphicon-stop' style='color:#f53034'></span>",desc:"   (Failed)"},{name:"X",desc:"   (:)"},{name:"Y",desc:"   (ms)"}]},{title:"[]",image:"<img src='images/help/scatter_01.png' width='200px' height='125px'>",items:[{name:"<span class='glyphicon glyphicon-plus'></span>",desc:"           ."},{name:"<span class='glyphicon glyphicon-cog'></span>",desc:"   (Failed)"},{name:"X",desc:"(Y)      ."},{name:"<span class='glyphicon glyphicon-download-alt'></span>",desc:"   ."}]}]}},nodeInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"  .",category:[{title:"[]",items:[{name:"X",desc:"   "},{name:"Y",desc:" "},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0 <=  < 1</span>     "},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1 <=  < 3</span>     "},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3 <=  < 5</span>     "},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5 <= </span>     "},{name:"<span style='color:#f53034'>Error</span>",desc:"    "}]}]},load:{mainStyle:"",title:"Load Chart",desc:"   .",category:[{title:"[]",items:[{name:"X",desc:"   ()"},{name:"Y",desc:" "},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0 <=  < 1</span>     "},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1 <=  < 3</span>     "},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3 <=  < 5</span>     "},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5 <= </span>     "},{name:"<span style='color:#f53034'>Error</span>",desc:"    "}]},{title:"[]",list:["           .","       ."]}]},nodeServers:{mainStyle:"width:400px;",title:"Server Information",desc:"       .",category:[{title:"[]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:" ."},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"     Pinpoint agentId."}]},{title:"[]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Pinpoint  WAS   ."},{name:"<span class='glyphicon glyphicon-record' style='color:#3B99FC'></span>",desc:"       ."},{name:"<span class='glyphicon glyphicon-hdd' style='color:red'></span>",desc:"    ."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"   ",category:[{title:"[]",items:[{name:"",desc:"Response Summary"},{name:"",desc:"  "}]}]},searchAndOrder:{mainStyle:"",title:" ",desc:"  Count  .",category:[{title:"[]",items:[{name:"Name",desc:" /  ."},{name:"Count",desc:" /  ."}]}]}},linkInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"  .",category:[{title:"[]",items:[{name:"X",desc:"   "},{name:"Y",desc:" "},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0 <=  < 1</span>     "},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1 <=  < 3</span>     "},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3 <=  < 5</span>     "},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5 <= </span>     "},{name:"<span style='color:#f53034'>Error</span>",desc:"    "}]},{title:"[]",list:["(bar)       ."]}]},load:{mainStyle:"",title:"Load Chart",desc:"   .",category:[{title:"[]",items:[{name:"X",desc:"   ()"},{name:"Y",desc:" "},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0 <=  < 1</span>     "},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1 <=  < 3</span>     "},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3 <=  < 5</span>     "},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5 <= </span>     "},{name:"<span style='color:#f53034'>Error</span>",desc:"    "}]},{title:"[]",list:["           .","       ."]}]},linkServers:{mainStyle:"width:350px;",title:"Server Information",desc:"       . ()",category:[{title:"[]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"  "},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"     Pinpoint agentId."}]},{title:"[]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",
desc:"Pinpoint  WAS   ."},{name:"<button type='button' class='btn btn-default btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"       ."},{name:"<button type='button' class='btn btn-danger btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"    ."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"   ",category:[{title:"[]",items:[{name:"",desc:"Response Summary"},{name:"",desc:"  "}]}]},searchAndOrder:{mainStyle:"",title:" ",desc:"  Count  .",category:[{title:"[]",items:[{name:"Name",desc:" /  ."},{name:"Count",desc:" /  ."}]}]}},inspector:{noDataCollected:"No data collected",list:{mainStyle:"",title:"Agent ",desc:" Appliation Name  agent .",category:[{title:"[]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Agent    "},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:" agent agent-id"},{name:"<span class='glyphicon glyphicon-ok-sign' style='color:#40E340'></span>",desc:"  agent  "},{name:"<span class='glyphicon glyphicon-minus-sign' style='color:#F00'></span>",desc:"Shutdown  agent  "},{name:"<span class='glyphicon glyphicon-remove-sign' style='color:#AAA'></span>",desc:"  agent  "},{name:"<span class='glyphicon glyphicon-question-sign' style='color:#AAA'></span>",desc:"   agent  "}]}]},heap:{mainStyle:"",title:"Heap",desc:"JVM heap  full garbage collection  ",category:[{title:"[]",items:[{name:"Max",desc:" heap "},{name:"Used",desc:"   heap "},{name:"FGC",desc:"Full garbage collection   (2   ,     )"}]}]},permGen:{mainStyle:"",title:"Non-Heap",desc:"JVM non-heap  full garbage collection  ",category:[{title:"[]",items:[{name:"Max",desc:" non-heap "},{name:"Used",desc:"   non-heap "},{name:"FGC",desc:"Full garbage collection   (2   ,     )"}]}]},cpuUsage:{mainStyle:"",title:"Cpu Usage",desc:"JVM  CPU  -  CPU ,    .",category:[{title:"[]",items:[{name:"Java 1.6",desc:"JVM CPU  ."},{name:"Java 1.7+",desc:"JVM   CPU   ."}]}]},tps:{mainStyle:"",title:"TPS",desc:"    ",category:[{title:"[]",items:[{name:"Sampled New (S.N)",desc:" agent   "},{name:"Sampled Continuation (S.C)",desc:" agent   "},{name:"Unsampled New (U.N)",desc:" agent    "},{name:"Unsampled Continuation (U.C)",desc:" agent    "},{name:"Total",desc:" "}]}]},activeThread:{mainStyle:"",title:"Active Thread",desc:" request  agent active thread  .",category:[{title:"[]",items:[{name:"Fast (1s)",desc:"  1  thread "},{name:"Normal (3s)",desc:"  1 , 3  thread "},{name:"Slow (5s)",desc:"  3 , 5  thread "},{name:"Very Slow (slow)",desc:"  5   thread "}]}]},dataSource:{mainStyle:"",title:"Data Source",desc:" DataSource  .",category:[{title:"[]",items:[{name:"Active Avg",desc:" Connection  "},{name:"Active Max",desc:" Connection  "},{name:"Total Max",desc:"  Connection  "},{name:"Type",desc:"DB Connection Pool "}]}]},responseTime:{mainStyle:"",title:"Response time",desc:" Response Time  .",category:[{title:"[]",items:[{name:"Avg",desc:" Response Time ( millisecond)"}]}]},openFileDescriptor:{mainStyle:"",title:"File Descriptor",desc:" File Descriptor  .",category:[{title:"[]",items:[{name:"Open File Descriptor",desc:"  File Descriptor "}]}]},directBufferCount:{mainStyle:"",title:"Direct Buffer",desc:" Direct Buffer  .",category:[{title:"[]",items:[{name:"Direct Buffer Count",desc:" Direct Buffer  "}]}]},directBufferMemory:{mainStyle:"",title:"Direct Buffer Memory",desc:" Direct Buffer Memory  .",category:[{title:"[]",items:[{name:"Direct Buffer Memory Used",desc:" Direct Buffer   "}]}]},mappedBufferCount:{mainStyle:"",title:"Mapped Buffer",desc:" Mapped Buffer  .",category:[{title:"[]",items:[{name:"Mapped Buffer Count",desc:" Mapped Buffer  "}]}]},mappedBufferMemory:{mainStyle:"",title:"Mapped Buffer Memory",desc:" Mapped Buffer Memory  .",category:[{title:"[]",items:[{name:"Mapped Buffer Memory Used",desc:" Mapped Buffer   "}]}]},wrongApp:["<div style='font-size:12px'> agent {{application1}}  {{application2}}  .<br>","   .<hr>","1.  agent {{application1}} {{application2}}  <br>","2.{{agentId}} agent {{application2}}   <hr>","1  {{application1}} {{agentId}}    <br>","2     agent id  .</div>"].join(""),statHeap:{mainStyle:"",title:"Heap",desc:"Agent  JVM Heap  ",category:[{title:"[]",items:[{name:"MAX",desc:"Agent    Heap    "},{name:"AVG",desc:"Agent  Heap "},{name:"MIN",desc:"Agent  Heap    "}]}]},statPermGen:{mainStyle:"",title:"Non-Heap",desc:"Agent  JVM non-heap  ",category:[{title:"[]",items:[{name:"MAX",desc:"Agent  non-heap    "},{name:"AVG",desc:"Agent  non-heap "},{name:"MIN",desc:"Agent  non-heap    "}]}]},statJVMCpu:{mainStyle:"",title:"JVM Cpu Usage",desc:"Agent  JVM cpu  -  CPU ,    .",category:[{title:"[]",items:[{name:"MAX",desc:"Agent  JVM cpu     "},{name:"AVG",desc:"Agent  JVM cpu  "},{name:"MIN",desc:"Agent  JVM cpu     "}]}]},statSystemCpu:{mainStyle:"",title:"System Cpu Usage",desc:"Agent   cpu  -  CPU ,    .",category:[{title:"[]",items:[{name:"MAX",desc:"Agent   cpu     "},{name:"AVG",desc:"Agent   cpu  "},{name:"MIN",desc:"Agent   cpu     "}]},{title:"[]",items:[{name:"Java 1.6",desc:" CPU   ."},{name:"Java 1.7+",desc:"Java1.7+  CPU  ."}]}]},statTPS:{mainStyle:"",title:"TPS",desc:"Agent    ",category:[{title:"[]",items:[{name:"MAX",desc:"Agent      "},{name:"AVG",desc:"Agent   "},{name:"MIN",desc:"Agent      "}]}]},statActiveThread:{mainStyle:"",title:"Active Thread",desc:" request  active thread ",category:[{title:"[]",items:[{name:"MAX",desc:"Agent active thread     "},{name:"AVG",desc:"Agent active thread  "},{name:"MIN",desc:"Agent active thread     "}]}]},statResponseTime:{mainStyle:"",title:"Response Time",desc:"Agent  Response Time(: millisecond)",category:[{title:"[]",items:[{name:"MAX",desc:"agent  Response Time    "},{name:"AVG",desc:"agent  Response Time "},{name:"MIN",desc:"agent  Response Time    "}]}]},statDataSource:{mainStyle:"",title:"Data Source",desc:"Agent DataSource ",category:[{title:"[]",items:[{name:"MAX",desc:"agent DataSource connection     "},{name:"AVG",desc:"agent DataSource connection  "},{name:"MIN",desc:"agent DataSource connection     "}]}]},statOpenFileDescriptor:{mainStyle:"",title:"File Descriptor",desc:" File Descriptor ",category:[{title:"[]",items:[{name:"MAX",desc:"Agent    File Descriptor     "},{name:"AVG",desc:"Agent    File Descriptor   "},{name:"MIN",desc:"Agent    File Descriptor     "}]}]},statDirectBufferCount:{mainStyle:"",title:"Direct Buffer",desc:"Agent Direct Buffer ",category:[{title:"[]",items:[{name:"MAX",desc:"Agent    Direct Buffer     "},{name:"AVG",desc:"Agent    Direct Buffer   "},{name:"MIN",desc:"Agent    Direct Buffer     "}]}]},statDirectBufferMemory:{mainStyle:"",title:"Direct Buffer Memory",desc:"Agent Direct Buffer Memory  ",category:[{title:"[]",items:[{name:"MAX",desc:"Agent    Direct Buffer Memory    "},{name:"AVG",desc:"Agent    Direct Buffer Memory   "},{name:"MIN",desc:"Agent    Direct Buffer Memory    "}]}]},statMappedBufferCount:{mainStyle:"",title:"Mapped Buffer",desc:"Agent Mapped Buffer ",category:[{title:"[]",items:[{name:"MAX",desc:"Agent    Mapped Buffer     "},{name:"AVG",desc:"Agent    Mapped Buffer   "},{name:"MIN",desc:"Agent    Mapped Buffer     "}]}]},statMappedBufferMemory:{mainStyle:"",title:"Mapped Buffer Memory",desc:"Agent Mapped Buffer Memory  ",category:[{title:"[]",items:[{name:"MAX",desc:"Agent    Mapped Buffer Memory    "},{name:"AVG",desc:"Agent    Mapped Buffer Memory   "},{name:"MIN",desc:"Agent    Mapped Buffer Memory    "}]}]}},callTree:{column:{mainStyle:"",title:"Call Tree",desc:"Call Tree  .",category:[{title:"[]",items:[{name:"Gap",desc:"         "},{name:"Exec",desc:"   "},{name:"Exec(%)",desc:"<img src='images/help/callTree_01.png'/>"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#5bc0de'> </span><br/>     exec  "},{name:"",desc:"<span style='background-color:#FFFFFF;color:#4343C8'> </span><br/>self  "},{name:"Self",desc:"          "}]}]}},transactionTable:{log:{}},transactionList:{openError:{noParent:"  scatter chart     transaction    .",noData:"  {{application}} scatter chart  ."}},applicationInspectorGuideMessage:"Application Inspector     .<br>Application Inspector   <a href='https://github.com/naver/pinpoint/blob/master/doc/application-inspector.md' target='blank'> <span class='glyphicon glyphicon-new-window'></span></a> ."};pinpointApp.constant("helpContent-ko",a)}(),function(){"use strict";var a=['<div class="pinpoint-tooltip" style="{{mainStyle}}">',"<dl>","<dt>{{{title}}}</dt>","<dd>{{{desc}}}</dd>","</dl>","{{#if category}}<hr/>{{/if}}","{{#each category}}","<p>{{title}}</p>",'{{#if image}}<p style="text-align:center">{{{image}}}</p>{{/if}}',"{{#if items}}","<table>","{{#each items}}","<tr>",'<td style="{{nameStyle}}">{{{name}}}</td>','<td style="{{descStyle}}">{{{desc}}}</td>',"</tr>","{{/each}}","</table>","{{/if}}","{{#if list}}","<ul>","{{#each list}}","<li>{{{this}}}</li>","{{/each}}","</ul>","{{/if}}","{{/each}}","</div>"].join(""),b=Handlebars.compile(a);pinpointApp.constant("helpContentTemplate",b)}(),function(){"use strict";pinpointApp.factory("helpContentService",["$window","$injector","UserLocalesService",function(a,b,c){var d="helpContent-"+c.userLocale,e="helpContent-"+c.defaultLocale;return b.has(d)?b.get(d):b.get(e)}])}(),function(a){"use strict";pinpointApp.service("AnalyticsService",["SystemConfigurationService",function(a){this.send=function(b,c,d,e,f){"undefined"!=typeof ga&&a.getConfig().then(function(a){a.sendUsage===!0&&(1==arguments.length?ga("send","pageview",arguments[0]):ga("send","event",b,c,d,e,f))})},this.sendMain=function(a,b,c,d){this.send(this.CONST.MAIN,a,b,c,d)},this.CONST={},this.CONST.MAIN="Main",this.CONST.CONTEXT="Context",this.CONST.CALLSTACK="CallStack",this.CONST.MIXEDVIEW="MixedView",this.CONST.INSPECTOR="Inspector",this.CONST.REALTIME="RealTime",this.CONST.VERSION="Version",this.CONST.CLK_APPLICATION="ClickApplication",this.CONST.CLK_TIME="ClickTime",this.CONST.CLK_SEARCH_NODE="ClickSearchNode",this.CONST.CLK_CLEAR_SEARCH="ClickClearSearch",this.CONST.CLK_NODE="ClickNode",this.CONST.CLK_LINK="ClickLink",this.CONST.CLK_NODE_IN_GROUPED_VIEW="ClickNodeInGroupedView",this.CONST.CLK_LINK_IN_GROUPED_VIEW="ClickLinkInGroupedView",this.CONST.CLK_SHOW_GROUPED_NODE_VIEW="ClickShowGroupedNodeView",this.CONST.CLK_SHOW_GROUPED_LINK_VIEW="ClickShowGroupedLinkView",this.CONST.CLK_UPDATE_TIME="ClickUpdateTime",this.CONST.CLK_HELP="ClickHelp",this.CONST.CLK_SCATTER_SETTING="ClickScatterSetting",this.CONST.CLK_DOWNLOAD_SCATTER="ClickDownloadScatter",this.CONST.CLK_RESPONSE_GRAPH="ClickResponseGraph",this.CONST.CLK_LOAD_GRAPH="ClickLoadGraph",this.CONST.CLK_SHOW_GRAPH="ClickShowGraph",this.CONST.CLK_SHOW_SERVER_LIST="ClickShowServerList",this.CONST.CLK_OPEN_INSPECTOR="ClickOpenInspector",this.CONST.CLK_FILTER_TRANSACTION="ClickFilterTransaction",this.CONST.CLK_FILTER_TRANSACTION_WIZARD="ClickFilterTransactionWizard",this.CONST.CLK_MORE="ClickMore",this.CONST.CLK_DISTRIBUTED_CALL_FLOW="ClickDistributedCallFlow",this.CONST.CLK_SERVER_MAP="ClickServerMap",this.CONST.CLK_RPC_TIMELINE="ClickRPCTimeline",this.CONST.CLK_CALL="ClickCall",this.CONST.CLK_TRANSACTION="ClickTransaction",this.CONST.CLK_HEAP="ClickHeap",this.CONST.CLK_PERM_GEN="ClickPermGen",this.CONST.CLK_CPU_LOAD="ClickCpuLoad",this.CONST.CLK_REFRESH="ClickRefresh",this.CONST.CLK_CALLEE_RANGE="ClickCalleeRange",this.CONST.CLK_CALLER_RANGE="ClickCallerRange",this.CONST.CLK_REALTIME_CHART_HIDE="ClickRealtimeChartHide",this.CONST.CLK_REALTIME_CHART_SHOW="ClickRealtimeChartShow",this.CONST.CLK_REALTIME_CHART_PIN_ON="ClickRealtimeChartPinOn",this.CONST.CLK_REALTIME_CHART_PIN_OFF="ClickRealtimeChartPinOff",this.CONST.CLK_SHOW_SERVER_TYPE_DETAIL="ClickShowServerTypeDetail",this.CONST.CLK_CHANGE_AGENT_INSPECTOR="ClickChangeAgentInspector",this.CONST.CLK_CHANGE_AGENT_MAIN="ClickChangeAgentMain",this.CONST.CLK_START_REALTIME="ClickStartRealtime",this.CONST.CLK_OPEN_THREAD_DUMP_LAYER="ClickOpenThreadDumpLayer",this.CONST.CLK_CONFIGURATION="ClickConfiguration",this.CONST.CLK_GENERAL="ClickConfigurationGeneral",this.CONST.CLK_ALARM="ClickConfigurationAlarm",this.CONST.CLK_HELP="ClickConfigurationHelp",this.CONST.CLK_GENERAL_SET_DEPTH="ClickGeneralSetDepth",this.CONST.CLK_GENERAL_SET_PERIOD="ClickGeneralSetPeriod",this.CONST.CLK_GENERAL_SET_FAVORITE="ClickGeneralSetFavorite",this.CONST.CLK_GENERAL_SET_TIMEZONE="ClickGeneralSetTimezone",this.CONST.CLK_ALARM_CREATE_USER_GROUP="ClickAlarmCreateUserGroup",this.CONST.CLK_ALARM_REFRESH_USER_GROUP="ClickAlarmRefreshUserGroup",this.CONST.CLK_ALARM_FILTER_USER_GROUP="ClickAlarmFilterUserGroup",this.CONST.CLK_ALARM_ADD_USER="ClickAlarmAddUser",this.CONST.CLK_ALARM_REFRESH_USER="ClickAlarmRefreshUser",this.CONST.CLK_ALARM_FILTER_USER="ClickAlarmFilterUser",this.CONST.CLK_ALARM_CREATE_PINPOINT_USER="ClickAlarmCreatePinpointUser",this.CONST.CLK_ALARM_REFRESH_PINPOINT_USER="ClickAlarmRefreshPinpointUser",this.CONST.CLK_ALARM_FILTER_PINPOINT_USER="ClickAlarmFilterPinpointUser",this.CONST.CLK_ALARM_CREATE_RULE="ClickAlarmCreateUserGroup",this.CONST.CLK_ALARM_REFRESH_RULE="ClickAlarmRefreshUserGroup",this.CONST.CLK_ALARM_FILTER_RULE="ClickAlarmFilterUserGroup",this.CONST.TG_DATE="ToggleDate",this.CONST.TG_UPDATE_ON="ToggleUpdateOn",this.CONST.TG_UPDATE_OFF="ToggleUpdateOff",this.CONST.TG_NODE_VIEW="ToggleNodeView",this.CONST.TG_SCATTER_SUCCESS="ToggleScatterSuccess",this.CONST.TG_SCATTER_FAILED="ToggleScatterFailed",this.CONST.TG_MERGE_TYPE="ToggleMergeType",this.CONST.TG_CALL_COUNT="ToggleCallCount",this.CONST.TG_TPS="ToggleTPS",this.CONST.TG_ROUTING="ToggleRouting",this.CONST.TG_CURVE="ToggleCurve",this.CONST.TG_REALTIME_CHART_RESIZE="ToggleRealtimeChartResize",this.CONST.ST_="Sort",this.CONST.ASCENDING="ascending",this.CONST.DESCENDING="descending",this.CONST.ON="on",this.CONST.OFF="off",this.CONST.MAIN_PAGE="/main.page",this.CONST.FILTEREDMAP_PAGE="/filteredMap.page",this.CONST.INSPECTOR_PAGE="/inspector.page",this.CONST.SCATTER_FULL_SCREEN_PAGE="/scatterFullScreen.page",this.CONST.TRANSACTION_DETAIL_PAGE="/transactionDetail.page",this.CONST.TRANSACTION_LIST_PAGE="/transactionList.page",this.CONST.TRANSACTION_VIEW_PAGE="/transactionView.page"}])}(jQuery),function(){"use strict";pinpointApp.constant("RealtimeWebsocketServiceConfig",{wsUrl:"agent/activeThread.pinpointws",wsTimeout:1e4,retryTimeout:3e3,maxRetryCount:1}),pinpointApp.service("RealtimeWebsocketService",["RealtimeWebsocketServiceConfig",function(a){function b(){i=new WebSocket((location.protocol.indexOf("https")===-1?"ws://":"wss://")+location.host+location.pathname+a.wsUrl),i.onopen=function(a){j=!0,g=h=Date.now(),c(),f.onopen(a)},i.onmessage=function(a){h=Date.now(),f.onmessage(JSON.parse(a.data))},i.onclose=function(a){j=!1,i=null,d(),f.onclose(a),e()}}function c(){k=setInterval(function(){null!==h&&(Date.now()-h<a.wsTimeout||f.ondelay())},1e3)}function d(){clearInterval(k)}function e(){null!==g&&g===h&&Date.now()-g<a.retryTimeout&&l<a.maxRetryCount&&(l++,f.retry())}var f,g=null,h=null,i=null,j=!1,k=null,l=0,m=30;this.open=function(a){return i=null,f=a,!!angular.isDefined(WebSocket)&&(b(),!0)},this.isOpened=function(){return null!==i},this.close=function(){null!==i&&i.close(),i=null},this.send=function(a){null!==i&&i.send(a)},this.stopReceive=function(a){null!==i&&j&&i.send(a),d()},this.getPagingSize=function(){return m}}])}(),function(a){"use strict";pinpointApp.constant("PreferenceServiceConfig",{cst:{periodType:{RANGE:"range",LAST:"last",REALTIME:"realtime"},inspectorPeriodTime:["5m","20m","1h","3h","6h","12h","1d","2d","7d"],periodTime:["5m","20m","1h","3h","6h","12h","1d","2d"],depthList:[1,2,3,4],maxPeriod:2,inspectorMaxPeriod:7,realtimeScatterPeriod:3e5,responseType:["1s","3s","5s","Slow","Error"],responseTypeColor:["#2ca02c","#3c81fa","#f8c731","#f69124","#f53034"],agentAllStr:"All",updateTimes:[{time:10,label:"10 seconds"},{time:20,label:"20 seconds"},{time:30,label:"30 seconds"},{time:60,label:"1 minute"}],iconPath:"images/icons/"}}),pinpointApp.service("PreferenceService",["PreferenceServiceConfig","$route","webStorage","UserConfigurationService",function(b,c,d,e){function f(){return c.current.loadedTemplateUrl.indexOf("/inspector")!==-1}this.getDepthList=function(){return b.cst.depthList},this.getPeriodTime=function(){return f()?b.cst.inspectorPeriodTime:b.cst.periodTime},this.getPeriodType=function(){return b.cst.periodType},this.getMaxPeriod=function(){return f()?b.cst.inspectorMaxPeriod:b.cst.maxPeriod},this.getRealtimeScatterXRange=function(){return b.cst.realtimeScatterPeriod},this.getRealtimeScatterXRangeStr=function(){return b.cst.realtimeScatterPeriod/1e3/60+"m"},this.getResponseTypeColor=function(){return b.cst.responseTypeColor},this.getAgentAllStr=function(){return b.cst.agentAllStr},this.getUpdateTimes=function(){return b.cst.updateTimes},this.getResponseTypeFormat=function(){var c={};return a.each(b.cst.responseType,function(a,b){c[b]=0}),c},this.getCalleeByApp=function(a){return angular.isUndefined(a)?e.getCallee():d.get(a+"+callee")||e.getCallee()},this.getCallerByApp=function(a){return angular.isUndefined(a)?e.getCaller():d.get(a+"+caller")||e.getCaller()},this.getBidirectionalByApp=function(a){return angular.isUndefined(a)?e.getBidirectional():d.get(a+"+bidirectional")||e.getBidirectional()},this.getWasOnlyByApp=function(a){return angular.isUndefined(a)?e.getWasOnly():d.get(a+"+wasOnly")||e.getWasOnly()},this.setDepthByApp=function(a,b){angular.isUndefined(a)||null===a||angular.isUndefined(b)||null===b||d.add(a,b)},this.getIconPath=function(){return b.cst.iconPath}}])}(jQuery),function(){"use strict";pinpointApp.constant("CommonAjaxServiceConfig",{serverTimeUrl:"serverTime.pinpoint",applicationListUrl:"applications.pinpoint"}),pinpointApp.service("CommonAjaxService",["CommonAjaxServiceConfig","$http",function(a,b){this.getSQLBind=function(a,b,c){jQuery.ajax({type:"POST",url:a,data:b,cache:!1,dataType:"json",success:function(a){angular.isFunction(c)&&c(a)},error:function(a,b,d){angular.isFunction(c)&&c(d)}})},this.getServerTime=function(c){b.get(a.serverTimeUrl).success(function(a){c(a.currentServerTime)}).error(function(){c(Date.now())})};var c=null;this.getApplicationList=function(d,e){null===c?b.get(a.applicationListUrl).success(function(a){c=a,d(a)}).error(function(){e()}):d(c)}}])}(),function(a){"use strict";pinpointApp.constant("AgentAjaxServiceConfig",{agentList:"getAgentList.pinpoint",agentInfo:"getAgentInfo.pinpoint",agentEvent:"getAgentEvent.pinpoint",agentEventList:"getAgentEvents.pinpoint",agentTimeline:"getAgentStatusTimeline.pinpoint",jvmChart:"getAgentStat/jvmGc/chart.pinpoint",cpuLoadChart:"getAgentStat/cpuLoad/chart.pinpoint",tpsChart:"getAgentStat/transaction/chart.pinpoint",activeTraceChart:"getAgentStat/activeTrace/chart.pinpoint",dataSourceChart:"getAgentStat/dataSource/chartList.pinpoint",openFileDescriptor:"getAgentStat/fileDescriptor/chart.pinpoint",directBuffer:"getAgentStat/directBuffer/chart.pinpoint",responseTimeChart:"getAgentStat/responseTime/chart.pinpoint",statMemory:"getApplicationStat/memory/chart.pinpoint",statCpuLoad:"getApplicationStat/cpuLoad/chart.pinpoint",statTPS:"getApplicationStat/transaction/chart.pinpoint",statActiveThread:"getApplicationStat/activeTrace/chart.pinpoint",statResponseTime:"getApplicationStat/responseTime/chart.pinpoint",statDataSource:"getApplicationStat/dataSource/chart.pinpoint",statOpenFileDescriptor:"getApplicationStat/fileDescriptor/chart.pinpoint",statDirectBuffer:"getApplicationStat/directBuffer/chart.pinpoint"}),pinpointApp.service("AgentAjaxService",["AgentAjaxServiceConfig","$http",function(a,b){function c(a,c,e){b.get(a+d(c)).then(function(a){e(a.data)},function(a){e(a)})}function d(a){var b="?";for(var c in a)b+=("?"==b?"":"&")+c+"="+a[c];return b}this.getAgentList=function(b,d){c(a.agentList,b,d)},this.getJVMChartData=function(b,d){c(a.jvmChart,b,d)},this.getCpuLoadChartData=function(b,d){c(a.cpuLoadChart,b,d)},this.getTPSChartData=function(b,d){c(a.tpsChart,b,d)},this.getActiveTraceChartData=function(b,d){c(a.activeTraceChart,b,d)},this.getResponseTimeChartData=function(b,d){c(a.responseTimeChart,b,d)},this.getDataSourceChartData=function(b,d){c(a.dataSourceChart,b,d)},this.getOpenFileDescriptorChartData=function(b,d){c(a.openFileDescriptor,b,d)},this.getDirectBufferChartData=function(b,d){c(a.directBuffer,b,d)},this.getAgentInfo=function(b,d){c(a.agentInfo,b,d)},this.getEventList=function(b,d){b.exclude="10199",c(a.agentEventList,b,d)},this.getAgentTimeline=function(b,d){b.exclude="10199",c(a.agentTimeline,b,d)},this.getEvent=function(b,d){c(a.agentEvent,b,d)},this.getStatMemory=function(b,d){c(a.statMemory,b,d)},this.getStatCpuLoad=function(b,d){c(a.statCpuLoad,b,d)},this.getStatTPS=function(b,d){c(a.statTPS,b,d)},this.getStatActiveThread=function(b,d){c(a.statActiveThread,b,d)},this.getStatResponseTime=function(b,d){c(a.statResponseTime,b,d)},this.getStatDataSource=function(b,d){c(a.statDataSource,b,d)},this.getStatOpenFileDescriptor=function(b,d){c(a.statOpenFileDescriptor,b,d)},this.getStatDirectBuffer=function(b,d){c(a.statDirectBuffer,b,d)}}])}(jQuery),function(a){"use strict";pinpointApp.constant("TooltipServiceConfig",{serverMap:{position:"bottom-right",trigger:"click"},scatter:{position:"bottom",trigger:"click"},navbar:{position:"bottom",trigger:"click"},agentList:{position:"bottom",trigger:"click"},heap:{position:"top",trigger:"click"},permGen:{position:"top",trigger:"click"},cpuUsage:{position:"top",trigger:"click"},tps:{position:"top",trigger:"click"},activeThread:{position:"top",trigger:"click"},dataSource:{position:"top",trigger:"click"},responseTime:{position:"top",trigger:"click"},openFileDescriptor:{position:"top",trigger:"click"},directBufferCount:{position:"top",trigger:"click"},directBufferMemory:{position:"top",trigger:"click"},mappedBufferCount:{position:"top",trigger:"click"},mappedBufferMemory:{position:"top",trigger:"click"},responseSummaryChart:{position:"top",trigger:"click"},loadChart:{position:"top",trigger:"click"},serverList:{position:"bottom",trigger:"click"},callTree:{position:"bottom",trigger:"click"},realtime:{position:"top",trigger:"click"},alarmRules:{position:"top",trigger:"click"},statHeap:{position:"top",trigger:"click"},statPermGen:{position:"top",trigger:"click"},statJVMCpu:{position:"top",trigger:"click"},statSystemCpu:{position:"top",trigger:"click"},statTPS:{position:"top",trigger:"click"},statActiveThread:{position:"top",trigger:"click"},statResponseTime:{position:"top",trigger:"click"},statDataSource:{position:"top",trigger:"click"},statOpenFileDescriptor:{position:"top",trigger:"click"},statDirectBufferCount:{position:"top",trigger:"click"},statDirectBufferMemory:{position:"top",trigger:"click"},statMappedBufferCount:{position:"top",trigger:"click"},statMappedBufferMemory:{position:"top",trigger:"click"}}),pinpointApp.service("TooltipService",["TooltipServiceConfig","helpContentTemplate","helpContentService",function(b,c,d){function e(a){switch(a){case"serverMap":return function(){return c(d.servermap["default"])};case"scatter":return function(){return c(d.scatter["default"])};case"navbar":return function(){return c(d.navbar.applicationSelector)+c(d.navbar.depth)+c(d.navbar.bidirectional)+c(d.navbar.periodSelector)};case"agentList":return function(){return c(d.inspector.list)};case"heap":return function(){return c(d.inspector.heap)};case"permGen":return function(){return c(d.inspector.permGen)};case"cpuUsage":return function(){return c(d.inspector.cpuUsage)};case"tps":return function(){return c(d.inspector.tps)};case"activeThread":return function(){return c(d.inspector.activeThread)};case"dataSource":return function(){return c(d.inspector.dataSource)};case"responseTime":return function(){return c(d.inspector.responseTime)};case"openFileDescriptor":return function(){return c(d.inspector.openFileDescriptor)};case"directBufferCount":return function(){return c(d.inspector.directBufferCount)};case"directBufferMemory":return function(){return c(d.inspector.directBufferMemory)};case"mappedBufferCount":return function(){return c(d.inspector.mappedBufferCount)};case"mappedBufferMemory":return function(){return c(d.inspector.mappedBufferMemory)};case"responseSummaryChart":return function(){return c(d.nodeInfoDetails.responseSummary)};case"loadChart":return function(){return c(d.nodeInfoDetails.load)};case"serverList":return function(){return c(d.nodeInfoDetails.nodeServers)};case"callTree":return function(){return c(d.callTree.column)};case"realtime":return function(){return c(d.realtime["default"])};case"alarmRules":return function(){return c(d.configuration.alarmRules)};case"statHeap":return function(){return c(d.inspector.statHeap)};case"statPermGen":return function(){return c(d.inspector.statPermGen)};case"statJVMCpu":return function(){return c(d.inspector.statJVMCpu)};case"statSystemCpu":return function(){return c(d.inspector.statSystemCpu)};case"statTPS":return function(){return c(d.inspector.statTPS)};case"statActiveThread":return function(){return c(d.inspector.statActiveThread)};case"statResponseTime":return function(){return c(d.inspector.statResponseTime)};case"statDataSource":return function(){return c(d.inspector.statDataSource)};case"statOpenFileDescriptor":return function(){return c(d.inspector.statOpenFileDescriptor)};case"statDirectBufferCount":return function(){return c(d.inspector.statDirectBufferCount)};case"statDirectBufferMemory":return function(){return c(d.inspector.statDirectBufferMemory)};case"statMappedBufferCount":return function(){return c(d.inspector.statMappedBufferCount)};case"statMappedBufferMemory":return function(){return c(d.inspector.statMappedBufferMemory)}}}this.init=function(c){a("."+c+"Tooltip").tooltipster({content:e(c),position:b[c].position,trigger:b[c].trigger})}}])}(jQuery),function(){"use strict";pinpointApp.service("CommonUtilService",[function(){var a="YYYY-MM-DD-HH-mm-ss";this.getRandomNum=function(){return Math.round(1e4*Math.random())},this.formatDate=function(b,c){return moment(new Date(b)).format(c||a)},this.getMilliSecond=function(b){return moment(b,a).valueOf()},this.isEmpty=function(a){return angular.isUndefined(a)||null===a||""===a},this.random=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},this.addComma=function(a){return(a+"").replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")}}])}(),function(){"use strict";pinpointApp.constant("LocalStorageManagerServiceConfig",{THREAD_DUMP_LAYER_OPEN_TYPE:"thread-dump-layer-open-type",REAL_TIME_LAYER_HEIGHT:"real-time-layer-height"}),pinpointApp.service("LocalStorageManagerService",["LocalStorageManagerServiceConfig","webStorage",function(a,b){this.getThreadDumpLayerOpenType=function(){return b.get(a.THREAD_DUMP_LAYER_OPEN_TYPE)},this.setRealtimeLayerHeight=function(c){b.add(a.REAL_TIME_LAYER_HEIGHT,c)},this.getRealtimeLayerHeight=function(){return b.get(a.REAL_TIME_LAYER_HEIGHT)}}])}(),function(a){"use strict";pinpointApp.constant("SystemConfigurationServiceConfig",{URL:"configuration.pinpoint"}),pinpointApp.service("SystemConfigurationService",["SystemConfigurationServiceConfig","$http",function(a,b){this.getConfig=function(){return b.get(a.URL).then(function(a){return a.data.showApplicationStat!==!0&&(a.data.showApplicationStat=!1),a.data})}}])}(jQuery),function(a){"use strict";pinpointApp.constant("UserConfigurationServiceConfig",{URL:"userConfiguration.pinpoint",FAVORITE_LIST_LOCAL_KEY:"preference.favorite",MAX_FAVORITE:5e3,TIME_ZONE_LOCAL_KEY:"pinpoint-timezone",PERIOD_LOCAL_KEY:"period",PERIOD_DEFAULT:"5m",CALLER_LOCAL_KEY:"caller",CALLER_DEFAULT:1,CALLEE_LOCAL_KEY:"callee",CALLEE_DEFAULT:1,BIDIRECTIONAL_LOCAL_KEY:"bidirectional",BIDIRECTIONAL_DEFAULT:!1,WAS_ONLY_LOCAL_KEY:"wasOnly",WAS_ONLY_DEFAULT:!1}),pinpointApp.service("UserConfigurationService",["UserConfigurationServiceConfig","$http","webStorage",function(a,b,c){function d(a,b){var c={include:!1,index:-1};if(1===arguments.length){var d=a.split("@");c.name=d[0],c.type=d[1]}else c.name=a,c.type=b;for(var e=0;e<f.length;e++)if(f[e].applicationName===c.name&&f[e].serviceType===c.type){c.included=!0,c.index=e;break}return c}function e(b){c.add(a.FAVORITE_LIST_LOCAL_KEY,JSON.stringify(f)),b()}var f=[];this.addFavorite=function(b,c,g){var h=d(b);f.length>=a.MAX_FAVORITE||h.include||(f.push({applicationName:h.name,serviceType:h.type,code:c||0}),e(g))},this.removeFavorite=function(a,b,c){var g=d(a,b);g.include||(f.splice(g.index,1),e(c))},this.getFavoriteList=function(a){a(f)},this.getPeriod=function(){return c.get(a.PERIOD_LOCAL_KEY)||a.PERIOD_DEFAULT},this.setPeriod=function(b){c.add(a.PERIOD_LOCAL_KEY,b)},this.getCaller=function(){return c.get(a.CALLER_LOCAL_KEY)||a.CALLER_DEFAULT},this.setCaller=function(b){c.add(a.CALLER_LOCAL_KEY,b)},this.getCallee=function(){return c.get(a.CALLEE_LOCAL_KEY)||a.CALLEE_DEFAULT},this.setCallee=function(b){c.add(a.CALLEE_LOCAL_KEY,b)},this.getBidirectional=function(){return c.get(a.BIDIRECTIONAL_LOCAL_KEY)||a.BIDIRECTIONAL_DEFAULT},this.setBidirectional=function(b){c.add(a.BIDIRECTIONAL_LOCAL_KEY,b)},this.getWasOnly=function(){return c.get(a.WAS_ONLY_LOCAL_KEY)||a.WAS_ONLY_DEFAULT},this.setWasOnly=function(b){c.add(a.WAS_ONLY_LOCAL_KEY,b)},this.getTimezone=function(){return c.get(a.TIME_ZONE_LOCAL_KEY)||moment.tz.guess()},this.setTimezone=function(b){c.add(a.TIME_ZONE_LOCAL_KEY,b)};try{var g=JSON.parse(c.get(a.FAVORITE_LIST_LOCAL_KEY)||"[]");if(g.length>0&&"string"==typeof g[0]){for(var h=0;h<g.length;h++){var i=g[h].split("@");f.push({applicationName:i[0],serviceType:i[1],code:0})}e(function(){})}else f=g}catch(j){f=[],console.log(j)}}])}(jQuery),function(a){"use strict";pinpointApp.constant("applicationListDirectiveConfig",{ID:"APPLICATION_LIST_DRTV_",AT:"@"}),pinpointApp.directive("applicationListDirective",["applicationListDirectiveConfig","$rootScope","$http","$timeout","AnalyticsService","PreferenceService","UserConfigurationService","CommonAjaxService","CommonUtilService",function(b,c,d,e,f,g,h,i,j){return{restrict:"EA",replace:!0,templateUrl:"features/applicationList/applicationList.html?v="+G_BUILD_TIME,scope:{initAppName:"@"},link:function(c,d,k){function l(){c.applicationList=[{text:"Loading...",value:""}],c.selectedApplication="",c.disableApplication=!0,c.hideFakeApplication=!1,t===!1&&s.find("optgroup[label=Favorite]").remove(),m(),o()}function m(){v.select2({allowClear:!1,placeholder:"Select an application",searchInputPlaceholder:"Input your application name",templateResult:q,templateSelection:q,escapeMarkup:function(a){
return a}}).on("select2:select",function(){n(v.val(),a(v.select2("data")[0].element).attr("data-code"))})}function n(a,d){f.sendMain(f.CONST.CLK_APPLICATION),c.selectedApplication=a,c.$emit("up.changed.application",b.ID,c.selectedApplication,d)}function o(){i.getApplicationList(function(a){angular.isArray(a)===!1||0===a.length?c.applicationList[0].text="Application not found.":(c.disableApplication=!1,r=a,p(),e(function(){k.initAppName?(v.val(k.initAppName).trigger("change"),c.selectedApplication=k.initAppName):u&&v.select2("open")})),c.hideFakeApplication=!0},function(){c.applicationList[0].text="Application error.",c.hideFakeApplication=!0})}function p(){c.applicationList=[{text:"",value:""}];var a=[];t?h.getFavoriteList(function(d){c.favoriteCount=d.length;var e=[];angular.forEach(r,function(c){for(var f=!1,g=0;g<d.length;g++)if(d[g].applicationName===c.applicationName&&d[g].serviceType===c.serviceType){f=!0;break}var h={text:c.applicationName+b.AT+c.serviceType,value:c.applicationName+b.AT+c.code,code:c.code};f?e.push(h):a.push(h)}),c.applicationList=e.concat(a)}):(c.favoriteCount=0,angular.forEach(r,function(c){a.push({text:c.applicationName+b.AT+c.serviceType,value:c.applicationName+b.AT+c.code,code:c.code})}),c.applicationList=a)}function q(c){if(!c.id)return c.text;var d=c.id.split(b.AT);return d.length>1?a("<img>").attr("src",w+d[1]+".png").css({height:"25px",paddingRight:"3px"}).get(0).outerHTML+"<span>"+d[0]+"</span>":c.text}b.ID+=j.getRandomNum();var r,s=a(d),t="true"===k.useFavorite,u="true"===k.notSetOpen,v=d.find(".application"),w=g.getIconPath();l(),c.$on("down.changed.favorite",function(){t&&e(function(){p(),v.off("select2:select").select2("destroy"),m(),v.val(c.selectedApplication).trigger("change")})})}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("periodSelectorDirectiveConfig",{ID:"PERIOD_SELECTOR_DRTV_"}),pinpointApp.directive("periodSelectorDirective",["periodSelectorDirectiveConfig","$http","$timeout","$window","webStorage","helpContentService","UrlVoService","AnalyticsService","PreferenceService","CommonAjaxService","CommonUtilService",function(b,c,d,e,f,g,h,i,j,k,l){return{restrict:"EA",replace:!0,templateUrl:"features/periodSelector/periodSelector.html?v="+G_BUILD_TIME,link:function(c,e,f){function m(){c.periodType=h.getPeriodType(),c.readablePeriod=h.getReadablePeriod(),c.periodCalendar=h.getReadablePeriod(),n()}function n(){q(),B.find("button.ui-datepicker-close").on("click",function(){s()&&(B.hide(),q())}),A.datetimepicker(o("#from-picker-alt")),u(A,h.getQueryStartTime()||moment().subtract(20,"minute").valueOf()),z.datetimepicker(o("#to-picker-alt")),u(z,h.getQueryEndTime()),a("#from-picker-alt").on("click",function(){t()}),a("#to-picker-alt").on("click",function(){t()}),a(document).mousedown(function(b){B.is(":visible")!==!1&&0===a(b.target).parents("div#ui-datepicker-div").length&&B.hide()})}function o(a){return{altField:a,altFieldTimeOnly:!1,dateFormat:"yy-mm-dd",timeFormat:"HH:mm z",controlType:"select",showButtonPanel:!1,timezone:moment().utcOffset(),showTimezone:!1,onSelect:function(){},onClose:function(a,b){}}}function p(a){var b=[],c=a.substr(-1);return b[0]=parseInt(a),b[1]="d"==c?"days":"h"==c?"hours":"minutes",b}function q(){r(D,!1)}function r(a,b){B.find(".guide").html(a).css("color",b===!0?"red":"")}function s(){var a=moment(A.datetimepicker("getDate")),b=moment(z.datetimepicker("getDate"));return b.isAfter(moment(A.datetimepicker("getDate")).add(j.getMaxPeriod(),"days"))?(r(D,!0),!1):!a.isAfter(b)||(r(E,!0),!1)}function t(){B.is(":visible")?B.hide():B.css("left",y.offset().left).show()}function u(a,b){a.datetimepicker("setDate",b?new Date(b):new Date)}function v(){h.setPeriodType(c.periodType),c.periodType===C.LAST?w(function(a){h.setReadablePeriod(c.readablePeriod),h.setQueryEndTime(a),h.autoCalculateByQueryEndDateTimeAndReadablePeriod(),x(),c.disableButton=!1}):c.periodType===C.REALTIME?w(function(a){h.setReadablePeriod(j.getRealtimeScatterXRangeStr()),h.setQueryEndTime(a),h.autoCalculateByQueryEndDateTimeAndReadablePeriod(),x()}):c.periodType===C.RANGE&&(h.setQueryStartTime(A.datetimepicker("getDate").getTime()),h.setQueryEndTime(z.datetimepicker("getDate").getTime()),h.autoCalcultateByQueryStartTimeAndQueryEndTime(),x())}function w(a){k.getServerTime(function(b){a(b)})}function x(){c.$emit("up.changed.period",b.ID)}b.ID+=l.getRandomNum();var y=a(e),z=y.find("#to-picker"),A=y.find("#from-picker"),B=y.find("#ui-datepicker-div"),C=j.getPeriodType(),D=g.navbar.searchPeriod.guideDateMax.replace(/\{\{day\}\}/,j.getMaxPeriod()),E=g.navbar.searchPeriod.guideDateOrder;c.useRealtime="true"===f.useRealtime,c.useAutoUpdate="true"===f.useAutoUpdate,c.disableButton=!1,c.aReadablePeriodTime=j.getPeriodTime(),c.autoUpdate=!1,c.timeLeft=10,c.timeList=j.getUpdateTimes(),c.timeCountDown=10,c.showUpdate=function(){return!!c.useAutoUpdate&&!!(c.periodType===C.LAST&&c.aReadablePeriodTime.indexOf(c.readablePeriod)>=0&&c.application)},c.changeUpdateSetting=function(){i.send(i.CONST.MAIN,c.autoUpdate?i.CONST.TG_UPDATE_OFF:i.CONST.TG_UPDATE_ON)},c.search=function(){s()?(c.periodType=C.RANGE,v()):B.show()},c.changePeriodTimeOfLast=function(a){i.send(i.CONST.MAIN,i.CONST.CLK_TIME,a),c.periodType=C.LAST,c.disableButton=!0,c.readablePeriod=a,v()},c.getPeriodClassInCalendar=function(a){return c.periodCalendar===a?"btn-success":""},c.getPeriodClass=function(a){var b="";return c.periodType!==C.LAST?b:(c.readablePeriod===a&&(b+="btn-info"),c.disableButton&&(b+=" wait"),b)},c.setPeriodTimeOfCalendar=function(a){var b=moment(z.datetimepicker("getDate")),c=p(a);u(A,b.subtract(c[0],c[1]).format())},c.update=function(){var a=c.autoUpdate;c.autoUpdate=!1,c.disableButton=!0,v(),d(function(){c.disableButton=!1,c.timeLeft=c.timeCountDown,c.autoUpdate=a,c.$$phase||c.$digest()},1e3)},c.changeToRealtime=function(){c.periodType!==C.REALTIME&&(i.send(i.CONST.MAIN,i.CONST.CLK_START_REALTIME),c.periodType=C.REALTIME,c.autoUpdate=!1,v())},c.changeToRange=function(){i.send(i.CONST.MAIN,i.CONST.TG_DATE,C.RANGE),c.periodType=C.RANGE},c.changeToLast=function(){i.send(i.CONST.MAIN,i.CONST.TG_DATE,C.LAST),c.periodType=C.LAST},c.getRealtimeBtnClass=function(){return h.isRealtime()?"btn-info":""},c.getPeriodLabel=function(a){return"5m"===a?"Last "+a:a},c.isRangePeriod=function(){return c.periodType===C.RANGE},c.isNotRangePeriod=function(){return c.periodType!==C.RANGE},m()}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("navbarDirectiveConfig",{periodTypePrefix:".navbar.periodType",periodType:{RANGE:"range",LAST:"last",REALTIME:"realtime"}}),pinpointApp.directive("navbarDirective",["navbarDirectiveConfig","$route","$rootScope","$http","$document","$timeout","$window","webStorage","helpContentService","UrlVoService","AnalyticsService","PreferenceService","UserConfigurationService","TooltipService","CommonAjaxService","CommonUtilService",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return{restrict:"EA",replace:!0,templateUrl:"features/navbar/navbar.html?v="+G_BUILD_TIME,link:function(c,e){function f(){a("#navbar_depth div").on("show.bs.dropdown",function(){}).on("hide.bs.dropdown",function(a){aa===!0?a.preventDefault():ba===!1&&c.$apply(function(){c.cancelDepth(!1)}),aa=!1,ba=!1}),a("#navbar_depth .dropdown-menu").on("click",function(){aa=!0})}function r(a){return{altField:a,altFieldTimeOnly:!1,dateFormat:"yy-mm-dd",timeFormat:"HH:mm z",controlType:"select",showButtonPanel:!1,timezone:moment().utcOffset(),showTimezone:!1,onSelect:function(){},onClose:function(a,b){}}}function s(a){var b=[],c=a.substr(-1);return b[0]=parseInt(a),b[1]="d"==c?"days":"h"==c?"hours":"minutes",b}function t(){u(ca,!1)}function u(a,b){A.find(".guide").html(a).css("color",b===!0?"red":"")}function v(){var a=moment(T(x)),b=moment(T(y));return b.isAfter(moment(T(x)).add(m.getMaxPeriod(),"days"))?(u(ca,!0),!1):!a.isAfter(b)||(u(da,!0),!1)}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,aa=!1,ba=!1,ca=j.navbar.searchPeriod.guideDateMax.replace(/\{\{day\}\}/,m.getMaxPeriod()),da=j.navbar.searchPeriod.guideDateOrder;c.bIsInspector=!1,c.periodDelay=!1,c.aReadablePeriodList=m.getPeriodTime(),c.autoUpdate=!1,c.timeLeft=10,c.timeCountDown=10,c.timeList=m.getUpdateTimes(),c.callee=B=m.getCalleeByApp(c.application),c.caller=C=m.getCallerByApp(c.application),c.bidirectional=D=m.getBidirectionalByApp(c.application),c.wasOnly=E=m.getWasOnlyByApp(c.application),c.rangeList=m.getDepthList(),c.applications=[{text:"Select an application.",value:""}],e.bind("selectstart",function(a){return!1}),o.init("navbar"),f(),F=function(a,b){z=a,c.bIsInspector=b===!0,c.periodType=R(),w=e.find(".application"),w.select2(),c.applications=[{text:"Loading...",value:""}],c.application=z.getApplication()||"",c.callee=B=m.getCalleeByApp(c.application),c.caller=C=m.getCallerByApp(c.application),c.bidirectional=D=m.getBidirectionalByApp(c.application),c.wasOnly=E=m.getWasOnlyByApp(c.application),c.disableApplication=!0,c.readablePeriod=z.getReadablePeriod()||n.getPeriod(),c.periodCalendar=z.getReadablePeriod()||n.getPeriod(),c.queryEndTime=z.getQueryEndTime()||"",H(),G(),L()},Q=function(b){z=b,c.periodType=R(),w=e.find(".application"),c.application=z.getApplication()||"",c.applicationName=z.getApplicationName()||"",c.readablePeriod=z.getReadablePeriod()||n.getPeriod(),c.periodCalendar=z.getReadablePeriod()||n.getPeriod(),c.queryEndTime=z.getQueryEndTime()||"",a("#ui-datepicker-div").remove()},G=function(){A=a("#ui-datepicker-div"),t(),A.find("button.ui-datepicker-close").on("click",function(){v()&&(A.hide(),t())}),x=e.find("#from-picker"),x.datetimepicker(r("#from-picker-alt")),I(x,z.getQueryStartTime()||moment().subtract(5,"minute").valueOf()),y=e.find("#to-picker"),y.datetimepicker(r("#to-picker-alt")),I(y,z.getQueryEndTime()),a("#from-picker-alt").on("click",function(){Z()}),a("#to-picker-alt").on("click",function(){Z()}),a(document).mousedown(function(b){A.is(":visible")!==!1&&0===a(b.target).parents("div#ui-datepicker-div").length&&A.hide()})},Z=function(){A.is(":visible")?A.hide():(A.css("left",a("#navbar_period").offset().left),A.show())},T=function(a){return a.datetimepicker("getDate")},R=function(){if(z.isRealtime())return b.periodType.REALTIME;var a=b.periodType.LAST;return a=h.name&&i.get(h.name+b.periodTypePrefix)?i.get(h.name+b.periodTypePrefix):z.getApplication()?b.periodType.RANGE:b.periodType.LAST,z.getReadablePeriod()&&_.indexOf(c.aReadablePeriodList,z.getReadablePeriod())<0&&(a=b.periodType.RANGE),a},S=function(){h.name=h.name||"window."+_.random(1e5,999999),i.add(h.name+b.periodTypePrefix,c.periodType)},I=function(a,b){a.datetimepicker("setDate",b?new Date(b):new Date)},K=function(){c.application&&(z.setApplication(c.application),k.setApplication(c.application),c.callee=B=m.getCalleeByApp(c.application),c.caller=C=m.getCallerByApp(c.application),c.bidirectional=D=m.getBidirectionalByApp(c.application),c.wasOnly=E=m.getWasOnlyByApp(c.application),z.setCalleeRange(c.callee),z.setCallerRange(c.caller),z.setBidirectional(c.bidirectional),z.setWasOnly(c.wasOnly),k.setCallee(c.callee),k.setCaller(c.caller),k.setBidirectional(c.bidirectional),k.setWasOnly(c.wasOnly),c.periodType===b.periodType.LAST&&c.readablePeriod?(z.setPeriodType(b.periodType.LAST),k.setPeriodType(b.periodType.LAST),J(function(a){z.setReadablePeriod(c.readablePeriod),z.setQueryEndDateTime(q.formatDate(a)),z.autoCalculateByQueryEndDateTimeAndReadablePeriod(),k.setReadablePeriod(c.readablePeriod),k.setQueryEndDateTime(q.formatDate(a)),k.autoCalculateByQueryEndDateTimeAndReadablePeriod(),P(),I(x,z.getQueryStartTime()),I(y,z.getQueryEndTime())})):c.periodType===b.periodType.REALTIME?(z.setPeriodType(b.periodType.REALTIME),k.setPeriodType(b.periodType.REALTIME),J(function(a){z.setReadablePeriod(m.getRealtimeScatterXRangeStr()),z.setQueryEndDateTime(q.formatDate(a)),z.autoCalculateByQueryEndDateTimeAndReadablePeriod(),k.setReadablePeriod(b.periodType.REALTIME),k.setQueryEndDateTime(q.formatDate(a)),k.autoCalculateByQueryEndDateTimeAndReadablePeriod(),P(),I(x,z.getQueryStartTime()),I(y,z.getQueryEndTime())})):M()&&N()&&(z.setPeriodType(b.periodType.RANGE),z.setQueryStartTime(M()),z.setQueryEndTime(N()),z.autoCalcultateByQueryStartTimeAndQueryEndTime(),k.setPeriodType(b.periodType.RANGE),k.setQueryStartTime(M()),k.setQueryEndTime(N()),k.autoCalcultateByQueryStartTimeAndQueryEndTime(),P()))},P=function(){S(),c.$emit("navbarDirective.changed",z)},J=function(a){p.getServerTime(function(b){a(b)})},L=function(){p.getApplicationList(function(a){angular.isArray(a)===!1||0===a.length?c.applications[0].text="Application not found.":($=a,O($,function(){c.disableApplication=!1,g(function(){z.getApplication()?(w.val(z.getApplication()).trigger("change"),c.application=z.getApplication()):w.select2("open")})})),c.hideFakeApplication=!0},function(){c.applications[0].text="Application error.",c.hideFakeApplication=!0})},M=function(){return x.datetimepicker("getDate").getTime()},N=function(){return y.datetimepicker("getDate").getTime()},O=function(a,b){n.getFavoriteList(function(d){c.applications=[{text:"",value:""}];var e=[],f=[];angular.forEach(a,function(a,b){for(var c=!1,g={text:a.applicationName+"@"+a.serviceType,value:a.applicationName+"@"+a.code},h=0;h<d.length;h++)if(d[h].applicationName===a.applicationName&&d[h].serviceType===a.serviceType){c=!0;break}c?e.push(g):f.push(g)}),c.favoriteCount=e.length,c.applications=e.concat(f),angular.isFunction(b)&&b.apply(c)})},H=function(){function a(a){if(!a.id)return a.text;var b=a.id.split("@");if(b.length>1){var c=document.createElement("img");return c.src="images/icons/"+b[1]+".png",c.style.height="25px",c.style.paddingRight="3px",c.outerHTML+"<span>"+b[0]+"</span>"}return a.text}w.select2({placeholder:"Select an application",searchInputPlaceholder:"Input your application name",allowClear:!1,templateResult:a,templateSelection:a,escapeMarkup:function(a){return a}}),w.on("select2:select",function(a){l.send(l.CONST.MAIN,l.CONST.CLK_APPLICATION),c.application=w.val(),c.$digest(),K()})},W=function(a){var b=parseInt(a);switch(a.substring(a.length-1)){case"m":b*=6e4;break;case"h":b*=36e5;break;case"d":b*=864e5}return b},X=function(a){if(c.periodType===b.periodType.LAST){var d=moment(z.getQueryEndTime()+a).format("YYYY-MM-DD-HH-mm-ss");z.setQueryEndDateTime(d),z.autoCalculateByQueryEndDateTimeAndReadablePeriod(),k.setQueryEndDateTime(d),k.autoCalculateByQueryEndDateTimeAndReadablePeriod(),P(),I(x,z.getQueryStartTime()),I(y,z.getQueryEndTime())}else{I(x,z.getQueryStartTime()+a),I(y,z.getQueryEndTime()+a);var e=M(),f=N();z.setQueryStartTime(e),z.setQueryEndTime(f),z.autoCalcultateByQueryStartTimeAndQueryEndTime(),k.setQueryStartTime(e),k.setQueryEndTime(f),k.autoCalcultateByQueryStartTimeAndQueryEndTime(),P()}},Y=function(a){l.send(l.CONST.MAIN,l.CONST.CLK_TIME,a),c.periodDelay=!0,c.readablePeriod=a,c.autoUpdate=!1,K(),g(function(){c.periodDelay=!1,c.$$phase||c.$digest()},1e3)},c.search=function(){v()?K():A.show()},c.setPeriod=function(a){c.periodType=b.periodType.LAST,Y(a)},c.getPreviousClass=function(){return""},c.getNextClass=function(){return""},c.getPeriodClassInCalendar=function(a){return c.periodCalendar===a?"btn-success":""},c.getPeriodClass=function(a){var d="";return c.periodType!==b.periodType.LAST?d:(c.readablePeriod===a&&(d+="btn-info"),c.periodDelay&&(d+=" wait"),d)},c.showUpdate=function(){return!c.bIsInspector&&!!(c.periodType===b.periodType.LAST&&_.indexOf(["5m","20m","1h","3h"],c.readablePeriod)>=0&&c.application)},c.changeUpdateSetting=function(){l.send(l.CONST.MAIN,c.autoUpdate?l.CONST.TG_UPDATE_OFF:l.CONST.TG_UPDATE_ON)},U=function(){c.autoUpdate&&(c.timeLeft-=1,0===c.timeLeft?(c.update(),c.timeLeft=c.timeCountDown):g(U,1e3))},V=function(){c.timeLeft=c.timeCountDown},c.setPeriodForCalendar=function(a){var b=moment(T(y)),c=s(a);I(x,b.subtract(c[0],c[1]).format())},c.setAutoUpdateTime=function(a){l.send(l.CONST.MAIN,l.CONST.CLK_UPDATE_TIME,a+"s"),c.timeCountDown=a,c.timeLeft=a},c.setCallee=function(a){c.callee=a},c.setCaller=function(a){c.caller=a},c.getBidirectionalImgSrc=function(){return"images/bidirect_"+(c.bidirectional?"on":"off")+".png"},c.checkBidirectional=function(){c.bidirectional=!c.bidirectional},c.checkWasOnly=function(b){c.wasOnly=!c.wasOnly,c.wasOnly?a(b.target).addClass("btn-info").css("color","white"):a(b.target).removeClass("btn-info").css("color","#DDD"),m.setDepthByApp(c.application+"+wasOnly",c.wasOnly),window.location.reload(!0)},c.setDepth=function(){aa=!1,ba=!0,a("#navbar_depth .dropdown-menu").trigger("click.bs.dropdown"),B===c.callee&&C===c.caller&&D===c.bidirectional||(l.send(l.CONST.MAIN,l.CONST.CLK_CALLEE_RANGE,c.callee),l.send(l.CONST.MAIN,l.CONST.CLK_CALLER_RANGE,c.caller),B=c.callee,C=c.caller,D=c.bidirectional,m.setDepthByApp(c.application+"+callee",c.callee),m.setDepthByApp(c.application+"+caller",c.caller),m.setDepthByApp(c.application+"+bidirectional",c.bidirectional),window.location.reload(!0))},c.cancelDepth=function(b){c.callee=B,c.caller=C,c.bidirectional=D,b&&(aa=!1,ba=!0,a("#navbar_depth .dropdown-menu").trigger("click.bs.dropdown"))},c.update=function(){var a=c.autoUpdate;c.autoUpdate=!1,c.periodDelay=!0,K(),g(function(){c.periodDelay=!1,V(),c.autoUpdate=a,c.$$phase||c.$digest()},1e3)},c.togglePeriod=function(a){l.send(l.CONST.MAIN,l.CONST.TG_DATE,a),c.periodType=a,c.autoUpdate=!1},c.setRealtime=function(){c.periodType!==b.periodType.REALTIME&&(l.send(l.CONST.MAIN,l.CONST.CLK_START_REALTIME),c.periodType=b.periodType.REALTIME,c.autoUpdate=!1,K())},c.isRealtime=function(){return"undefined"!=typeof z&&null!==z&&z.isRealtime()},c.showConfig=function(){d.$broadcast("configuration.open")},c.$watch("autoUpdate",function(a,b){a?g(U,1e3):V()}),c.$on("navbarDirective.initialize",function(a,b,c){F(b,c)}),c.$on("navbarDirective.initialize.andReload",function(a,d){F(d),c.periodType=b.periodType.LAST,Y(n.getPeriod())}),c.$on("navbarDirective.initialize.realtime.andReload",function(a,d){F(d),c.periodType=b.periodType.REALTIME,Y(n.getPeriod())}),c.$on("navbarDirective.initializeWithStaticApplication",function(a,b){Q(b)}),c.$on("navbarDirective.moveToPast",function(a){X(c.periodType===b.periodType.LAST?-W(c.readablePeriod):-(z.getQueryEndTime()-z.getQueryStartTime()))}),c.$on("navbarDirective.moveToFuture",function(a){X(c.periodType===b.periodType.LAST?W(c.readablePeriod):z.getQueryEndTime()-z.getQueryStartTime())}),c.$on("navbarDirective.changedFavorite",function(a){O($,function(){c.disableApplication=!1,g(function(){z.getApplication()&&(w.val(z.getApplication()).trigger("change"),c.application=z.getApplication())})}),w.off("select2.select").select2("destroy"),H(),w.val(z.getApplication()).trigger("change")})}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("navbar2DirectiveConfig",{ID:"NAVBAR2_DRTV_"}),pinpointApp.directive("navbar2Directive",["navbar2DirectiveConfig","$rootScope","$timeout","UrlVoService","TooltipService","CommonUtilService",function(a,b,c,d,e,f){return{restrict:"EA",replace:!0,templateUrl:"features/navbar2/navbar2.html?v="+G_BUILD_TIME,link:function(c,g){a.ID+=f.getRandomNum(),c.paramInitApplication=d.getApplication(),g.bind("selectstart",function(a){return!1}),e.init("navbar"),c.showConfig=function(){b.$broadcast("configuration.open")}}}}])}(jQuery),function(){"use strict";pinpointApp.constant("serverMapDirectiveConfig",{options:{sBigFont:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",sImageDir:"images/servermap/",sSmallFont:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",htLinkType:{sCurve:"JumpGap",sRouting:"Normal"},htLinkTheme:{"default":{margin:1,fontColor:"#000",fontAlign:"center",fontFamily:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",borderColor:"#C5C5C5",strokeWidth:1,backgroundColor:"#FFF"},bad:{margin:1,fontColor:"#FF1300",fontAlign:"center",fontFamily:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",borderColor:"#7D7D7D",strokeWidth:1,backgroundColor:"#FFC9C9"}},sOverviewId:"servermapOverview",sContainerId:"servermap"}}),pinpointApp.directive("serverMapDirective",["serverMapDirectiveConfig","$rootScope","SystemConfigurationService","ServerMapDaoService","AlertsService","ProgressBarService","$filter","ServerMapFilterVoService","filteredMapUtilService","$base64","ServerMapHintVoService","$timeout","$location","$window","helpContentTemplate","helpContentService","AnalyticsService","TooltipService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return{replace:!0,restrict:"EA",templateUrl:"features/serverMap/serverMap.html?v="+G_BUILD_TIME,link:function(b,o){function p(a){a.nodeDataArray.forEach(function(a){a.isWas!==!1||!angular.isUndefined(a.isQueue)&&a.isQueue!==!1||"USER"===a.serviceType||angular.isUndefined(b.mergeStatus[a.serviceType])&&(b.mergeTypeList.push(a.serviceType),b.mergeStatus[a.serviceType]=!0)})}function s(){b.nodeContextMenuStyle="",b.linkContextMenuStyle="",b.backgroundContextMenuStyle="",X.val(""),b.responseTime={from:0,to:3e4},b.includeFailed=null,$("#filterWizard").modal("hide"),"$apply"!=b.$$phase&&"$digest"!=b.$$phase&&"$apply"!=b.$root.$$phase&&"$digest"!=b.$root.$$phase&&b.$digest()}function t(a,c,e,f,g,h,j,k){M.startLoading(),L.hideError(),L.hideWarning(),L.hideInfo(),O&&O.clear(),M.setLoading(10),Q={applicationName:a,serviceTypeName:c,from:e-f,to:e,originTo:b.oNavbarVoService.getQueryEndTime(),callerRange:b.oNavbarVoService.getCallerRange(),calleeRange:b.oNavbarVoService.getCalleeRange(),bidirectional:b.oNavbarVoService.getBidirectional(),wasOnly:b.oNavbarVoService.getWasOnly(),period:f,filter:n.encodeURIComponent(g),hint:!!h&&n.encodeURIComponent(h)},g?d.getFilteredServerMapData(Q,function(a,c,e){if(a)return M.stopLoading(),L.showError("There is some error."),!1;M.setLoading(50),c.from===e.lastFetchedTimestamp?b.$emit("serverMapDirective.allFetched",e):(P.lastFetchedTimestamp=e.lastFetchedTimestamp-1,b.$emit("serverMapDirective.fetched",P.lastFetchedTimestamp,e));var f=JSON.parse(g);P.applicationMapData=d.mergeFilteredMapData(P.applicationMapData,e.applicationMapData);var h=d.extractDataFromApplicationMapData(P.applicationMapData);if(h=d.addFilterProperty(f,h),p(h),i.doFiltersHaveUnknownNode(f))for(var l in b.mergeStatus)b.mergeStatus[l]=!1;u(P),A(c,h,j,k)}):d.getServerMapData(Q,function(a,c,e){if(a||e.exception)return M.stopLoading(),a?L.showError("There is some error."):L.showError(e.exception),b.$emit("serverMapDirective.hasNoData"),!1;M.setLoading(50),u(e),P=e;var f=d.extractDataFromApplicationMapData(e.applicationMapData);p(f),A(c,f,j,k)})}function u(a){0===a.applicationMapData.nodeDataArray.length?b.$emit("serverMapDirective.hasNoData"):b.$emit("serverMapDirective.hasData")}function v(a,c,d,e){b.inspectApplicationName=d,b.inspectCategory=e,b.nodeContextMenuStyle={display:"block",top:a,left:c,"z-index":9999999},b.$digest()}function w(a,c){b.linkContextMenuStyle={display:"block",top:a,left:c,"z-index":9999999},b.$digest()}function x(a,c){b.backgroundContextMenuStyle={display:"block",top:a,left:c,"z-index":9999999},b.$digest()}function y(){var a=[];for(var c in b.mergeStatus)b.mergeStatus[c]===!0&&a.push(c);return a}function z(){var a=[];if(b.oNavbarVoService.getFilter()){var c=b.oNavbarVoService.getFilterAsJson();a.push("<p>There is no data with the filter below.</p>"),angular.forEach(c,function(b,d){a.push("<p><b>Filter"),c.length>1&&a.push(" #"+(d+1)),a.push(" : "+b.fa+"("+b.fst+") ~ "+b.ta+"("+b.tst+")</b><br>"),a.push("<ul>"),b.url&&a.push("<li>Url Pattern : "+j.decode(b.url)+"</li>"),b.rf&&b.rt&&a.push("<li>Response Time : "+g("number")(b.rf)+" ms ~ "+g("number")(b.rt)+" ms</li>"),a.push("<li>Transaction Result : "+(b.ie?"Failed Only":"Success + Failed")+"</li>"),a.push("</ul></p>")})}else a.push("There is no data.");L.showInfo(a.join(""))}function A(c,e,f,g,h){var i=y();if(H=d.mergeMultiLinkGroup(d.mergeGroup(e,i),i),M.setLoading(80),0===H.nodeDataArray.length)return M.stopLoading(),void z();H.linkDataArray=D(H.linkDataArray,f,g),M.setLoading(90);var j=a.options;j.fOnNodeSubGroupClicked=function(a,b,c,e){var f=d.getLinkNodeDataByNodeKey(P.applicationMapData,c,e);f.fromNode=d.getNodeDataByKey(P.applicationMapData,f.from),f.toNode=d.getNodeDataByKey(P.applicationMapData,f.to),j.fOnLinkClicked(a,f)},j.fOnNodeClicked=function(a,c,e,f){var g;angular.isDefined(c.unknownNodeGroup)&&!e?c.unknownNodeGroup=d.getUnknownNodeDataByUnknownNodeGroup(P.applicationMapData,c.unknownNodeGroup):g=d.getNodeDataByKey(P.applicationMapData,e||c.key),g&&(c=g),N="node",S=c,"undefined"==typeof h&&b.$emit("serverMapDirective.nodeClicked",Q,c,H,f),s()},j.fOnNodeDoubleClicked=function(a,b){a.diagram.centerRect(b.actualBounds),a.diagram.scale*=2},j.fOnNodeContextClicked=function(a,c){if(K&&!b.oNavbarVoService.isRealtime()){s();var e=d.getNodeDataByKey(P.applicationMapData,c.key);e&&(c=e),S=c,c.isWas===!0&&v(a.event.layerY,a.event.layerX,c.applicationName,c.category)}},j.fOnLinkClicked=function(a,c){if(!b.oNavbarVoService.isRealtime()){var e;angular.isDefined(c.unknownLinkGroup)?c.unknownLinkGroup=d.getUnknownLinkDataByUnknownLinkGroup(P.applicationMapData,c.unknownLinkGroup):e=d.getLinkDataByKey(P.applicationMapData,c.key),e&&(e.fromNode=c.fromNode,e.toNode=c.toNode,c=e),N="link",R=c,s(),b.$emit("serverMapDirective.linkClicked",Q,c,H)}},j.fOnLinkContextClicked=function(a,f){var g=d.getLinkDataByKey(P.applicationMapData,f.key);g&&(g.fromNode=f.fromNode,g.toNode=f.toNode,f=g),s(),R=f,I&&!angular.isArray(f.targetInfo)&&(w(a.event.layerY,a.event.layerX),b.$emit("serverMapDirective.linkContextClicked",a,c,f,e))},j.fOnBackgroundClicked=function(a){b.$emit("serverMapDirective.backgroundClicked",a,c),s()},j.fOnBackgroundDoubleClicked=function(a){F()},j.fOnBackgroundContextClicked=function(a){b.$emit("serverMapDirective.backgroundContextClicked",a,c),s(),J&&x(a.diagram.lastInput.event.layerY,a.diagram.lastInput.event.layerX)};for(var k,l=0;l<H.nodeDataArray.length;l++){var m=H.nodeDataArray[l];if(m.applicationName===c.applicationName){k=m,j.sBoldKey=m.key;break}}M.setLoading(100),null===O?O=new ServerMap(j,C(),function(a){q.send(q.CONST.MAIN,q.CONST[a])}):O.option(j),O.load(H,b.mergeStatus),M.stopLoading(),b.oNavbarVoService&&b.oNavbarVoService.isRealtime()&&(N="node",S=null),G(k),B(c)}function B(){var a=5e3,e=3e5;c.getConfig().then(function(c){c.enableServerMapRealTime===!0&&b.oNavbarVoService.isRealtime()&&l(function(){b.oNavbarVoService.isRealtime()&&(Q.to=Q.to+a,Q.from=Q.to-e,d.getServerMapData(Q,function(a,c,e){if(b.oNavbarVoService.isRealtime()){P=e;var f=d.extractDataFromApplicationMapData(e.applicationMapData);p(f),A(c,f,b.linkRouting,b.linkCurve,!0)}}))},a)})}function C(){return/^\/main/.test(m.path())}function D(a,c,d){var e=a;for(var f in e)e[f].from===e[f].to?e[f].routing=b.routingType[2]:e[f].routing=c,e[f].curve=d;return e}function E(){s(),b.fromAgent=R.fromAgent||[],b.toAgent=R.toAgent||[],b.sourceInfo=R.sourceInfo,b.targetInfo=R.targetInfo,b.fromApplicationName=R.fromNode.applicationName,b.toApplicationName=R.toNode.applicationName,b.$broadcast("sidebarTitleDirective.initialize.forServerMap",R),$("#filterWizard").modal("show"),T||(T=!0,$("#filterWizard").on("shown.bs.modal",function(){if(V.select2().val("").trigger("change"),W.select2().val("").trigger("change"),$("slider",this).addClass("auto"),setTimeout(function(){$("#filterWizard slider").removeClass("auto")},500),b.oNavbarVoService.getFilter()){var a=i.findFilterInNavbarVo(R.fromNode.applicationName,R.fromNode.serviceType,R.toNode.applicationName,R.toNode.serviceType,b.oNavbarVoService);if(a){X.val(a.oServerMapFilterVoService.getRequestUrlPattern()),b.responseTime.from=a.oServerMapFilterVoService.getResponseFrom();var c=a.oServerMapFilterVoService.getResponseTo();b.responseTime.to="max"===c?3e4:c,b.includeFailed=a.oServerMapFilterVoService.getIncludeException(),V.select2().val(a.oServerMapFilterVoService.getFromAgentName()).trigger("change"),W.select2().val(a.oServerMapFilterVoService.getToAgentName()).trigger("change")}else b.responseTime={from:0,to:3e4}}else b.responseTime={from:0,to:3e4};b.$$phase||b.$digest()}))}function F(){O&&O.zoomToFit()}function G(a){l(function(){"node"===N&&S?O.highlightNodeByKey(S.key):"link"===N&&R?O.highlightLinkByFromTo(R.from,R.to):a&&O.highlightNodeByKey(a.key)})}var H,I=!0,J=!0,K=!1,L=new e(o),M=new f(o),N=!1,O=null,P={applicationMapData:{linkDataArray:[],nodeDataArray:[]},lastFetchedTimestamp:[],timeSeriesResponses:{values:{},time:[]}},Q={},R={},S={},T=!1,U=o.find(".serverMapTime"),V=o.find(".fromAgentName"),W=o.find(".toAgentName"),X=o.find("#urlPattern");V.select2(),W.select2(),b.oNavbarVoService=null,b.totalRequestCount=!0,b.bShowServerMapStatus=!1,b.linkRouting=a.options.htLinkType.sRouting,b.linkCurve=a.options.htLinkType.sCurve,b.searchNodeQuery="",b.searchNodeIndex=0,b.searchNodeList=[],b.mergeTypeList=[],b.mergeStatus={},b.showAntStyleHint=!1,b.routingType=["Normal","Orthogonal","AvoidsNodes"],b.curveType=["None","JumpOver","JumpGap","Bezier"],b.passingTransactionResponseToScatterChart=function(){b.$emit("serverMapDirective.passingTransactionResponseToScatterChart",S),s()},b.passingTransactionList=function(){q.send(q.CONST.CONTEXT,q.CONST.CLK_FILTER_TRANSACTION);var a=new h;a.setMainApplication(R.filterApplicationName).setMainServiceTypeName(R.filterApplicationServiceTypeName).setMainServiceTypeCode(R.filterApplicationServiceTypeCode).setFromApplication(R.fromNode.applicationName).setFromServiceType(R.fromNode.serviceType).setToApplication(R.toNode.applicationName).setToServiceType(R.toNode.serviceType);var c=new k;R.sourceInfo.isWas&&R.targetInfo.isWas&&c.setHint(R.toNode.applicationName,R.filterTargetRpcList),b.$broadcast("serverMapDirective.openFilteredMap",a,c),s()},b.openFilterWizard=function(){q.send(q.CONST.CONTEXT,q.CONST.CLK_FILTER_TRANSACTION_WIZARD),E()},b.responseTimeFormatting=function(a){return 3e4===parseInt(a)?"30,000+ ms":g("number")(a)+" ms"},b.passingTransactionMap=function(){var a=new h;a.setMainApplication(R.filterApplicationName).setMainServiceTypeCode(R.filterApplicationServiceTypeCode).setMainServiceTypeName(R.filterApplicationServiceTypeName).setFromApplication(R.fromNode.applicationName).setFromServiceType(R.fromNode.serviceType).setToApplication(R.toNode.applicationName).setToServiceType(R.toNode.serviceType).setResponseFrom(b.responseTime.from).setResponseTo(b.responseTime.to).setIncludeException(b.includeFailed).setRequestUrlPattern(j.encode(X.val())),b.fromAgentName&&a.setFromAgentName(b.fromAgentName),b.toAgentName&&a.setToAgentName(b.toAgentName);var c=new k;R.sourceInfo.isWas&&R.targetInfo.isWas&&c.setHint(R.toNode.applicationName,R.filterTargetRpcList),b.$broadcast("serverMapDirective.openFilteredMap",a,c),s()},b.toggleMergeGroup=function(a){q.send(q.CONST.CONTEXT,q.CONST.TG_MERGE_TYPE,a),b.mergeStatus[a]=!b.mergeStatus[a],A(Q,d.extractDataFromApplicationMapData(P.applicationMapData),b.linkRouting,b.linkCurve),s()},b.toggleLinkLabelTextType=function(a){"tps"===a?(q.send(q.CONST.CONTEXT,q.CONST.TG_TPS),b.totalRequestCount=!1,b.tps=!0):(q.send(q.CONST.CONTEXT,q.CONST.TG_CALL_COUNT),b.totalRequestCount=!0,b.tps=!1),b.totalRequestCount="tps"!==a,b.tps="tps"===a,A(Q,H,b.linkRouting,b.linkCurve),s()},b.toggleLinkRouting=function(c){q.send(q.CONST.CONTEXT,q.CONST.TG_ROUTING,c),b.linkRouting=a.options.htLinkType.sRouting=c,A(Q,H,b.linkRouting,b.linkCurve),s()},b.toggleLinkCurve=function(c){q.send(q.CONST.CONTEXT,q.CONST.TG_CURVE,c),b.linkCurve=a.options.htLinkType.sCurve=c,A(Q,H,b.linkRouting,b.linkCurve),s()},b.refresh=function(){q.send(q.CONST.CONTEXT,q.CONST.CLK_REFRESH),O&&O.refresh(),s()},b.$on("serverMapDirective.initialize",function(a,c){b.oNavbarVoService&&Q.applicationName!==c.getApplicationName()&&(N=!1),b.oNavbarVoService=c,b.bShowServerMapStatus=!c.isRealtime(),d.abort(),t(c.getApplicationName(),c.getServiceTypeName(),c.getQueryEndTime(),c.getQueryPeriod(),c.getFilter(),c.getHint(),b.linkRouting,b.linkCurve)}),b.$on("serverMapDirective.fetch",function(a,c,d){t(b.oNavbarVoService.getApplicationName(),b.oNavbarVoService.getServiceTypeName(),d,c,b.oNavbarVoService.getFilter(),b.oNavbarVoService.getHint(),b.linkRouting,b.linkCurve);
}),b.$on("serverMapDirective.initializeWithMapData",function(a,c,e,f){s(),b.bShowServerMapStatus=!1,J=!0,K=c,I=!1,Q={applicationName:e.applicationId},P=e,b.oNavbarVoService=f,A(Q,d.extractDataFromApplicationMapData(P.applicationMapData),b.linkRouting,b.linkCurve)}),b.$on("serverMapDirective.zoomToFit",function(a){F()}),b.$on("serverMapDirective.openFilterWizard",function(a,b){b&&(R=b),E()}),b.searchNodeByEnter=function(a){13==a.keyCode&&b.searchNode()},b.searchNodeWithCategory=function(a){O&&(b.searchNodeIndex=a,O.searchNode(b.searchNodeList[a].applicationName,b.searchNodeList[a].serviceType))},b.searchNode=function(){O&&""!==b.searchNodeQuery&&(q.send(q.CONST.MAIN,q.CONST.CLK_SEARCH_NODE),b.searchNodeIndex=0,b.searchNodeList=O.searchNode(b.searchNodeQuery),jQuery(o).find(".search-result").show())},b.clearSearchNode=function(){q.send(q.CONST.MAIN,q.CONST.CLK_CLEAR_SEARCH),O.clearQuery(),b.searchNodeIndex=0,b.searchNodeQuery="",b.searchNodeList=[],jQuery(o).find(".search-result").hide()},b.toggleShowAntStyleHint=function(){b.showAntStyleHint=!b.showAntStyleHint},b.moveToPast=function(){b.$emit("navbarDirective.moveToPast"),U.effect("highlight",{color:"#FFFF00"},1e3)},b.moveToFuture=function(){b.$emit("navbarDirective.moveToFuture"),U.effect("highlight",{color:"#FFFF00"},1e3)},b.toggleToolbar=function(){var a=jQuery(o).find(".servermap-toolbar"),c=jQuery(o).find(".servermap-toolbar-handle span");parseInt(a.css("top"))==-1?(a.find(".search-result").hide(),a.animate({top:-55},"fast",function(){c.addClass("glyphicon-chevron-down").removeClass("glyphicon-chevron-up")})):a.animate({top:-1},"fast",function(){b.searchNodeList.length>0&&a.find(".search-result").show(),c.addClass("glyphicon-chevron-up").removeClass("glyphicon-chevron-down")})},r.init("serverMap")}}}])}(),function(){"use strict";pinpointApp.constant("realtimeChartDirectiveConfig",{params:{TIMEOUT_MAX_COUNT:"timeoutMaxCount",SHOW_EXTRA_INFO:"showExtraInfo",REQUEST_LABEL:"requestLabel",REQUEST_COLOR:"requestColor",CHART_COLOR:"chartColor",NAMESPACE:"namespace",XCOUNT:"xcount",HEIGHT:"height",WIDTH:"width"},responseCode:{ERROR_BLACK:111,TIMEOUT:211},consts:{maxDelayCount:5,verticalGridCount:5},message:{NO_ACTIVE_THREAD:"No Active Thread",NO_RESPONSE:"No Response"}}),pinpointApp.directive("realtimeChartDirective",["realtimeChartDirectiveConfig","CommonUtilService",function(a,b){return{restrict:"EA",replace:!0,template:'<svg width="" height=""></svg>',link:function(c,d,e){function f(){M=d3.select(d.get(0)).attr("width",z.width).attr("height",z.height).append("g").attr("class","base").attr("transform","translate("+(z.showExtraInfo?A.margin.left:0)+","+A.margin.top+")"),M.append("defs").append("clipPath").attr("id","clip-"+z.namespace).append("rect").attr("x",1).attr("y",0).attr("width",B).attr("height",C)}function g(){H.length=0;for(var a=Date.now(),b=0;b<z.requestLabel.length;b++)H.push(d3.range(z.xAxisCount).map(function(){return{y:0,d:a}}))}function h(){N=d3.scale.linear().domain(A.domain).range([0,B]),z.showExtraInfo?M.append("g").attr("class","y axis"):(Q=M.append("g").attr("class","v-grid"),j()),P=M.append("g").attr("class","h-grid"),i()}function i(){O=d3.scale.linear().domain([0,D]).range([C,0]),z.showExtraInfo&&M.selectAll("g.y.axis").call(d3.svg.axis().scale(O).ticks(3).orient("left").tickFormat(A.yAxisFormat)),k()}function j(){for(var b=[],c=0;c<a.consts.verticalGridCount;c++)b.push(K*c);R=Q.selectAll("line").data(b).enter().append("line").attr("class","grid").attr({x1:function(a){return a},x2:function(a){return a},y1:-10,y2:C})[0]}function k(){var a=[],b=M.select("g.y.axis").selectAll("g.tick");if(0!==b.length){jQuery.each(b[0],function(b,c){a.push(parseFloat(c.getAttribute("transform").replace(/translate\(0,(-?[0-9.]*)\)/,"$1")))});var c=P.selectAll("line").data(a);c.enter().append("line").attr("class","grid").transition().attr("x1",0).attr("x2",B).attr("y1",function(a,b){return a}).attr("y2",function(a,b){return a}),c.transition().attr("x1",0).attr("x2",B).attr("y1",function(a){return a}).attr("y2",function(a){return a}),c.exit().remove()}}function l(){T=d3.svg.area().interpolate(A.interpolation).x(function(a,b){return N(b)}).y0(function(a,b){return O(a.y0)}).y1(function(a,b){return O(a.y+a.y0)})}function m(){S=M.append("g").attr("class","pathArea").attr("clip-path","url(#clip-"+z.namespace+")").selectAll("path").data(H).enter().append("path").attr("d",T).attr("class","area ").attr("fill",function(a,b){return z.requestColor[b]})}function n(){W=M.append("g").attr("class","chart-tooltip").attr("transform","translate(-1000, 0)"),W.append("line").attr("x1",A.tooltipWidth).attr("y1",10).attr("x2",A.tooltipWidth).attr("y2",C).attr("class","guideLine"),X=W.append("g").attr("transform","translate(0, 10)"),X.append("rect").attr("width",40).attr("height",90).attr("fill","#000").attr("fill-opacity","0.7"),X.selectAll("text").data(z.requestLabel).enter().append("text").attr("x",function(a,b){return 30}).attr("y",function(a,b){return 20*(z.requestColor.length-b-1)+20+"px"}).attr("fill",function(a,b){return z.requestColor[b]}).attr("text-anchor","end").text(function(a,b){return z.requestLabel[b]}),Y=M.append("text").attr("class","date").attr("x","29%").attr("y","6px").text("")}function o(){z.showExtraInfo!==!1&&M.on("mouseout",function(){W.attr("transform","translate(-1000, 0)"),Y.text(""),F=-1,E=-1}).on("mousemove",function(a){E=parseInt(N.invert(d3.mouse(this)[0])),F=parseInt(d3.mouse(this)[0]),F=F>B?-1e3:F,W.attr("transform","translate("+(F-A.tooltipWidth)+",0)"),q(p(E))})}function p(a){var b=[];if(a===-1)return b;for(var c=0;c<H.length;c++)b.push({y:H[c][a]?H[c][a].y:0,d:H[c][a]?H[c][a].d:Date.now()});return b}function q(a){z.showExtraInfo!==!1&&F!==-1&&E!==-1&&(X.selectAll("text").text(function(b,c){return a[c].y}),Y.text(b.formatDate(a[0].d)))}function r(){z.showExtraInfo!==!1&&(M.append("g").attr("transform",function(a,b){return"translate("+(z.width-A.margin.left-A.margin.right+4+32)+",10)"}).attr("class","request-label").append("text").attr("text-anchor","end").attr("fill","#000").style("font-size","14px").style("font-weight","bold").attr("y","0%").text("Total"),M.append("g").attr("transform",function(a,b){return"translate("+(z.width-A.margin.left-A.margin.right+4+32)+",10)"}).attr("class","request-label").selectAll("text").data(z.requestLabel).enter().append("text").attr("text-anchor","end").attr("fill","#9B9B9B").attr("y",function(a,b){return 20*(4-b)+"%"}).text(function(a,b){return z.requestLabel[b]}),V=M.append("g").attr("transform",function(a,b){return"translate("+(z.width-A.margin.left-A.margin.right+4+70)+",10)"}).attr("class","request-count").append("text").attr("text-anchor","end").attr("fill","#000").attr("y","0%").text("0"),U=M.append("g").attr("transform",function(a,b){return"translate("+(z.width-A.margin.left-A.margin.right+4+70)+",10)"}).attr("class","request-count").selectAll("text").data(z.requestLabel).enter().append("text").attr("text-anchor","end").attr("y",function(a,b){return 20*(4-b)+"%"}).attr("fill",function(a,b){return z.requestColor[b]}).text("0"))}function s(){Z=M.append("text").attr("class","error").attr("y","40%").attr("x","50%"),$=Z.append("tspan").attr("x","50%").attr("dy","0%"),_=Z.append("tspan").attr("x","50%").attr("dy","14px")}function t(a,b){Z.style("fill",a?"#F00":"#000"),b.length>1?(Z.attr("y","20%"),$.text(b[0]),_.text(b[1])):(Z.attr("y","40%"),$.text(b[0]),_.text(""))}function u(a){if(z.showExtraInfo!==!1){var b=0;U.data(a).text(function(a,c){return"undefined"!=typeof a.y?(b+=a.y,a.y):""}),V.text(b)}}function v(){J=0}function w(){ba=ba.each(function(){if(J++,0===G.length)return void(J>a.consts.maxDelayCount&&z.showExtraInfo===!1&&t(!1,[a.message.NO_RESPONSE]));v();var b=G.shift();u(b),i(),z.showExtraInfo===!1&&x();var c=0;for(c=0;c<H.length;c++)H[c].push(b[c]);for(aa(H),l(),y(),c=0;c<H.length;c++)H[c].shift();q(p(E))}).transition().each("start",function(){w()})}function x(){for(var a=0,b=0;b<R.length;b++)a=Math.max(a,parseInt(d3.select(R[b]).attr("x1")));var c=N(0)*L++,d=a+K;Q.transition().attr("transform","translate("+c+")").each("end",function(){for(var a=0;a<R.length;a++){var b=d3.select(R[a]),e=parseInt(b.attr("x1"));e<Math.abs(c)&&(b.attr({x1:d,x2:d}),d+=K)}})}function y(){S.data(H).attr("d",T).attr("transform",null).transition().attr("transform","translate("+N(0)+")")}var z={timeoutMaxCount:parseInt(e[a.params.TIMEOUT_MAX_COUNT]),showExtraInfo:"true"===e[a.params.SHOW_EXTRA_INFO],requestLabel:c[e[a.params.REQUEST_LABEL]],requestColor:c[e[a.params.CHART_COLOR]],xAxisCount:parseInt(e[a.params.XCOUNT]),namespace:e[a.params.NAMESPACE],height:parseInt(e[a.params.HEIGHT]),width:parseInt(e[a.params.WIDTH])},A={domain:[1,z.xAxisCount-2],margin:{top:6,left:z.showExtraInfo?38:20,right:80,bottom:6},transaction:{duration:1e3,ease:"linear"},yAxisFormat:d3.format("d"),tooltipWidth:50,interpolation:"basis"},B=z.width-(z.showExtraInfo?A.margin.left+A.margin.right:0),C=z.height-A.margin.top-A.margin.bottom,D=0,E=-1,F=-1,G=[],H=[],I=0,J=0,K=parseInt(B/(a.consts.verticalGridCount-1)),L=1;g();var M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa=d3.layout.stack().y(function(a){return a.y}),ba=d3.select({}).transition().duration(A.transaction.duration).ease(A.transaction.ease);aa(H),f(),h(),l(),m(),n(),o(),r(),s(),w(),c.$on("realtimeChartDirective.onData."+z.namespace,function(a,b,c,d,e){D=d,I=0,t(!1,["",""]),e===!1&&G.push(b.map(function(a){return{y:parseInt(a),d:c}}))}),c.$on("realtimeChartDirective.onError."+z.namespace,function(b,c,d,e){if(D=e,c.code===a.responseCode.TIMEOUT){if(I<z.timeoutMaxCount){if(G.length>0){var f=G[G.length-1];G.push(f.map(function(a){return{d:d,y:a.y,y0:a.y0}}))}}else v(),t(!0,c.message.split("_"));I++}else v(),t(c.code!==a.responseCode.ERROR_BLACK,c.message.split("_"))}),c.$on("realtimeChartDirective.clear."+z.namespace,function(){G.length=0,g(),d.html(""),u([{},{},{},{}]),aa(H),f(),h(),l(),m(),n(),o(),r(),s()}),c.$on("$destroy",function(){})}}}])}(),function(){"use strict";pinpointApp.constant("scatterDirectiveConfig",{scatterDataUrl:"getScatterData.pinpoint",template:"<div id='scatter' style='padding-top:10px;padding-bottom:20px;user-select:none;'></div>",images:{config:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTI2NzMzRDI2QTlGMTFFM0E1RENBRjZGODkwRDBCMEIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTI2NzMzRDM2QTlGMTFFM0E1RENBRjZGODkwRDBCMEIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMjY3MzNEMDZBOUYxMUUzQTVEQ0FGNkY4OTBEMEIwQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMjY3MzNEMTZBOUYxMUUzQTVEQ0FGNkY4OTBEMEIwQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pn/ejkcAAAFwSURBVHjanFKxSsNQFE2CFEtaTNsMCbSQ4lA6GSghi2igo/o/GVz6AfmD/EFGJ7cKDiVLO0hFEByzpG1EA5LUxntC80jFKhi4LzfnnnPfzXmPz7KM+9ezT6iq6gnF+T4Nny88/110VK1WbwRB4OM4vgyC4PVXIQlW9JqRwGo2mzm2XC65zWYzplSnBo1CeFDu1Ov1XhaLhVWpVBimKAqXJInVarWmJGQ42xHjybIcQSSK4rNt29cgOI5jR1Gkk5gLw1DC2LkvWGBCu90eDwaDDOF53hXhhwjf908LHByYBo2ArqZpfnY6HbEYw3XdJ5riAzEajR4LHJxut6syhyhq5c6apt1hdER5EnCIKzFzqPM7fUwkSZrhf+r1+lmaphFqjUZuJIeaYRgT4q7ZqFvxmn7+GAQYBDcRyIGhBs6PN4dyjKLP5/OL4XA4RSAHhlpZs3OO1PF+W3ggwxQ6u7d+v3+7s9Nfd3VrQm3fXf0SYADyptv3yy4A0QAAAABJRU5ErkJggg==",download:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUU3MjQyMUQ2QTlGMTFFM0IxRTY4MjI3MUU5MUUyMzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUU3MjQyMUU2QTlGMTFFM0IxRTY4MjI3MUU5MUUyMzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFRTcyNDIxQjZBOUYxMUUzQjFFNjgyMjcxRTkxRTIzMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFRTcyNDIxQzZBOUYxMUUzQjFFNjgyMjcxRTkxRTIzMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlnySxAAAADPSURBVHjaxFLBDYMwDLQjMgEf4M8E4Y0YgzHaTTpGFuDfARAdoH3DiwmQSLmqRIZSpPLpSTH4krOjc9g5R0cQIDDzgozj2Ffrum6xOTcKtqolSUJCuNlR0UH8WTiZcpPGzEaB3xVWVXVO0/QhOeTgP1rKOU7/QdM0RZ7nd2OMwxc5eHkeixEm+71aKUVhGJLWmoZhoL7vaRxHX7xtW/ZzlHOTgDiKIirL8oTcWnuZ914dsyzbfXfoCuAmdV3z15ezBgRr8Nuc4ocRXhGeAgwAFHJVgfQ6KdUAAAAASUVORK5CYII=",fullscreen:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkMwOTc3QTg2QTlGMTFFMzk5MzhBOTM4OEFCMzg3MTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkMwOTc3QTk2QTlGMTFFMzk5MzhBOTM4OEFCMzg3MTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCQzA5NzdBNjZBOUYxMUUzOTkzOEE5Mzg4QUIzODcxNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQzA5NzdBNzZBOUYxMUUzOTkzOEE5Mzg4QUIzODcxNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvZjiPIAAAE/SURBVHjanFKxaoRAEHXhbM4UopViGWzv0C5VUvsJqdP7A/6Dfb7DMmCVSuRCunClaKUYSKUQM2+zY1SsMjDuuDtv9u3ME9M0af+xAz6u687opmnENslxnFX1uq6FhhvDMKRluofvVeczuMr9vREmhMhRmRy/F3IukhOjM7Mh4B9VNkqQq67rR9u25VnbtsdxHPkZ6zcWRfFAN2qGYVzx3/e9X1XVC2LLsnzTNK8MQK5kCL4AwcqylPTiOH4m8C1igNI0fUIcBEGu3rwGRlFkK3qvRM9XtD+I9h3iLMvaXaDneRdF78T0cHPXdW+Iif6ZgavmALClB9q0nBRw3RyMAa0mWnJzGIbvJEneOeb9hRgEK0e2mjtG9kX+qeJH8hs163lkh2UlVWAruYIlp8ShzeNYqEQqaE9ym638R4ABADZiqF446UJLAAAAAElFTkSuQmCC",error:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADvUlEQVRoge2ZQW8bRRTHf2+2tMTrkCYFkQ9QqBBKC03aOOkldqtKUcUFqeUbkAN3pFSIGxQOFRx6IN8AJeIYtVIc1xdqHAdCE3EgKeeqNAlV8dIm8u7j0FasHW+8u7E3Rcrv9mbe7P7/mtHsmx044IA9Ie14iI4fP1LdPjYKZEEHBE4g9KOkAUVwUO4rrIIuI9bt9CvrJbl5b2uv796TASc7POgJEyJ6BeiJOPyRotNGrSm78NMvcTXEMuDkMqfVeNdQLsZ9cQO3MDqZnqv8GnVgJAM6MtLlpLyvQD8BrKgva0EN0Rt2zZ6UYvFp2EGhDTzODp0wRmZABuLpC81d18jlnrnyWpjkUAac82fOqMoswht70xaaTU/1g9cKlTutElsa+CebGVbj5RXS7dEWDoGqqHc+VVhcaJEXzLNlY34EjrVVXXjWXSOjuy0nE9ShY2OvGmO+Z//EA7xued4POjLSFZQQaMCxnnwNvNcRWZGQAafL/SKwt1mjk8ucVvEWaP9WGRcXo0PNvhNNZ0CNd42XRzyAhUrTWdgxA052eFCNLnZeU2RUxBu084tL/sYdM+AJE8lpioR4mI93NPoDHT9+xNnue0D0wiwZhL/sXqdfZn7bftFUNwPVrb5zvKziAZTe6kYq42+qX0IiY0nqiYWRXF1Y1yneqUTFxEE56Q8P+QNReSvsc+x8uV2SAHAuDIfKE3jbHzfuQm+2S1AHqdPYaCDRijMm3f4gsBb6v9BooLovKqKgPPaHjQYeJCglHsKf/rBuF1JYFXgnzHPC7hrtRlR+98cNM6B3kxQTD132Rw0GTDFBJbFwhYI/rjOQPrxxB3iUqKJobHb3OXVf0DoDcvPelqrMJKspPCpM+ytRaPIdMMh3yUmKhIroVGPjDgPPf7TeSkRSNGZDn4kR61Og1mlFEajh8VmzjqYG0vnSCqI3OqspAqLfpm8vNN3iA2shu2ZPAktB/QmybDuHPg/qDDQgxeJT18hHwHpHZIVBeVhT90MplZ4EpexajfbMldeMepdkH4o8gaqIXjpa+PmP3fJaltPP/g5rDuVh++S1ZFPgoj1fqbRKDHUesOcrFdeSc0AStdJSTd2zqfmFUpjk0Aeanrnymu2mMijf0JkttgZy3XZTo62WjZ9Yl3zV7NlTWHyJMh73GT4UmEWsq+l8aSXq4L1ds14Yet9TMyHCFZTeiMM3VZgW0ak4t5MvaM9F9+V3D1c3UhmM5FBOPv/10c9/B/C/Ue4LsuoZXVFlvrvPKTcWZgccsA/8C1bvKjPyfF8QAAAAAElFTkSuQmCC"},options:{containerId:"",containerClass:"bigscatterchart",width:400,height:250,minX:0,maxX:1e3,minY:0,maxY:1e4,minZ:0,maxZ:5,bubbleSize:3,labelX:"",labelY:"(ms)",realtime:!1,chartAnimationTime:300,gridAxisStyle:{lineWidth:1,lineDash:[1,0],globalAlpha:1,strokeStyle:"#e3e3e3"},padding:{top:40,left:50,right:40,bottom:30},typeInfo:{0:["Failed","#d62728",20],1:["Success","#2ca02c",10]},propertyIndex:{x:0,y:1,meta:2,transactionId:3,type:4,groupCount:5},checkBoxImage:{checked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODk0MjRENUI2Qjk2MTFFM0E3NkNCRkIyQTkxMjZFQjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODk0MjRENUM2Qjk2MTFFM0E3NkNCRkIyQTkxMjZFQjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OTQyNEQ1OTZCOTYxMUUzQTc2Q0JGQjJBOTEyNkVCMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OTQyNEQ1QTZCOTYxMUUzQTc2Q0JGQjJBOTEyNkVCMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkJ02akAAAEfSURBVHjalJI/aoRQEMbnrU8RRVYsBAXJASxEtLGRXEDIJXKTpPcOHiDl1gsp1QvEIiD2AbGLmpm3f7Is68YMjOOb9/0Y/Rg2zzPEcTzDP6IsS7Y5QXTAsibFIH4BQVVVi1Mcx9liyTFN13W/+JpPI0iSpL1hGEHf9+E0TSBAxtifkGVZgSzLgBkMwwCbNZNOEIVpmo3v+78gigLMt+O/3IR0XW/yPH/uuu4AEqQoComeSIznhyUoDMP3cRwPoKZpLyjaqqoKJOacfy5B6Mc39QRYFMUrOtbQO4lt24Z70BlMkqSkSxJdmrMEiYiiSGwOrh6v6/oxTdMP6lGlM/Wv3RYMPY55hrMs292DKNn1kqOb4HketG0L5N5CsB8BBgCZjoUNsxfiYwAAAABJRU5ErkJggg==",unchecked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEQxQ0ZERUQ2Qjk2MTFFMzg5MjNGMjAzRjdCQ0FEMjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEQxQ0ZERUU2Qjk2MTFFMzg5MjNGMjAzRjdCQ0FEMjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RDFDRkRFQjZCOTYxMUUzODkyM0YyMDNGN0JDQUQyOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RDFDRkRFQzZCOTYxMUUzODkyM0YyMDNGN0JDQUQyOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq1+Js8AAABTSURBVHjaYvz//z+DiYnJfwYSwJkzZxgZjY2NYZoYidQHVs9Eoia4WhY0JxDUBfQWA7KNRGlCVsfEQCYY1UhLjf9hEUtEAgAnOUZyEjlIH0CAAQDn/BlKI9rDJAAAAABJRU5ErkJggg=="}}}),pinpointApp.directive("scatterDirective",["scatterDirectiveConfig","$rootScope","$compile","$timeout","webStorage","$window","$http","UrlVoService","CommonAjaxService","TooltipService","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k,l){return{template:a.template,restrict:"EA",replace:!0,scope:{namespace:"@"},link:function(c,g,m){function n(g,i,n,o,p){var q=h.getQueryStartTime(),r=h.getQueryEndTime(),s=h.getFilter(),t=i.split("^")[0],v={};angular.copy(a.options,v),v.sPrefix="BigScatterChart2-"+parseInt(1e5*Math.random()),v.containerId=g,v.width=n?n:v.width,v.height=o?o:v.height,v.minX=q,v.maxX=r,v.errorImage=a.images.error,v.realtime=h.isRealtime()&&x;var y=new BigScatterChart2(v,u(p),[new BigScatterChart2.SettingPlugin(a.images.config).addCallback(function(a,b){e.add("scatter-y-min"+c.namespace,b.min),e.add("scatter-y-max"+c.namespace,b.max),a.changeRangeOfY(b),a.redraw()}),new BigScatterChart2.DownloadPlugin(a.images.download,"PNG").addCallback(function(a){k.send(k.CONST.MAIN,k.CONST.CLK_DOWNLOAD_SCATTER)}),new BigScatterChart2.WideOpenPlugin(a.images.fullscreen).addCallback(function(){var a=h.isRealtime()&&x?"realtime/"+h.getQueryEndDateTime():h.getPartialURL(!1,!0);f.open("#/scatterFullScreenMode/"+w.applicationName+"@"+w.serviceType+"/"+a+"/"+u().join(","),"width=900, height=700, resizable=yes")}),new BigScatterChart2.HelpPlugin(j)],{sendAnalytics:function(a,b){k.send(k.CONST.MAIN,k.CONST["Success"===a?"TG_SCATTER_SUCCESS":"TG_SCATTER_FAILED"],k.CONST[b?"ON":"OFF"])},loadFromStorage:function(a){return e.get(a+c.namespace)},onSelect:function(a,b){if(5===arguments.length)f.open("#/transactionList/"+h.getPartialURL(!0,!1),i+"|"+arguments[0]+"|"+arguments[1]+"|"+arguments[2]+"|"+arguments[3]+"|"+arguments[4]);else{var c=i+"|"+b.fromX+"|"+b.toX+"|"+b.fromY+"|"+b.toY+"|"+arguments[2]+"|"+arguments[3];f.open("#/transactionList/"+h.getPartialURL(!0,!1),c)}},onError:function(){}},l.getAgentAllStr());return d(function(){angular.isUndefined(p)?y.drawWithDataSource(new BigScatterChart2.DataLoadManager(t,s,{url:a.scatterDataUrl,realtime:h.isRealtime()&&x,realtimeInterval:2e3,realtimeDefaultTimeGap:3e3,realtimeResetTimeGap:2e4,fetchLimit:5e3,fetchingInterval:2e3,useIntervalForFetching:!1},function(a,c,d){h.setQueryEndDateTime(c),b.$broadcast("nodeInfoDetailsDirective.loadRealTimeChartData",t,y.getCurrentAgent(),a.min,a.max)})):y.addBubbleAndMoveAndDraw(y.createDataBlock(p)),"forMain"!==m.namespace&&"forFilteredMap"!==m.namespace||(f.htoScatter[i]=y)},100),y}function o(a,b,c){g.children().hide(),s(),angular.isDefined(v[a])?(v[a].target.show(),h.isRealtime()&&x?i.getServerTime(function(b){v[a].scatter.resume(b-l.getRealtimeScatterXRange(),b),v[a].scatter.selectAgent(l.getAgentAllStr(),!0)}):(v[a].scatter.resume(),v[a].scatter.selectAgent(l.getAgentAllStr(),!0))):q(a,b,c)}function p(a,b,c,d){angular.isDefined(v[a])?v[a].scatter.addBubbleAndMoveAndDraw(v[a].scatter.createDataBlock(d)):(q(a,b,c,d),v[a].target.hide())}function q(b,c,d,e){var f=angular.element(a.template),h=n(f,b,c,d,e);v[b]={target:f,scatter:h},g.append(f)}function r(a){g.children().hide(),angular.isDefined(v[a])&&(v[a].target.show(),v[a].scatter.selectAgent(l.getAgentAllStr(),!0))}function s(){angular.forEach(v,function(a,b){a.scatter.pause()})}function t(){for(var a in v)v[a].scatter.abort();v={}}function u(a){var b={},c=[];return"undefined"!=typeof a?($.each(a.scatter.metadata,function(a,d){"undefined"==typeof b[d[0]]&&(b[d[0]]=!0,c.push(d[0]))}),c):w&&w.agentIds?w.agentIds:void 0}var v={},w=null,x="true"==m.enableRealtime;c.$on("scatterDirective.initialize."+c.namespace,function(a,b){t(),g.empty()}),c.$on("scatterDirective.initializeWithNode."+c.namespace,function(a,b,d,e){c.currentAgent=l.getAgentAllStr(),w=b,o(b.key,d,e)}),c.$on("scatterDirective.initializeWithData."+c.namespace,function(a,b,d){c.currentAgent=l.getAgentAllStr();var e=b.split("^");w={applicationName:e[0],serviceType:e[1],key:b},p(b,null,null,d)}),c.$on("scatterDirective.showByNode."+c.namespace,function(a,b){w=b,r(b.key)}),c.$on("responseTimeSummaryChartDirective.showErrorTransactionList."+c.namespace,function(b,c){f.htoScatter[w.key].selectType("Failed").fireDragEvent({animate:function(){},css:function(b){return"left"===b?a.options.padding.left+"px":"top"===b?a.options.padding.top+"px":"0px"},width:function(){return a.options.width-a.options.padding.left-a.options.padding.right},height:function(){return a.options.height-a.options.padding.top-a.options.padding.bottom}})}),c.$on("changedCurrentAgent."+c.namespace,function(a,b){w&&w.key&&v[w.key].scatter.selectAgent(b)}),c.$on("scatterDirective.stopRequest."+c.namespace,function(a){s()})}}}])}(),function(){"use strict";pinpointApp.constant("groupedApplicationListDirectiveConfig",{}),pinpointApp.directive("groupedApplicationListDirective",["groupedApplicationListDirectiveConfig","$rootScope","$window","filteredMapUtilService","ServerMapFilterVoService","ServerMapHintVoService","AnalyticsService",function(a,b,c,d,e,f,g){return{restrict:"EA",replace:!0,templateUrl:"features/groupedApplicationList/groupedApplicationList.html?v="+G_BUILD_TIME,link:function(a){var h;a.node,a.selectedNode=null,a.selectedLink=null,a.isGroupedNode=!1,a.isGroupedLink=!1,a.searchKeyword={},a.totalCount=0,a.groupedApplicationList=[],a.isSelectedNode=function(b){return a.selectedNode&&b.key===a.selectedNode.key?"selected":""},a.isSelectedLink=function(b){return a.selectedLink&&b.key===a.selectedLink.key?"selected":""},a.onSelectNodeApplication=function(c){g.send(g.CONST.CLK_NODE_IN_GROUPED_VIEW),a.selectedNode=c,b.$broadcast("nodeInfoDetailsDirective.initialize",c,h,!0)},a.onSelectLinkApplication=function(c){g.send(g.CONST.CLK_LINK_IN_GROUPED_VIEW),a.selectedLink=c,b.$broadcast("nodeInfoDetailsDirective.initialize",{from:"",to:"",histogram:c.histogram,timeSeriesHistogram:c.timeSeriesHistogram},h,!0)},a.openFilteredMapWindow=function(a){var b=new e;b.setMainApplication(a.filterApplicationName).setMainServiceTypeName(a.filterApplicationServiceTypeName).setMainServiceTypeCode(a.filterApplicationServiceTypeCode).setFromApplication(a.sourceInfo.applicationName).setFromServiceType(a.sourceInfo.serviceType).setToApplication(a.targetInfo.applicationName).setToServiceType(a.targetInfo.serviceType);var g=new f;a.sourceInfo.isWas&&a.targetInfo.isWas&&g.setHint(a.toNode.applicationName,a.filterTargetRpcList),c.open(d.getFilteredMapUrlWithFilterVo(h,b,g),"")},a.openFilterWizard=function(b){a.$emit("main.controller.openFilterWizard",b)},a.$on("groupedApplicationListDirective.hide",function(){a.isGroupedNode=!1,a.isGroupedLink=!1}),a.$on("groupedApplicationListDirective.initialize",function(b,c,d){a.selectedNode=null,a.selectedLink=null,a.searchKeyword={},c.unknownNodeGroup&&c.unknownNodeGroup.length>0?(g.send(g.CONST.CLK_SHOW_GROUPED_NODE_VIEW),h=d,a.node=c,a.totalCount=c.totalCount,a.groupedApplicationList=c.unknownNodeGroup,a.isGroupedNode=!0,a.isGroupedLink=!1):c.unknownLinkGroup&&c.unknownLinkGroup.length>0?(g.send(g.CONST.CLK_SHOW_GROUPED_LINK_VIEW),h=d,a.totalCount=c.totalCount,a.groupedApplicationList=c.unknownLinkGroup,a.isGroupedNode=!1,a.isGroupedLink=!0):(a.isGroupedNode=!1,a.isGroupedLink=!1),"$apply"!=a.$$phase&&"$digest"!=a.$$phase&&"$apply"!=a.$root.$$phase&&"$digest"!=a.$root.$$phase&&a.$digest()})}}}])}(),function(){"use strict";pinpointApp.directive("nodeInfoDetailsDirective",["$timeout","SystemConfigurationService","PreferenceService","UrlVoService","AgentHistogramDaoService","TooltipService",function(a,b,c,d,e,f){return{replace:!0,restrict:"EA",templateUrl:"features/nodeInfoDetails/nodeInfoDetails.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(a,g){function h(b,c,d,e,f){a.$broadcast("responseTimeSummaryChartDirective.initAndRenderWithData."+b,c,d,e,f,!1,!0)}function i(b,c,d,e,f,g){a.$broadcast("loadChartDirective.initAndRenderWithData."+b,c,d,e,f,g)}function j(b,c,d){a.$broadcast("responseTimeSummaryChartDirective.updateData."+b,c,d)}function k(b,c,d){a.$broadcast("loadChartDirective.updateData."+b,c,d)}function l(b){a.isGroup=!(!b.unknownNodeGroup&&!b.unknownLinkGroup),a.isWas=!angular.isUndefined(b.isWas)&&b.isWas,b.from&&b.to?a.isNode=!1:(a.isNode=!0,a.isAuthorized=b.isAuthorized!==!1),s=b}function m(a,b,c){A?a(A):e.loadAgentHistogram(s,B,function(b,c){"success"===b&&(A=c,a(c))},b,c)}function n(b,d,e,f){if(v===!1){v=!0,A=null;var g=Date.now();m(function(d){var e=null,h=null;b===c.getAgentAllStr()?(e=d.histogram,h=d.timeSeriesHistogram):(e=d.agentHistogram[b],h=d.agentTimeSeriesHistogram[b]),j(a.namespace,e,u.responseSummaryChart),k(a.namespace,h,u.loadChart),o(d.currentServerTime),v=!1,f(Date.now()-g)},d,e)}}function o(a){x=a,w=x-y}function p(a){r=setTimeout(function(){n(c.getAgentAllStr(),w,x,function(a){p(Math.max(0,z-a))})},a)}function q(){r&&clearTimeout(r)}a.isWas=!1,a.isGroup=!1,a.isAuthorized=!0,b.getConfig().then(function(b){a.securyGuideUrl=b.securityGuideUrl});var r,s,t=c.getAgentAllStr(),u={},v=!1,w=-1,x=-1,y=3e5,z=2e3,A=null,B=null;a.isNotAuthorized=function(){return a.isAuthorized===!1},a.$on("nodeInfoDetailsDirective.initialize",function(b,c,e,f){l(c),B=e,A=null,v=!1,q(),a.isGroup?a.showNodeInfoDetails=!1:(d.isRealtime()&&a.isWas===!1?p(0):(h(a.namespace,c.histogram,null,"100%","150px"),i(a.namespace,c.timeSeriesHistogram,null,"100%","220px",!0)),a.showNodeInfoDetails=!0),"$apply"!=a.$$phase&&"$digest"!=a.$$phase&&"$apply"!=a.$root.$$phase&&"$digest"!=a.$root.$$phase&&a.$digest()}),a.$on("nodeInfoDetailsDirective.hide",function(){a.showNodeInfoDetails=!1}),a.$on("changedCurrentAgent."+a.namespace,function(b,d,e){t=d,B.isRealtime()===!1&&m(function(b){var f=null,g=null;d===c.getAgentAllStr()?(f=s.histogram,g=s.timeSeriesHistogram):(f=b.agentHistogram[d],g=b.agentTimeSeriesHistogram[d]),h(a.namespace,f,e.responseSummaryChart,"100%","150px"),i(a.namespace,g,e.loadChart,"100%","220px",!0)})}),a.$on("nodeInfoDetailsDirective.loadRealTimeChartData",function(a,b,c,d,e){q(),n(c,d,e,function(){})}),a.$on("loadChartDirective.saveMax."+a.namespace,function(a,b){t===c.getAgentAllStr()&&(u.loadChart=b)}),a.$on("responseTimeSummaryChartDirective.saveMax."+a.namespace,function(a,b){t===c.getAgentAllStr()&&(u.responseSummaryChart=b)}),a.$on("responseTimeSummaryChartDirective.itemClicked."+a.namespace,function(a,b){}),f.init("responseSummaryChart"),f.init("loadChart")}}}])}(),function(a){"use strict";pinpointApp.directive("serverListDirective",["$timeout","$window","AnalyticsService",function(b,c,d){return{restrict:"EA",replace:!0,templateUrl:"features/serverList/serverList.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(e,f){function g(){m.animate({right:421},500,function(){})}function h(a,b,c){e.selectedAgent=a,e.$broadcast("changedCurrentAgent.forServerList",a),l?(e.$broadcast("responseTimeSummaryChartDirective.updateData.forServerList",b,j.responseSummaryChart),e.$broadcast("loadChartDirective.updateData.forServerList",c,j.loadChart)):(e.$broadcast("responseTimeSummaryChartDirective.initAndRenderWithData.forServerList",b,j.responseSummaryChart,"100%","150px",!1,!0),e.$broadcast("loadChartDirective.initAndRenderWithData.forServerList",c,j.loadChart,"100%","220px",!1,!0),l=!0)}function i(a,c,d,f){e.node=c,e.serverHistogramData=d,e.oNavbarVoService=f,e.hasScatter=!1,d?(e.serverList=d.serverList,c.isWas&&(e.hasScatter=!0,"forMain"===e.namespace?e.$broadcast("scatterDirective.initializeWithNode.forServerList",c):e.$broadcast("scatterDirective.showByNode.forServerList",c)),b(function(){var a=m.find("._node input[type=radio][checked]").val();try{h(a,d.agentHistogram[a],d.agentTimeSeriesHistogram[a])}catch(b){}})):(e.serverList=c.serverList,c.isWas&&(e.hasScatter=!0,"forMain"===e.namespace?e.$broadcast("scatterDirective.initializeWithNode.forServerList",c):e.$broadcast("scatterDirective.showByNode.forServerList",c)),b(function(){var a=m.find("._node input[type=radio][checked]").val();try{h(a,e.node.agentHistogram[a],e.node.agentTimeSeriesHistogram[a])}catch(b){}}))}var j,k=!1,l=!1,m=a(f);e.hasScatter=!1,e.selectedAgent="",e.isWasNode=function(){
return e.node&&e.node.isWas},e.hideLayer=function(a){a=a||100,m.animate({right:-386},a,function(){k=!1})},e.hasError=function(a){var b=e.serverHistogramData.agentHistogram[a];return b&&b.Error&&b.Error>0?"red":""},e.openInspector=function(a,b){a.preventDefault(),d.send(d.CONST.MAIN,d.CONST.CLK_OPEN_INSPECTOR),c.open("#/inspector/"+(e.node.applicationName||e.node.filterApplicationName)+"@"+(e.node.serviceType||"")+"/"+e.oNavbarVoService.getReadablePeriod()+"/"+e.oNavbarVoService.getQueryEndDateTime()+"/"+b)},e.selectServer=function(a){e.serverHistogramData?h(a,e.serverHistogramData.agentHistogram[a],e.serverHistogramData.agentTimeSeriesHistogram[a]):h(a,e.node.agentHistogram[a],e.node.agentTimeSeriesHistogram[a])},e.$on("serverListDirective.initialize",function(a,b){e.node=null,e.oNavbarVoService=null,e.selectedAgent="",e.hasScatter=!1,e.$broadcast("scatterDirective.initialize.forServerList",b),e.hideLayer(0)}),e.$on("serverListDirective.show",function(a,b,c,d,f,h){return k===!0?void e.hideLayer():(k=!0,j=f,(angular.isUndefined(e.node)||null===e.node||e.node.key!==c.key)&&i(b,c,d,h),void g())}),e.$on("serverListDirective.setData",function(a,b,c,d,f){(angular.isUndefined(e.node)||null===e.node||e.node.key!==c.key)&&i(b,c,d,f)})}}}])}(jQuery),function(){"use strict";pinpointApp.constant("agentListDirectiveConfig",{ID:"AGENT_LIST_DRTV_",AGENT_STATE_INFO:{sign:{100:"ok-sign",200:"minus-sign",201:"minus-sign",300:"remove-sign","-1":"question-sign"},color:{100:"#40E340",200:"#F00",201:"#F00",300:"#AAA","-1":"#AAA"}}}),pinpointApp.directive("agentListDirective",["agentListDirectiveConfig","CommonUtilService","UrlVoService","AgentAjaxService","PreferenceService","TooltipService","AnalyticsService",function(a,b,c,d,e,f,g){return{restrict:"EA",replace:!0,templateUrl:"features/agentList/agentList.html?v="+G_BUILD_TIME,link:function(e){function h(){f.init("agentList"),e.agentGroup=[],e.currentAgent=null,i(!1)}function i(b){d.getAgentList({application:c.getApplicationName(),from:c.getQueryStartTime(),to:c.getQueryEndTime()},function(d){d.errorCode||d.status||(e.agentGroup=d,b?e.currentAgent=null:(e.currentAgent=j(c.getAgentId()),null===e.currentAgent?e.$emit("up.select.application",a.ID):(g.send(g.CONST.INSPECTOR,g.CONST.CLK_CHANGE_AGENT_INSPECTOR),e.$emit("up.changed.agent",a.ID,e.currentAgent,!0))))})}function j(a){for(var b in e.agentGroup)for(var c in e.agentGroup[b])if(e.agentGroup[b][c].agentId===a)return e.agentGroup[b][c];return null}function k(b,c){g.send(g.CONST.INSPECTOR,g.CONST.CLK_CHANGE_AGENT_INSPECTOR),e.currentAgent=b,e.$emit("up.changed.agent",a.ID,b,c)}a.ID+=b.getRandomNum(),h(),e.getApplicationName=function(){return c.getApplicationName()},e.getServiceType=function(){return c.getServiceType()},e.selectApplication=function(){e.currentAgent=null,e.$emit("up.select.application",a.ID)},e.selectAgent=function(a){e.currentAgent!==a&&k(a,!1)},e.getState=function(b){return a.AGENT_STATE_INFO.sign[b+""]},e.getStateColor=function(b){return a.AGENT_STATE_INFO.color[b+""]},e.$on("down.changed.application",function(b,c){a.ID!==c&&i(!0)}),e.$on("down.changed.period",function(b,c){a.ID!==c&&i(!1)})}}}])}(),function(a){pinpointApp.constant("agentInfoDirectiveConfig",{ID:"AGENT_INFO_DRTV_"}),pinpointApp.directive("agentInfoDirective",["agentInfoDirectiveConfig","$sce","$timeout","CommonUtilService","UrlVoService","AlertsService","ProgressBarService","AgentDaoService","ResponseTimeChartDaoService","ActiveThreadChartDaoService","TPSChartDaoService","CPULoadChartDaoService","MemoryChartDaoService","OpenFileDescriptorDaoService","DirectBufferDaoService","AgentAjaxService","TooltipService","AnalyticsService","helpContentService",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return{restrict:"EA",replace:!0,templateUrl:"features/agentInfo/agentInfoMain.html?v"+G_BUILD_TIME,link:function(d,h,u){function v(a){d.targetPicker=moment(a).format("YYYY-MM-DD HH:mm:ss")}function w(b,c,e){null!==V?(V.resetTimeSeriesAndSelectionZone(b,c?c:C(b),e),S(d.agent.agentId,c||C(b))):(V=new TimeSlider("timeSlider-for-agent-info",{width:a("#timeSlider-for-agent-info").get(0).getBoundingClientRect().width,height:90,handleSrc:"images/handle.png",timeSeries:c?c:C(b),handleTimeSeries:b,selectTime:b[1],timelineData:{}}).addEvent("clickEvent",function(a){B(a[2])}).addEvent("selectTime",function(a){d.selectTime=a,A(a),v(a),x(V.getSliderTimeSeries(),V.getSelectionTimeSeries(),a)}).addEvent("changeSelectionZone",function(a){z(d.agent.agentId,a,y(a[0],a[1]),function(){}),x(V.getSliderTimeSeries(),a,V.getSelectTime())}).addEvent("changeSliderTimeSeries",function(a){}),S(d.agent.agentId,c||C(b)))}function x(a,b,c){d.$emit("up.changed.timeSliderOption",a,b,c)}function y(a,b){return(b-a)/1e3/60}function z(a,b,c){var e={agentId:a,from:b[0],to:b[1],sampleRate:i.getSampleRate(c)};q.getJVMChartData(e,function(a){angular.isDefined(a.type)&&(d.agent.jvmGcType=a.type),F(a)}),q.getCpuLoadChartData(e,function(a){G(a)}),q.getTPSChartData(e,function(a){H(a)}),q.getActiveTraceChartData(e,function(a){I(a)}),q.getResponseTimeChartData(e,function(a){J(a)}),q.getDataSourceChartData(e,function(a){Y=a,Q()}),q.getOpenFileDescriptorChartData(e,function(a){K(a)}),q.getDirectBufferChartData(e,function(a){var b=p.parseData(a);L(b),M(b),N(b),O(b)})}function A(a){q.getAgentInfo({agentId:d.agent.agentId,timestamp:a},function(a){var b=d.agent.jvmGcType;d.agent=a,d.agent.jvmGcType=b,d.currentServiceInfo=E(a)})}function B(a){q.getEventList({agentId:d.agent.agentId,from:a.startTimestamp,to:a.endTimestamp},function(a){a.errorCode||a.status?X.showError("There is some error."):(d.eventInfo=a,d.showEventInfo=!0)})}function C(a){var b=a[0],c=a[1],d=TimeSlider.MAX_TIME_RANGE,e=c-b;if(e>d)return[c-d,c];var f=3*e;return f>d?[c-d,c]:[c-f,c]}function D(){W===!1&&(["heap","permGen","cpuUsage","tps","activeThread","responseTime","dataSource","openFileDescriptor","directBufferCount","directBufferMemory","mappedBufferCount","mappedBufferMemory"].forEach(function(a){r.init(a)}),W=!0)}function E(a){if(a.serverMetaData&&a.serverMetaData.serviceInfos)for(var b=a.serverMetaData.serviceInfos,c=0;c<b.length;++c)if(b[c].serviceLibs.length>0)return b[c]}function F(a){var b=n.parseHeapData(a);d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-heap",b,n.getChartOptions(b),"100%","270px");var c=n.parseNonHeapData(a);d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-non-heap",c,n.getChartOptions(c),"100%","270px")}function G(a){var b=m.parseData(a);d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-cpu-load",b,m.getChartOptions(b),"100%","270px")}function H(a){var b=l.parseData(a);d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-tps",b,l.getChartOptions(b),"100%","270px")}function I(a){var b=k.parseData(a);d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-active-thread",b,k.getChartOptions(b),"100%","270px")}function J(a){var b=j.parseData(a);d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-response-time",b,j.getChartOptions(b),"100%","270px")}function K(a){var b=o.parseData(a);d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-open-file-descriptor",b,o.getChartOptions(b),"100%","270px")}function L(a){d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-direct-buffer-count",a,p.getDirectBufferCountChartOptions(a),"100%","270px")}function M(a){d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-direct-buffer-memory",a,p.getDirectBufferMemoryChartOptions(a),"100%","270px")}function N(a){d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-mapped-buffer-count",a,p.getMappedBufferCountChartOptions(a),"100%","270px")}function O(a){d.$broadcast("agentInspectorChartDirective.initAndRenderWithData.agent-mapped-buffer-memory",a,p.getMappedBufferMemoryChartOptions(a),"100%","270px")}function P(a,b,c,d,e,f,g){var i=0===arguments.length;h.find(".ds-active-avg").html(i?"-":a),h.find(".ds-active-max").html(i?"-":b),h.find(".ds-total-max").html(i?"-":c),h.find(".ds-id").html(i?"-":d),h.find(".ds-type").html(i?"-":e),h.find(".ds-database-name").html(i?"-":f),h.find(".ds-jdbc-url").html(i?"-":g)}function Q(){d.dataSourceChartCheckedKeys={},d.dataSourceChartKeys=Y.map(function(a,b){var c=Z+a.id;return d.dataSourceChartCheckedKeys[c]=b<30,{display:a.databaseName?a.databaseName:a.id,value:c}}),d.$broadcast("dsChartDirective.initAndRenderWithData.agent-data-source",i.parseDataSourceChartDataForAmcharts(Y,Z),d.dataSourceChartCheckedKeys,"100%","270px")}function R(a,b){for(var c=parseInt(a.split("_")[1]),d=0;d<Y.length;d++){var e=Y[d];e.id==c&&P(e.charts.y.ACTIVE_CONNECTION_SIZE[b][2],e.charts.y.ACTIVE_CONNECTION_SIZE[b][1],e.charts.y.MAX_CONNECTION_SIZE[b][1],e.id,e.serviceType,e.databaseName,e.jdbcUrl)}}function S(a,b){q.getAgentTimeline({agentId:a,from:b[0],to:b[1]},function(a){a.errorCode||a.status?X.showError("There is some error."):V.addData(a)})}function T(){a("._wrongApp").popover("destroy")}function U(a,b,c){v(c),w(a,b,c)}b.ID+=e.getRandomNum(),d.agent={},d.showEventInfo=!1,d.showDetail=!1,d.selectTime=-1,d.selectedDSIndex=0;var V=null,W=!1,X=new g,Y=[],Z="source_";d.dataSourceChartKeys=[],d.dataSourceChartCheckedKeys=[],d.checkChecked=function(a){return d.dataSourceChartCheckedKeys[a]},d.changeDataSource=function(a){var b=a.target.tagName.toUpperCase();"INPUT"===b&&d.$broadcast("dsChartDirective.toggleGraph.agent-data-source",a.target.value,a.target.checked)},d.selectAllDataSource=function(){for(var a in d.dataSourceChartCheckedKeys)d.dataSourceChartCheckedKeys[a]=!0;d.dataSourceChartKeys=d.dataSourceChartKeys.map(function(a){return{display:a.display,value:a.value}}),d.$broadcast("dsChartDirective.toggleGraphAll.agent-data-source")},d.hasDataSource=function(){return 0!==Y.length&&0!==Y[0].charts.y.ACTIVE_CONNECTION_SIZE.length},d.toggleSourceSelectLayer=function(){h.find("#data-source-chart .type-select-layer").toggle()},d.toggleHelp=function(){a("._wrongApp").popover({title:"<span class='label label-info'>"+f.getApplicationName()+"</span> <span class='glyphicon glyphicon-resize-horizontal'></span> <span class='label label-info'>"+d.agent.applicationName+"</span>",content:t.inspector.wrongApp.replace(/\{\{application1\}\}/g,f.getApplicationName()).replace(/\{\{application2\}\}/g,d.agent.applicationName).replace(/\{\{agentId\}\}/g,d.agent.agentId),html:!0}).popover("toggle")},d.isSameApplication=function(){return d.agent.applicationName===f.getApplicationName()},d.formatDate=function(a){return moment(a).format("YYYY.MM.DD HH:mm:ss")},d.hideEventInfo=function(){d.showEventInfo=!1},d.movePrev=function(){V.movePrev(),S(d.agent.agentId,V.getSliderTimeSeries())},d.moveNext=function(){V.moveNext(),S(d.agent.agentId,V.getSliderTimeSeries())},d.moveHead=function(){V.moveHead(),S(d.agent.agentId,V.getSliderTimeSeries())},d.zoomInTimeSlider=function(){V.zoomIn(),S(d.agent.agentId,V.getSliderTimeSeries())},d.zoomOutTimeSlider=function(){V.zoomOut(),S(d.agent.agentId,V.getSliderTimeSeries())},d.toggleShowDetail=function(b){s.send(s.CONST.INSPECTOR,s.CONST.CLK_SHOW_SERVER_TYPE_DETAIL),d.showDetail=!d.showDetail,d.showDetail===!0?a(".detailIndicator").animate({left:a(b.currentTarget).position().left}):a(".detailIndicator").css("left","0px")},d.hasDuplicate=function(a,b){for(var c=d.currentServiceInfo.serviceLibs.length,e=!1,f=0;f<c;f++)if(d.currentServiceInfo.serviceLibs[f]==a&&f!=b){e=!0;break}return e?"color:#F00":""},d.selectServiceInfo=function(a){a.serviceLibs.length>0&&(d.currentServiceInfo=a)},d.formatDate=function(a){return e.formatDate(a,"YYYY-MM-DD HH:mm:ss Z")},d.replaceNewLineToBR=function(a){return a?c.trustAsHtml(a.replace(/\n/g,"<br>")):""},d.$on("down.changed.agent",function(a,c,g,i,j){if(T(),b.ID!==c&&!e.isEmpty(g.agentId)){Y=[],d.dataSourceChartKeys=[],d.dataSourceChartCheckedKeys=[],P(),h.find(".type-select-layer").hide(),h.find(".ds-detail").hide(),d.showEventInfo=!1,d.agent=g,d.chartGroup=null,d.currentServiceInfo=E(g);var k,l,m,n=[];null===V||i?(n[0]=f.getQueryStartTime(),n[1]=f.getQueryEndTime(),l=f.getPeriod()):void 0===j||null===j?(n=V.getSelectionTimeSeries(),k=V.getSliderTimeSeries(),l=f.getPeriod()):(n=j.selectionTimeSeries,k=j.timeSeries,m=j.selectedTime),d.selectTime===-1||i?d.selectTime=f.getQueryEndTime():d.selectTime!==f.getQueryEndTime()&&A(d.selectTime),U(n,k,m||d.selectTime),z(g.agentId,n,l),D()}}),d.$on("agentInspectorChartDirective.cursorChanged",function(a,b,c){"undefined"==typeof c.index?V.hideFocus():V.showFocus(moment(c.target.chart.dataProvider[c.index].time).valueOf()),d.$broadcast("agentInspectorChartDirective.showCursorAt",b,c.index),d.$broadcast("dsChartDirective.showCursorAt.agent-data-source",c.index)}),d.$on("dsChartDirective.cursorChanged.agent-data-source",function(a,b,c){R(b,c),d.$broadcast("agentInspectorChartDirective.showCursorAt","agent-data-source",c)})}}}])}(jQuery),function(){"use strict";pinpointApp.constant("timeSliderDirectiveConfig",{scaleCount:10}),pinpointApp.directive("timeSliderDirective",["timeSliderDirectiveConfig","$timeout","AnalyticsService",function(a,b,c){return{restrict:"EA",replace:!0,templateUrl:"features/timeSlider/timeSlider.html?v="+G_BUILD_TIME,link:function(d,e,f){function g(a){d.oTimeSliderVoService=a,d.oTimeSliderVoService.getReady()!==!1&&(b(function(){o.jslider({from:d.oTimeSliderVoService.getFrom(),to:d.oTimeSliderVoService.getTo(),scale:j(i()),skin:"round_plastic",calculate:function(a){return k(a)},beforeMouseDown:function(a,b){return!1},beforeMouseMove:function(a,b){return!1}}),e.find(".jslider-pointer-from").addClass("jslider-transition"),e.find(".jslider-bg .v").addClass("jslider-transition")},100),h())}function h(){d.oTimeSliderVoService.getCount()&&d.oTimeSliderVoService.getTotal()&&d.oTimeSliderVoService.getCount()>=d.oTimeSliderVoService.getTotal()&&(d.disableMore=!0)}function i(){var b=d.oTimeSliderVoService.getFrom(),c=d.oTimeSliderVoService.getTo(),e=c-b,f=e/(a.scaleCount-1),g=[];return _.times(a.scaleCount,function(a){g.push(b+f*a)}),g}function j(a){var b=[];return $.each(a,function(a,c){b.push(k(c))}),b}function k(a){return moment(a).format("HH:mm")}function l(a,b){o.jslider("value",a,b)}var m="true"===f.autoLoading,n=!1,o=e.find(".timeslider_input");d.oTimeSliderVoService=null,d.disableMore=!1,d.done=!1,d.more=function(){c.send(c.CONST.CALLSTACK,c.CONST.CLK_MORE),m?(n=!n,d.$emit("timeSliderDirective.changeLoadingStatus",n)):d.$emit("timeSliderDirective.moreClicked",d.oTimeSliderVoService)},d.showSlider=function(){return!!d.oTimeSliderVoService&&(d.oTimeSliderVoService.getInnerFrom()&&d.oTimeSliderVoService.getInnerTo())},d.showCount=function(){return!!d.oTimeSliderVoService&&(d.oTimeSliderVoService.getCount()&&d.oTimeSliderVoService.getTotal())},d.getButtonClass=function(){return d.disableMore?d.done?"":"wait":"active tada"},d.getButtonText=function(){return m?d.done?"Done":n?"Resume":"Pause":d.done?"Done":"More"},d.$on("timeSliderDirective.initialize",function(a,b){g(b)}),d.$on("timeSliderDirective.setInnerFromTo",function(a,b){d.oTimeSliderVoService=b,l(b.getInnerFrom(),b.getInnerTo()),h()}),d.getButtonStatus=function(){return m?d.done:d.disableMore},d.$on("timeSliderDirective.enableMore",function(a){d.disableMore=!1}),d.$on("timeSliderDirective.disableMore",function(a){d.disableMore=!0}),d.$on("timeSliderDirective.changeMoreToDone",function(a){d.done=!0}),d.$on("timeSliderDirective.changeDoneToMore",function(a){d.done=!1})}}}])}(),function(){"use strict";pinpointApp.directive("transactionTableDirective",["$window","helpContentTemplate","helpContentService","AnalyticsService","CommonUtilService",function(a,b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:"features/transactionTable/transactionTable.html?v="+G_BUILD_TIME,link:function(f,g,h){var i,j,k,l=!1;f.transactionList=[],f.currentTransaction=null,f.transactionReverse=!1,i=function(){f.transactionList=[]},j=function(a){f.transactionList.length>0?(f.transactionOrderBy="",f.transactionReverse=!1,g.find("table tbody tr:last-child")[0].scrollIntoView(!0)):(f.transactionOrderBy="elapsed",f.transactionReverse=!0),f.transactionList=f.transactionList.concat(a),k(),g.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()},k=function(){var a=1;angular.forEach(f.transactionList,function(b,c){b.index=a++})},f.traceByApplication=function(a){l!==!0&&(d.send(d.CONST.CALLSTACK,d.CONST.CLK_TRANSACTION),f.currentTransaction=a,f.$emit("transactionTableDirective.applicationSelected",a))},f.openTransactionView=function(b){a.open("#/transactionView/"+b.agentId+"/"+b.traceId+"/"+b.collectorAcceptTime+"/"+b.spanId)},f.transactionOrder=function(a){f.transactionOrderBy===a?f.transactionReverse=!f.transactionReverse:f.transactionReverse=!1,d.send(d.CONST.CALLSTACK,d.CONST.ST_+a.charAt(0).toUpperCase()+a.substring(1),f.transactionReverse?d.CONST.DESCENDING:d.CONST.ASCENDING),f.transactionOrderBy=a},f.formatDate=function(a){return e.formatDate(a,"MM/DD HH:mm:ss SSS")},f.$on("transactionTableDirective.appendTransactionList",function(a,b){j(b)}),f.$on("transactionTableDirective.completedDetailPageLoad",function(){l=!1}),f.$on("transactionTableDirective.clear",function(a){i()}),f.initTooltipster=function(){jQuery(".neloTooltip").tooltipster({content:function(){return b(c.transactionTable.log)},position:"bottom",trigger:"click",interactive:!0})}}}}])}(),function(a){"use strict";pinpointApp.directive("timelineDirective",["AnalyticsService",function(b){return{restrict:"EA",replace:!0,templateUrl:"features/timeline/timeline.html?v="+G_BUILD_TIME,link:function(c,d,e){var f,g,h,i,j,k=["#66CCFF","#FFCCFF","#66CC00","#FFCC33","#669999","#FF9999","#6666FF","#FF6633","#66FFCC","#006666","#FFFF00","#66CCCC","#FFCCCC","#6699FF","#FF99FF","#669900","#FF9933","#66FFFF","#996600","#66FF00"],l=[],m=new InfiniteCircularScroll({scroller:a(d),wrapper:a(d).find("div"),elementHeight:21,template:['<div class="timeline-bar">','<div class="clickable-bar">','<div class="timeline-bar-frame">',"<span>",'<span class="before" style="position:absolute;text-align:right;white-space:nowrap;left:-70px;display:none;"><span class="glyphicon glyphicon-resize-horizontal" aria-hidden="true"></span> <span class="startTime"></span>ms</span>','<span class="nameType"></span>','<span class="after" style="white-space:nowrap;display:none;">( <span class="glyphicon glyphicon-resize-horizontal" aria-hidden="true"></span> <span class="startTime"></span>ms )</span>',"</span>","</div>","</div>","</div>"].join("")});m.renderFunc(function(a,b,d){var e=o(d);a[b==this._selectedRow?"addClass":"removeClass"]("timeline-bar-selected").find("div.clickable-bar").css({width:p(d)+"px",backgroundColor:n(d[c.key.applicationName]),marginLeft:e+"px"}).find("span.nameType").html(d[c.key.applicationName]+"/"+d[c.key.apiType]+"("+(d[c.key.end]-d[c.key.begin])+"ms)"),e>=68?a.find("span.before").show().end().find("span.after").hide().end().find("span.before .startTime").html(q(d)):a.find("span.before").hide().end().find("span.after").show().end().find("span.after .startTime").html(q(d))}),g=function(){var a=[];return angular.forEach(c.timeline.callStack,function(b){b[c.key.isMethod]&&!b[c.key.excludeFromTimeline]&&""!==b[c.key.service]&&a.push(b)}),a},f=function(b){c.timeline=b,c.key=b.callStackIndex,c.barRatio=1e3/(b.callStack[0][c.key.end]-b.callStack[0][c.key.begin]),c.newCallStacks=g(),m.source(c.newCallStacks).viewAreaHeight(a(d).parentsUntil("div.wrapper").height()-70).selectedRow(-1,angular.noop).reset(),c.maxHeight=m.contentsAreaHeight(),i=0,c.$digest()};var n=function(a){var b=l.indexOf(a);return b==-1&&(l.push(a),b=l.length-1),k[b>=k.length?0:b]},o=function(a){return(a[c.key.begin]-c.timeline.callStackStart)*c.barRatio+.9},p=function(a){return(a[c.key.end]-a[c.key.begin])*c.barRatio+.9},q=function(a){return a[c.key.begin]-c.timeline.callStackStart};a(d).on("click",".clickable-bar",function(){b.send(b.CONST.CALLSTACK,b.CONST.CLK_CALL),c.$emit("transactionDetail.selectDistributedCallFlowRow",c.newCallStacks[parseInt(a(this).parent().attr("data-index"))][6])}),a(d).on("mouseenter",".timeline-bar-frame",function(b){a(this).parent().css({"box-shadow":"6px 6px 2px -2px rgba(0,0,0,0.75)","font-weight":"bold"})}),a(d).on("mouseleave",".timeline-bar-frame",function(b){a(this).parent().css({"box-shadow":"none","font-weight":"normal"})}),c.$on("timelineDirective.initialize",function(a,b){f(b)}),c.$on("timelineDirective.resize",function(b){m.resize(a(d).parentsUntil("div.wrapper").height()-70)}),c.$on("timelineDirective.searchCall",function(a,b,d){var e=h(i,-1,b);e==-1?0===i?c.$emit("transactionDetail.searchActionResult","No call took longer than "+b+"ms."):(e=h(0,i,b),e==-1?c.$emit("transactionDetail.searchActionResult","No call took longer than "+b+"ms."):j(e,"Loop")):j(e,"")}),h=function(a,b,d){return m.searchRow(a,b,function(a){return a[c.key.end]-a[c.key.begin]>=d})},j=function(a,b){m.selectedRow(a,function(a){this.$wrapper.find("div[data-index="+this._selectedRow+"]").removeClass("timeline-bar-selected"),this.$wrapper.find("div[data-index="+a+"]").addClass("timeline-bar-selected")}).moveByRow(a),i=a+1,c.$emit("transactionDetail.searchActionResult",b)}}}}])}(jQuery),function(){"use strict";pinpointApp.constant("agentChartGroupConfig",{POINTS_TIMESTAMP:0,POINTS_MIN:1,POINTS_MAX:2,POINTS_AVG:3}),pinpointApp.directive("agentChartGroupDirective",["agentChartGroupConfig","$timeout","AgentAjaxService","CPULoadChartDaoService","MemoryChartDaoService","AnalyticsService",function(a,b,c,d,e,f){return{restrict:"EA",replace:!0,templateUrl:"features/agentChartGroup/agentChartGroup.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(a,b){function g(d){a.showChartGroup=!0,a.$digest(),c.getJVMChartData(d,function(a){h(a),i(a)}),c.getCpuLoadChartData(d,function(a){j(a)}),b.tabs({activate:function(b,c){var d=c.newTab.text();"Heap"===d?(f.send(f.CONST.MIXEDVIEW,f.CONST.CLK_HEAP),a.$broadcast("agentInspectorChartDirective.resize.transaction-heap")):"PermGen"===d?(f.send(f.CONST.MIXEDVIEW,f.CONST.CLK_PERM_GEN),a.$broadcast("agentInspectorChartDirective.resize.transaction-non-heap")):"CpuLoad"===d&&(f.send(f.CONST.MIXEDVIEW,f.CONST.CLK_CPU_LOAD),a.$broadcast("agentInspectorChartDirective.resize.transaction-cpu-load"))}}),b.tabs("paging")}function h(b){var c=e.parseHeapData(b);a.$broadcast("agentInspectorChartDirective.initAndRenderWithData.transaction-heap",c,e.getChartOptions(c),"100%","100%")}function i(b){var c=e.parseNonHeapData(b);a.$broadcast("agentInspectorChartDirective.initAndRenderWithData.transaction-non-heap",c,e.getChartOptions(c),"100%","100%")}function j(b){var c=d.parseData(b);a.$broadcast("agentInspectorChartDirective.initAndRenderWithData.transaction-cpu-load",c,d.getChartOptions(c),"100%","100%")}function k(){a.$broadcast("agentInspectorChartDirective.resize.transaction-heap"),a.$broadcast("agentInspectorChartDirective.resize.transaction-non-heap"),a.$broadcast("agentInspectorChartDirective.resize.transaction-cpu-load")}a.showChartGroup=!1,a.$on("agentChartGroupDirective.initialize."+a.namespace,function(a,b){g(b)}),a.$on("agentChartGroupDirective.showCursorAt."+a.namespace,function(b,c){a.$broadcast("agentInspectorChartDirective.showCursorAt","",c)}),a.$on("agentChartGroupDirective.resize."+a.namespace,function(){k()})}}}])}(),function(){"use strict";pinpointApp.directive("sidebarTitleDirective",["$timeout","$rootScope","$window","AgentHistogramDaoService","UrlVoService","PreferenceService","AnalyticsService",function(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,templateUrl:"features/sidebar/title/sidebarTitle.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(e){function h(a){return e.currentAgent=f.getAgentAllStr(),angular.isUndefined(a)||a.isAuthorized===!1?void(e.agentList=[]):void(e.agentList=a.agentIds?a.agentIds.sort():[])}function i(a){return f.getIconPath()+(/.*\_GROUP/.test(a)?a.split("_")[0]:a)+".png"}function j(a){return a.replace("_"," ")}function k(a,b){p=b,q=null,o=a,angular.isUndefined(a.unknownLinkGroup)&&angular.isUndefined(a.unknownNodeGroup)?e.isGroup=!1:e.isGroup=!0,a.from&&a.to?(e.isNode=!1,e.isWas=!1,e.fromNodeIcon=i(a.sourceInfo.serviceType),e.fromNodeName=j(a.sourceInfo.applicationName),e.isGroup?(e.toNodeIcon=i(a.toNode.serviceType),e.toNodeName=j(a.toNode.serviceType)):(e.toNodeIcon=i(a.targetInfo.serviceType),e.toNodeName=j(a.targetInfo.applicationName))):(e.isNode=!0,e.isWas=!!angular.isDefined(a.isWas)&&a.isWas,e.fromNodeIcon=i(a.serviceType),e.isGroup?e.fromNodeName=j(a.serviceType):e.fromNodeName=j(a.applicationName)),l()}function l(){e.serverCount=0,e.errorServerCount=0,e.isNode?angular.isUndefined(o.isAuthorized)||o.isAuthorized===!1?e.hasServerList=!1:(e.hasServerList=!!(o.agentIds&&o.agentIds.length>0),e.serverCount=o.instanceCount,e.errorServerCount=o.instanceErrorCount):e.hasServerList=!1}function m(){e.currentAgent=f.getAgentAllStr(),e.hasServerList=!1,e.fromNodeIcon="",e.fromNodeName="",e.toNodeIcon="",e.toNodeName="",e.isWas=!1,e.isGroup=!1,e.agentList=[]}function n(a){q?a(q):d.loadAgentHistogram(o,p,function(b,c){"success"===b&&(q=c,a(c))})}var o=null,p=null,q=null,r={};e.agentList=[],e.hasServerList=!1,e.serverCount=0,e.errorServerCount=0,e.isNode=!0,e.isGroup=!1,a(function(){m()}),e.isWasNode=function(){return e.isNode&&e.isWas},e.changeAgent=function(){g.send(g.CONST.INSPECTOR,g.CONST.CLK_CHANGE_AGENT_MAIN),b.$broadcast("changedCurrentAgent."+e.namespace,e.currentAgent,r)},e.showServerList=function(){g.send(g.CONST.MAIN,g.CONST.CLK_SHOW_SERVER_LIST),n(function(a){b.$broadcast("serverListDirective.show",e.isNode,o,a,r,p)})},e.openApplicationInspector=function(){c.open("#/inspector/"+(o.applicationName||o.filterApplicationName)+"@"+o.serviceType+"/"+p.getReadablePeriod()+"/"+p.getQueryEndDateTime())},e.$on("sidebarTitleDirective.initialize."+e.namespace,function(a,b,c){k(b,c),h(b)}),e.$on("sidebarTitleDirective.empty."+e.namespace,function(a){m()}),e.$on("loadChartDirective.saveMax."+e.namespace,function(a,b){e.currentAgent===f.getAgentAllStr()&&(r.loadChart=b)}),e.$on("responseTimeSummaryChartDirective.saveMax."+e.namespace,function(a,b){e.currentAgent===f.getAgentAllStr()&&(r.responseSummaryChart=b)})}}}])}(),function(){"use strict";pinpointApp.directive("filterInformationDirective",["$filter","$base64",function(a,b){return{restrict:"EA",replace:!0,templateUrl:"features/sidebar/filter/filterInformation.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(c,d,e){var f,g;f=function(d){g(),d.getRequestUrlPattern()&&(c.urlPattern=b.decode(d.getRequestUrlPattern()));var e=d.getIncludeException();if(null===e?c.includeException="Success + Failed":e===!0?c.includeException="Failed Only":c.includeException="Success Only",angular.isNumber(d.getResponseFrom())&&d.getResponseTo()){var f=[];f.push(a("number")(d.getResponseFrom())),f.push("ms"),f.push("~"),"max"===d.getResponseTo()?f.push("30,000+"):f.push(a("number")(d.getResponseTo())),f.push("ms"),c.responseTime=f.join(" ")}var h=d.getFromAgentName(),i=d.getToAgentName();h||i?c.agentFilterInfo=(h||"all")+" -> "+(i||"all"):c.agentFilterInfo=!1},g=function(){c.urlPattern="none",c.responseTime="none",c.includeException="none"},c.$on("filterInformationDirective.initialize."+c.namespace,function(a,b){f(b)})}}}])}(),function(){"use strict";pinpointApp.directive("distributedCallFlowDirective",["$timeout","CommonAjaxService","CommonUtilService","SystemConfigurationService",function(a,b,c,d){return{restrict:"E",replace:!0,templateUrl:"features/distributedCallFlow/distributedCallFlow.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y="";d.getConfig().then(function(a){y=a.securityGuideUrl}),window.callStacks=[];var z=function(a){return void 0===a||null===a?"":a.replace(/</g,"&lt;").replace(/>/g,"$gt;")},A=function(a,b){return a?z(b):"<i style='color:#AAA;'>"+z(b)+"</i> <a href='"+y+"' target='_blank' style='color:#AAA;'><span class='glyphicon glyphicon-share'></span></a>"};q=function(a){var b=0,c=0,d="#";for(b=0,c=0;b<a.length;c=a.charCodeAt(b++)+((c<<5)-c));for(b=0,d="#";b<3;d+=("00"+(c>>8*b++&255).toString(16)).slice(-2));return d},m=function(a,b,c,d,e){var f=[],g=i.getItemById(e.id);j=g.agent?g.agent:j;var h=q(j),k=i.getIdxById(e.id),l="dcf-popover";if(g.hasException?l+=" has-exception":g.isMethod||(l+=" not-method"),f.push('<div class="'+l+'" data-container=".grid-canvas" data-toggle="popover" data-trigger="manual" data-placement="right" data-content="'+z(c)+'">'),f.push("<div style='position:absolute;top:0;left:0;bottom:0;width:5px;background-color:"+h+"'></div>"),f.push("<span style='display:inline-block;height:1px;width:"+15*e.indent+"px'></span>"),window.callStacks[k+1]&&window.callStacks[k+1].indent>window.callStacks[k].indent?e._collapsed?f.push(" <span class='toggle expand'></span>&nbsp;"):f.push(" <span class='toggle collapse'></span>&nbsp;"):f.push(" <span class='toggle'></span>&nbsp;"),g.hasException)f.push('<span class="glyphicon glyphicon-fire"></span>&nbsp;');else if(g.isMethod){var m=parseInt(g.methodType);switch(m){case 100:f.push('<i class="xi-shipping"></i>&nbsp;');break;case 200:f.push('<span class="glyphicon glyphicon-transfer"></span>&nbsp;');break;case 900:f.push('<i class="xi-info-triangle" style="color:#FF6600"></i>&nbsp;')}}else"SQL"===g.method?f.push('<button type="button" class="btn btn-default btn-xs btn-success sql" style="padding:0px 2px 0px 2px"><span class="glyphicon glyphicon-eye-open sql"></span></button>&nbsp;'):f.push('<span class="glyphicon glyphicon-info-sign"></span>&nbsp;');return f.push(A(e.isAuthorized,c)),f.push("</div>"),f.join("")},n=function(a){var b=!0;if(angular.isDefined(a.parent)&&null!==a.parent)for(var c=window.callStacks[a.parent];c;)c._collapsed&&(b=!1),c=window.callStacks[c.parent];return b},s=function(a,b,c,d,e){var f=[];return f.push('<div class="dcf-popover" data-container=".grid-canvas" data-toggle="popover" data-trigger="manual" data-placement="right" data-content="'+encodeURIComponent(c)+'">'),f.push(A(e.isAuthorized,c)),f.push("</div>"),f.join("")},t=function(a,b,c,d,e){if(c&&0!==c.length){var f=[];f.push('<a class="btn btn-default btn-xs"'),f.push('href="'),f.push(c),f.push('" target="_blank">');var g=i.getItemById(e.id),h=g.logButtonName;return f.push(h),f.push("</a>"),f.join("")}},p=function(a,b,d,e,f){return angular.isUndefined(d)||null===d?"":c.formatDate(d,"HH:mm:ss SSS")},r=function(a,b,c,d,e){if(angular.isUndefined(c)||null===c||""===c||0===c)return"";var f;return f="#5bc0de","<span class='percent-complete-bar' style='background:"+f+";width:"+c+"%'><span class='percent-complete-bar' style='background-color:#4343C8;width:"+e.execPer+"%;height:4px;float:left;margin-top:1px;'></span></span>"},o=function(a,b){var c=[],d=100/(b[0][a.end]-b[0][a.begin]);return angular.forEach(b,function(b,e){var f="undefined"==typeof b[a.isAuthorized]||b[a.isAuthorized];b[a.isFocused]&&(k=e),c.push({id:"id_"+e,isAuthorized:f,parent:b[a.parentId]?b[a.parentId]-1:null,indent:b[a.tab],method:b[a.title],argument:b[a.arguments],execTime:b[a.begin]>0?b[a.begin]:null,gapMs:b[a.gap],timeMs:b[a.elapsedTime],timePer:b[a.elapsedTime]?(b[a.end]-b[a.begin])*d+.9:null,"class":b[a.simpleClassName],methodType:b[a.methodType],apiType:b[a.apiType],agent:b[a.agent],applicationName:b[a.applicationName],hasException:b[a.hasException],isMethod:b[a.isMethod],logLink:b[a.logPageUrl],logButtonName:b[a.logButtonName],isFocused:b[a.isFocused],execMilli:b[a.executionMilliseconds],execPer:b[a.elapsedTime]&&b[a.executionMilliseconds]?parseInt(b[a.executionMilliseconds].replace(/,/gi,""))/parseInt(b[a.elapsedTime].replace(/,/gi,""))*100:0})}),c},l=function(c){window.callStacks=o(c.callStackIndex,c.callStack);var d={enableCellNavigation:!0,enableColumnReorder:!0,enableTextSelectionOnCells:!0,topPanelHeight:30,rowHeight:25};i=new Slick.Data.DataView({inlineFilters:!0}),i.beginUpdate(),i.setItems(window.callStacks),i.setFilter(n),i.getItemMetadata=function(a){var b=i.getItemByIdx(a),c={cssClasses:""
};return b.hasException===!0&&(c.cssClasses+=" error-point"),b.isFocused===!0&&(c.cssClasses+=" entry-point"),null!==b.execTime&&(c.cssClasses+=" id_"+(a+1)),c},i.endUpdate();var g=[{id:"method",name:"Method",field:"method",width:400,formatter:m},{id:"argument",name:"Argument",field:"argument",width:300,formatter:s},{id:"exec-time",name:"Start Time",field:"execTime",width:90,formatter:p},{id:"gap-ms",name:"Gap(ms)",field:"gapMs",width:70,cssClass:"right-align"},{id:"time-ms",name:"Exec(ms)",field:"timeMs",width:70,cssClass:"right-align"},{id:"time-per",name:"Exec(%)",field:"timePer",width:100,formatter:r},{id:"exec-milli",name:"Self(ms)",field:"execMilli",width:75,cssClass:"right-align"},{id:"class",name:"Class",field:"class",width:120},{id:"api-type",name:"API",field:"apiType",width:90},{id:"agent",name:"Agent",field:"agent",width:130},{id:"application-name",name:"Application",field:"applicationName",width:150}];h=new Slick.Grid(f.get(0),i,g,d),h.setSelectionModel(new Slick.RowSelectionModel);var j=!0,l=!1;h.onClick.subscribe(function(c,d){var e;if($(c.target).hasClass("toggle")&&(e=i.getItem(d.row),e&&(e._collapsed?e._collapsed=!1:e._collapsed=!0,i.updateItem(e.id,e)),c.stopImmediatePropagation()),$(c.target).hasClass("sql")){e=i.getItem(d.row);var g=i.getItem(d.row+1),h="sql="+encodeURIComponent(e.argument);e.isAuthorized?angular.isDefined(g)&&"SQL-BindValue"===g.method?(h+="&bind="+encodeURIComponent(g.argument),b.getSQLBind("sqlBind.pinpoint",h,function(a){$("#customLogPopup").find("h4").html("SQL").end().find("div.modal-body").html('<h4>Binded SQL <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+a+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+a.replace(/\t\t/g,"")+'</pre><hr><h4>Original SQL <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+e.argument+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+e.argument.replace(/\t\t/g,"")+'</pre><h4>SQL Bind Value <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+g.argument+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+g.argument+"</pre>").end().modal("show"),prettyPrint()})):($("#customLogPopup").find("h4").html("SQL").end().find("div.modal-body").html('<h4>Original SQL <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+e.argument+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+e.argument.replace(/\t\t/g,"")+"</pre>").end().modal("show"),prettyPrint()):$("#customLogPopup").find("h4").html("SQL").end().find("div.modal-body").html('<h4>Original SQL</h4><div style="margin-top:0px;padding:6px 10px;border-radius:4px;background-color:#C56A6A;color:#D7FBBA;">'+e.argument.replace(/\t\t/g,"")+"</div>").end().modal("show")}l||(l=a(function(){j&&f.find(".dcf-popover").each(function(){var a=$(this);a.data("popover")&&a.popover("hide")}),j=!0,l=!1},300))}),h.onDblClick.subscribe(function(a,b){j=!1,$(a.target).hasClass("dcf-popover")&&$(a.target).popover({content:function(){return decodeURIComponent(this.getAttribute("data-content"))}}).popover("toggle")}),h.onCellChange.subscribe(function(a,b){i.updateItem(b.item.id,b.item)}),h.onActiveCellChanged.subscribe(function(a,b){e.$emit("distributedCallFlowDirective.rowSelected."+e.namespace,b.grid.getDataItem(b.row))}),u=function(a){var b=i.getItem(a+1);return!(!b||a!==b.parent)},h.onKeyDown.subscribe(function(a,b){var c=i.getItem(b.row);if(37==a.which)if(u(b.row))c._collapsed=!0,i.updateItem(c.id,c);else{var d=i.getItem(b.row-1);d&&h.setActiveCell(b.row-1,0)}else if(39==a.which){if(c._collapsed)c._collapsed=!1;else{var e=i.getItem(b.row+1);e&&h.setActiveCell(b.row+1,0)}i.updateItem(c.id,c)}}),i.onRowCountChanged.subscribe(function(a,b){h.updateRowCount(),h.render()}),i.onRowsChanged.subscribe(function(a,b){h.invalidateRows(b.rows),h.render()}),a(function(){h.scrollRowToTop(k)})},$("#customLogPopup").on("click","button",function(){var a=document.createRange();a.selectNode($(this).parent().next().get(0)),window.getSelection().addRange(a);try{document.execCommand("copy")}catch(b){console.log("unable to copy :",b)}window.getSelection().removeAllRanges()}),e.$on("distributedCallFlowDirective.initialize."+e.namespace,function(a,b){l(b)}),e.$on("distributedCallFlowDirective.resize."+e.namespace,function(a){h&&h.resizeCanvas()}),e.$on("distributedCallFlowDirective.selectRow."+e.namespace,function(a,b){var c=b-1;h.setSelectedRows([c]),h.setActiveCell(c,0),h.scrollRowToTop(c)}),e.$on("distributedCallFlowDirective.searchCall."+e.namespace,function(a,b,c){var d=v(b,c);d==-1?c>0?(x(v(b,0)),e.$emit("transactionDetail.searchActionResult","Loop")):e.$emit("transactionDetail.searchActionResult","No call took longer than "+b+"ms."):(x(d),e.$emit("transactionDetail.searchActionResult",""))}),e.$on("distributedCallFlowDirective.searchArgument."+e.namespace,function(a,b,c){var d=w(b,c);d==-1?c>0?(x(w(b,0)),e.$emit("transactionDetail.searchActionResult","Loop")):e.$emit("transactionDetail.searchActionResult","There is no result.."):(x(d),e.$emit("transactionDetail.searchActionResult",""))}),v=function(a,b){for(var c=0,d=-1,e=0;e<window.callStacks.length;e++)if(parseInt(window.callStacks[e].execMilli.replace(/,/gi,""))>=a){if(c==b){d=e;break}c++}return d},w=function(a,b){for(var c=0,d=-1,e=0;e<window.callStacks.length;e++)if(window.callStacks[e].argument.indexOf(a)!==-1){if(c==b){d=e;break}c++}return d},x=function(a){h.setSelectedRows([a]),h.setActiveCell(a,0),h.scrollRowIntoView(a,!0)}}}}])}(),function(){"use strict";pinpointApp.constant("responseTimeSummaryChartDirectiveConfig",{}),pinpointApp.directive("responseTimeSummaryChartDirective",["responseTimeSummaryChartDirectiveConfig","$rootScope","$timeout","AnalyticsService","PreferenceService","CommonUtilService",function(a,b,c,d,e,f){var g=e.getResponseTypeColor(),h=["0.2","0.3","0.4","0.6","0.6"],i=g.map(function(a,b){var c=parseInt(a.substring(1,3),16),d=parseInt(a.substring(3,5),16),e=parseInt(a.substring(5),16);return"rgba("+c+", "+d+", "+e+", "+h[b]+")"});return{template:"<div style='user-select:none;'><canvas></canvas></div>",replace:!0,restrict:"EA",scope:{namespace:"@"},link:function(a,e){function g(){m="responseTimeId-"+a.namespace,e.attr("id",m)}function h(a,b){e.css("width",a||"100%"),e.css("height",b||"150px")}function j(e,g,h){null!==n&&n.destroy(),n=new Chart(o,{type:"bar",data:{labels:e.keys,datasets:[{data:e.values,backgroundColor:i,borderColor:["rgba(120, 119, 121, 0.8)","rgba(120, 119, 121, 0.8)","rgba(120, 119, 121, 0.8)","rgba(120, 119, 121, 0.8)","rgba(120, 119, 121, 0.8)"],borderWidth:.5}]},options:{onClick:function(b,c){if(c.length>0){var e=c[0]._view.label;"Error"==e&&(d.send(d.CONST.MAIN,d.CONST.CLK_RESPONSE_GRAPH),a.$emit("responseTimeSummaryChartDirective.showErrorTransactionList",e)),h&&a.$emit("responseTimeSummaryChartDirective.itemClicked."+a.namespace,{responseTime:e,count:c[0]._chart.config.data.datasets[0].data[c[0]._index]})}b.preventDefault()},maintainAspectRatio:!1,legend:{display:!1},title:{text:"",display:!0,fontSize:8,padding:6},scales:{yAxes:[{gridLines:{color:"rgba(0, 0, 0, 0.1)",zeroLineColor:"rgba(0, 0, 0, 1)",zeroLineWidth:.5},ticks:function(){var a={beginAtZero:!0,maxTicksLimit:3,callback:function(a){return a>=1e3?"    "+a/1e3+"k":"    "+a}};return g&&(a.max=g),a}()}],xAxes:[{gridLines:{color:"rgba(255, 255, 255, 0)",zeroLineColor:"rgba(0, 0, 0, 1)",zeroLineWidth:.5}}]},animation:{duration:0,onComplete:function(){var a=this.chart.ctx;a.font=Chart.helpers.fontString(Chart.defaults.global.defaultFontSize,"normal",Chart.defaults.global.defaultFontFamily),a.fillStyle=this.chart.config.options.defaultFontColor,a.textAlign="center",a.textBaseline="bottom",this.data.datasets.forEach(function(b){for(var c=0;c<b.data.length;c++){var d=b._meta[Object.keys(b._meta)[0]].data[c]._model;a.fillText(f.addComma(b.data[c]),d.x,d.y-5)}})}},hover:{animationDuration:0},tooltips:{enabled:!1}}}),c(function(){b.$broadcast("responseTimeSummaryChartDirective.saveMax."+a.namespace,n.scales["y-axis-0"].end)})}function k(a,b){b?n.config.options.scales.yAxes[0].ticks.max=b:delete n.config.options.scales.yAxes[0].ticks.max,n.data.labels=a.keys,n.data.datasets[0].data=a.values,n.update()}function l(a){if("undefined"==typeof a||null===a)return{keys:["1s","3s","5s","Slow","Error"],values:[0,0,0,0,0]};var b={keys:[],values:[]};for(var c in a)b.keys.push(c),b.values.push(a[c]);return b}var m,n=null,o=e.find("canvas");a.$on("responseTimeSummaryChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,d,e,f,i){g(),h(d,e),j(l(b),c,f,i)}),a.$on("responseTimeSummaryChartDirective.updateData."+a.namespace,function(b,c,d){"forServerList"===a.namespace?k(l(c),d):k(l(c))})}}}])}(),function(){"use strict";pinpointApp.constant("loadChartDirectiveConfig",{}),pinpointApp.directive("loadChartDirective",["loadChartDirectiveConfig","$rootScope","$timeout","AnalyticsService","PreferenceService","CommonUtilService",function(a,b,c,d,e,f){e.getResponseTypeColor();return{template:"<div style='text-align:center;user-select:none;'><canvas></canvas></div>",replace:!0,restrict:"EA",scope:{namespace:"@"},link:function(a,e){function g(){n="loadId-"+a.namespace,e.attr("id",n)}function h(a,b){e.css("width",a||"100%"),e.css("height",b||"220px")}function i(e,f){null!==o&&o.destroy(),o=new Chart(p,{type:"bar",data:{labels:e.labels,borderWidth:0,datasets:[{label:e.keyValues[0].key,data:e.keyValues[0].values,backgroundColor:"rgba(44, 160, 44, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0},{label:e.keyValues[1].key,data:e.keyValues[1].values,backgroundColor:"rgba(60, 129, 250, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0},{label:e.keyValues[2].key,data:e.keyValues[2].values,backgroundColor:"rgba(248, 199, 49, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0},{label:e.keyValues[3].key,data:e.keyValues[3].values,backgroundColor:"rgba(246, 145, 36, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0},{label:e.keyValues[4].key,data:e.keyValues[4].values,backgroundColor:"rgba(245, 48, 52, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0}]},options:{onClick:function(){d.send(d.CONST.MAIN,d.CONST.CLK_LOAD_GRAPH)},maintainAspectRatio:!1,tooltips:{mode:"label",bodySpacing:6},scales:{yAxes:[{gridLines:{zeroLineColor:"rgba(0, 0, 0, 1)",zeroLineWidth:.5},ticks:function(){var a={beginAtZero:!0,maxTicksLimit:5,callback:function(a){return a>=1e3?"   "+a/1e3+"k":a%1===0?j(""+a)+a:void 0}};return f&&(a.max=f),a}(),stacked:!0}],xAxes:[{gridLines:{zeroLineColor:"rgba(0, 0, 0, 1)",zeroLineWidth:.5},ticks:{autoSkip:!0},categoryPercentage:1,barPercentage:1,stacked:!0,display:!0}]},animation:{duration:0},legend:{display:!0,labels:{boxWidth:20,padding:10}}}}),c(function(){b.$broadcast("loadChartDirective.saveMax."+a.namespace,o.scales["y-axis-0"].end)})}function j(a){var b="       ";return a.length>b.length?a:b.substr(0,b.length-a.length)}function k(){e.find("canvas").hide(),0===e.find("h4").length?e.append("<h4 style='padding-top:25%;text-align:center;'>No Data</h4>"):e.find("h4").show()}function l(a,b){angular.isUndefined(o)?0!==a.length&&i(a,b,!0):0===a.length?k():(e.find("h4").hide().end().find("canvas").show(),b?o.config.options.scales.yAxes[0].ticks.max=b:delete o.config.options.scales.yAxes[0].ticks.max,o.data.labels=a.labels,o.data.datasets[0].data=a.keyValues[0].values,o.data.datasets[1].data=a.keyValues[1].values,o.data.datasets[2].data=a.keyValues[2].values,o.data.datasets[3].data=a.keyValues[3].values,o.data.datasets[4].data=a.keyValues[4].values,o.data.datasets[0].label=a.keyValues[0].key,o.data.datasets[1].label=a.keyValues[1].key,o.data.datasets[2].label=a.keyValues[2].key,o.data.datasets[3].label=a.keyValues[3].key,o.data.datasets[4].label=a.keyValues[4].key,o.update())}function m(a){if(angular.isUndefined(a))return[];for(var b={labels:[],keyValues:[]},c=!1,d=0;d<a.length;d++){for(var e=[],g=0;g<a[d].values.length;g++)c=!0,e.push(a[d].values[g][1]),0===d&&b.labels.push(f.formatDate(a[d].values[g][0],"MM-DD HH:mm"));b.keyValues.push({key:a[d].key,values:e})}return c?b:[]}var n,o=null,p=e.find("canvas");a.$on("loadChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,d,e,f){g(),h(d,e);var j=m(b);0===j.length?k():i(j,c,f)}),a.$on("loadChartDirective.updateData."+a.namespace,function(b,c,d){"forServerList"===a.namespace?l(m(c),d):l(m(c))})}}}])}(),function(){"use strict";pinpointApp.directive("dsChartDirective",["helpContentService",function(a){return{template:"<div style='width:100%;height:270px;'><div></div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(b,c,d){function e(){r="multipleValueAxesId-"+b.namespace,c.find("div").attr("id",r)}function f(a,b){a&&c.find("#"+r).css("width",a),b&&c.find("#"+r).css("height",b)}function g(a){var b={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,usePrefixes:!0,dataProvider:p.data,switchable:!0,valueAxes:[{gridAlpha:0,axisAlpha:1,position:"left",title:"Connection(count)",maximum:10,minimum:0,labelFunction:function(a){return parseInt(a)}}],graphs:[],chartCursor:{oneBalloonOnly:!0,categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1,listeners:[{event:"changed",method:function(a){a.mostCloseGraph&&a.index?h(a.mostCloseGraph.valueField,a.index):h("")}}]},categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}}},c=0;for(var d in p.data[0])if("time"!==d){var e=d.split("_");b.graphs.push({balloonFunction:function(){return""},lineColor:j(c++),title:e[1],valueField:d,fillAlphas:0,connect:!1,hidden:!a[d]})}0===c&&b.graphs.push({balloonFunction:function(){return""},lineColor:j(c),title:"0",valueField:d,fillAlphas:0,connect:!1,hidden:!1}),(p.empty||p.forceMax)&&(b.valueAxes[0].maximum=p.defaultMax),o=AmCharts.makeChart(r,b),i(),q[p.empty?"show":"hide"]()}function h(a,c){b.$emit("dsChartDirective.cursorChanged."+b.namespace,a,c)}function i(){q=c.append('<div class="no-data"><span>'+s+"</span></div>").find(".no-data").hide()}function j(a){return a<t.length?t[a]:"#"+k()+k()+k()}function k(){var a=Math.floor(255*Math.random()).toString(16);return 1==a.length?"0"+a:a}function l(a){if(a&&angular.isNumber(a)&&a>=o.startIndex&&a<=o.endIndex&&o.dataProvider[a]&&o.dataProvider[a].time)try{o.chartCursor.showCursorAt(o.dataProvider[a].time)}catch(b){}else o.chartCursor.hideCursor()}function m(){o&&(o.validateNow(),o.validateSize())}function n(a){for(var b=0;b<o.graphs.length;b++)if(o.graphs[b].valueField===a)return o.graphs[b].id;return""}var o,p,q,r="",s=a.inspector.noDataCollected,t=["#850901","#969755","#421416","#c8814b","#aa8735","#cd7af4","#f6546a","#1c1a1f","#127999","#b7ebd9","#f6546a","#bea87f","#d1b4b0","#e0d4ba","#0795d9","#43aa83","#09d05b","#c26e67","#ed7575","#96686a"];b.$on("dsChartDirective.initAndRenderWithData."+b.namespace,function(a,b,d,h,i){p=b,c.html("<div></div>"),e(),f(h,i),g(d)}),b.$on("dsChartDirective.toggleGraph."+b.namespace,function(a,b,c){var d=n(b);""!==d&&o[c?"showGraph":"hideGraph"](o.getGraphById(d))}),b.$on("dsChartDirective.toggleGraphAll."+b.namespace,function(){for(var a=0;a<o.graphs.length;a++)o.showGraph(o.graphs[a])}),b.$on("dsChartDirective.showCursorAt."+b.namespace,function(a,b){p&&p.empty===!1&&l(b)}),b.$on("dsChartDirective.resize."+b.namespace,function(a){m()})}}}])}(),function(){"use strict";angular.module("pinpointApp").directive("agentInspectorChartDirective",["helpContentService",function(a){return{template:"<div style='width:100%;height:270px;'><div class='chart'></div><div class='loading'><i class='xi-spinner-3 xi-spin xi-3x'></i></div><div class='no-data'><span></span></div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(b,c,d){function e(){s="multipleValueAxesId-"+b.namespace,p.attr("id",s)}function f(){return""!==s}function g(a,b){a&&p.css("width",a),b&&p.css("height",b)}function h(){n.dataProvider=o.data,o.empty||o.forceMax?i(n):j(n),n.validateData(),q[o.empty?"show":"hide"](),r.hide()}function i(a){for(var b=0;b<a.valueAxes.length;b++)a.valueAxes[b].maximum=o.defaultMax}function j(a){for(var b=0;b<a.valueAxes.length;b++)delete a.valueAxes[b].maximum}function k(a){a.chartCursor.listeners=[{event:"changed",method:function(a){b.$emit("agentInspectorChartDirective.cursorChanged",b.namespace,a)}}],(o.empty||o.forceMax)&&i(a),n=AmCharts.makeChart(s,a),q[o.empty?"show":"hide"](),r.hide()}function l(a){if(a&&angular.isNumber(a)){if(a>=n.startIndex&&a<=n.endIndex&&n.dataProvider[a]&&n.dataProvider[a].time){try{n.chartCursor.showCursorAt(n.dataProvider[a].time)}catch(b){}return}}else if(angular.isString(a)){try{n.chartCursor.showCursorAt(a)}catch(b){}return}n.chartCursor.hideCursor()}function m(){n&&(n.validateNow(),n.validateSize())}var n,o,p,q,r,s="",t=a.inspector.noDataCollected;p=c.find("div.chart"),r=c.find("div.loading"),q=c.find("div.no-data").hide(),q.find("span").html(t),b.$on("agentInspectorChartDirective.initAndRenderWithData."+b.namespace,function(a,b,c,d,i){r.show(),o=b,f()?h():(e(),g(d,i),k(c))}),b.$on("agentInspectorChartDirective.showLoading."+b.namespace,function(){r.show()}),b.$on("agentInspectorChartDirective.showCursorAt",function(a,c,d){o&&o.empty===!1&&b.namespace!==c&&l(d)}),b.$on("agentInspectorChartDirective.resize."+b.namespace,function(){m()})}}}])}(),function(){"use strict";pinpointApp.directive("loadingDirective",["$timeout","$templateCache","$compile",function(a,b,c){return{restrict:"A",scope:{showLoading:"=loadingDirective",loadingMessage:"@"},link:function(a,d,e){a.loadingMessage||(a.loadingMessage="Please Wait...");var f=b.get(e.loadingDirective);"static"===d.css("position")&&d.css("position","relative"),d.append(c(f)(a))}}}])}(),function(a){"use strict";pinpointApp.constant("ConfigurationDirectiveConfig",{menu:[{view:"General",value:"general"},{view:"User Group",value:"userGroup"},{view:"Application",value:"application"},{view:"Installation",value:"installation"},{view:"Help",value:"help"}]}),pinpointApp.directive("configurationDirective",["ConfigurationDirectiveConfig","$rootScope","$timeout","AnalyticsService",function(b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/configuration.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(d,f,g){function h(){i(),j.on("show.bs.modal",function(b){a(this).removeAttr("tabindex")}),j.on("hidden.bs.modal",function(a){l&&(c.$broadcast("navbarDirective.changedFavorite"),c.$broadcast("down.changed.favorite")),d.$broadcast("configuration.general.initClose")})}function i(){k=d.menuInfo[0].value}var j=a(f),k="",l=!1;d.menuInfo=b.menu,h(),d.isSelected=function(a){return k===a},d.selectMenu=function(a){k=a,d.$broadcast("configuration.selectMenu",k)},d.$on("configuration.open",function(){e.sendMain(e.CONST.CLK_CONFIGURATION),l=!1,j.modal("show")}),d.$on("up.changed.favorite",function(a){l=!0,a.stopPropagation()})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("generalDirective",["PreferenceService","UserConfigurationService","AnalyticsService","helpContentService",function(b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/general/general.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(f,g,h){function i(){n.empty();for(var a=0;a<f.savedFavoriteList.length;a++){var b=f.savedFavoriteList[a];j(b.applicationName,b.serviceType,b.code)}}function j(a,b,c){n.append('<li data-name="'+a+'" data-type="'+b+'" data-code="'+c+'"><img src="images/icons/'+b+'.png" height="25px"/>'+a+'<button class="btn btn-danger btn-xs" style="float:right"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></li>')}function k(){f.depthList=b.getDepthList(),f.caller=c.getCaller(),f.callee=c.getCallee(),f.periodTime=b.getPeriodTime(),f.period=c.getPeriod(),c.getFavoriteList(function(a){f.savedFavoriteList=a,i()},!0),f.timezone=moment.tz.names(),f.userTimezone=c.getTimezone(),f.newUserTimezone=c.getTimezone(),m.find("div.general-warning").html(e.configuration.general.warning),m.find("div.favorite-empty").html(e.configuration.general.empty),p.on("hide.bs.dropdown",function(a){q===!1&&(a.preventDefault(),q=!1)}),p.on("click",function(){q=!1})}function l(a,b){d.sendMain(d.CONST.CLK_GENERAL_SET_FAVORITE),c.addFavorite(a,b,function(){c.getFavoriteList(function(c){f.savedFavoriteList=c,f.$emit("up.changed.favorite"),j(a.split("@")[0],a.split("@")[1],b)},!0)})}var m=g,n=m.find("ul.favorite-list"),o=h.name,p=m.find(".inout-bound"),q=!1;m[h.initState](),f.savedFavoriteList=[],k(),f.changeCaller=function(a){f.caller=a,d.sendMain(d.CONST.CLK_GENERAL_SET_DEPTH,f.caller),c.setCaller(f.caller)},f.changeCallee=function(a){f.callee=a,d.sendMain(d.CONST.CLK_GENERAL_SET_DEPTH,f.callee),c.setCallee(f.callee)},f.changePeriod=function(){d.sendMain(d.CONST.CLK_GENERAL_SET_PERIOD,f.period),c.setPeriod(f.period)},f.removeFavorite=function(b){var e=b.target.tagName.toLowerCase();if("button"===e||"span"===e){var g=a(b.target).parents("li");d.sendMain(d.CONST.CLK_GENERAL_SET_FAVORITE),c.removeFavorite(g.attr("data-name"),g.attr("data-type"),function(){c.getFavoriteList(function(a){f.savedFavoriteList=a,f.$emit("up.changed.favorite"),g.remove()},!0)})}},f.applyNReload=function(){d.sendMain(d.CONST.CLK_GENERAL_SET_TIMEZONE,f.newUserTimezone),c.setTimezone(f.newUserTimezone),window.location.reload(!0)},f.closeInOut=function(){q=!0,p.trigger("click.bs.dropdown")},f.$on("configuration.general.initClose",function(){f.closeInOut()}),f.$on("configuration.selectMenu",function(a,b){o===b?m.show():m.hide()}),f.$on("up.changed.application",function(a,b,c,d){l(c,d,b),a.stopPropagation()})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("userGroupContainerDirective",["SystemConfigurationService",function(a){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/userGroup/userGroupContainer.html?v="+G_BUILD_TIME,link:function(b,c,d){var e=c,f=d.name;e[d.initState](),b.$on("configuration.selectMenu",function(c,d){f===d?a.getConfig().then(function(a){b.$broadcast("configuration.userGroup.show"),b.$broadcast("pinpointUser.load",a.userDepartment),e.show()}):e.hide()}),b.$on("userGroup.selectedUserGroup",function(a,c){b.$broadcast("groupMember.load",c),a.stopPropagation()}),b.$on("userGroup.selectedNone",function(a){b.$broadcast("groupMember.selectNone"),b.$broadcast("pinpointUser.selectNone"),a.stopPropagation()}),b.$on("groupMember.loaded",function(a,c){b.$broadcast("pinpointUser.checkSelectedMember",c),a.stopPropagation()}),b.$on("groupMember.removedMember",function(a,c,d){b.$broadcast("pinpointUser.changeSelectedMember",c,d),a.stopPropagation()}),b.$on("groupMember.sendCallbackAddedUser",function(a,c,d){b.$broadcast("pinpointUser.addUserCallback",c,d),a.stopPropagation()}),b.$on("pinpointUser.sendUserUpdated",function(a,c){b.$broadcast("groupMember.updateUser",c),a.stopPropagation()}),b.$on("pinpointUser.sendUserAdd",function(a,c){b.$broadcast("groupMember.addMember",c),a.stopPropagation()})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("userGroupDirective",["$timeout","helpContentService","AlarmUtilService","AnalyticsService","SystemConfigurationService",function(e,f,g,h,i){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/userGroup/userGroup.html?v="+G_BUILD_TIME,scope:!0,link:function(e,f){function j(a){g.show(y),g.sendCRUD("getUserGroupList",a,function(a){u=e.userGroupList=a,g.setTotal(w,u.length),e.$emit("userGroup.selectedNone"),t=!0,g.hide(y)},p)}function k(a){a.find(b.DIV_NORMAL).hasClass("hide-me")||(o(),m(g.extractID(a)),e.$emit("userGroup.selectedUserGroup",a.find(".contents").html()))}function l(a){r===a&&(r="",e.$emit("userGroup.selectedNone"))}function m(b){a("#"+e.prefix+r).removeClass("selected"),a("#"+e.prefix+b).addClass("selected"),r=b}function n(a){return g.extractID(s)===g.extractID(a)}function o(){c.cancelAction(g,z),d.cancelAction(g,s)}function p(a){x.find(".message").html(a.errorMessage),g.hide(y),g.show(x)}function q(){i.getConfig().then(function(a){c.applyAction(g,z,y,a.userId,function(a,b){u.push({id:b,number:a.number}),e.userGroupList=u,g.setTotal(w,u.length)},p)})}e.prefix="userGroup_";var r="",s=null,t=!1,u=e.userGroupList=[],v=f,w=v.find(".total"),x=v.find(".some-alert"),y=v.find(".some-loading"),z=v.find(".new-group"),A=v.find(".some-list-search input");v.find(".some-list-content ul").on("click",function(b){var c=a(b.toElement||b.target),d=c.get(0).tagName.toLowerCase();"span"===d&&c.hasClass("contents")?k(c.parents("li")):"li"===d&&k(c)}),e.onSearch=function(){g.show(y),o();var c=a.trim(A.val());if(""===c)j("");else{if(c.length<b.MIN_GROUPNAME_LENGTH)return A.val(""),void g.hide(y);h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_FILTER_USER_GROUP),j({userGroupId:c})}},e.onAddUserGroup=function(){c.isOn()||(o(),c.onAction(g,z))},e.onCancelAddUserGroup=function(){c.cancelAction(g,z)},e.onApplyAddUserGroup=function(){q()},e.onRemoveUserGroup=function(a){var b=g.getNode(a,"li");null!==s&&n(b)===!1&&o(b),s=b,d.onAction(g,s)},e.onCancelRemoveUserGroup=function(){d.cancelAction(g,s)},e.onApplyRemoveUserGroup=function(){i.getConfig().then(function(a){var b=g.extractID(s);d.applyAction(g,s,y,a.userId,function(a){for(var c=0;c<u.length;c++)if(u[c].id==a){u.splice(c,1);break}l(b),e.$apply(function(){e.userGroupList=u}),g.setTotal(w,u.length)},p)})},e.onSearchKeydown=function(a){13==a.keyCode?e.onSearch():27==a.keyCode&&(A.val(""),a.stopPropagation())},e.onAddUserGroupKeydown=function(a){13==a.keyCode?q():27==a.keyCode&&(c.cancelAction(g,z),a.stopPropagation())},e.onCloseAlert=function(){g.hide(x)},e.$on("configuration.userGroup.show",function(){t===!1&&j("")})}}}]);var b={MIN_GROUP_NAME_LENGTH:3,NEW_GROUP:"New Group",EXIST_A_SAME:"Exist a same group name",ENTER_AT_LEAST:"Enter at least 3 letters to search",CANNOT_BE_USED_GUEST:"The name 'guest' can not be used.",DIV_EDIT:"div._edit",DIV_NORMAL:"div._normal",DIV_REMOVE:"div._remove"},c={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a,b){this._bIng=!0,a.show(b),b.find("input").val("").focus()},cancelAction:function(a,c){this._bIng===!0&&(this._bIng=!1,a.hide(c),c.removeClass("blink-blink").find("input").attr("placeholder",b.NEW_GROUP).val(""))},applyAction:function(a,d,e,f,g,h){a.show(e);var i=d.find("input").val();return"guest"===i.trim()?(a.hide(e),void d.addClass("blink-blink").find("input").attr("placeholder",b.CANNOT_BE_USED_GUEST).val("").focus()):i.length<b.MIN_GROUP_NAME_LENGTH?(a.hide(e),void d.addClass("blink-blink").find("input").attr("placeholder",b.ENTER_AT_LEAST).val("").focus()):void a.sendCRUD("createUserGroup",{id:i,userId:f},function(b){g(b,i),c.cancelAction(a,d),a.hide(e)},function(a){h(a)})}},d={_bIng:!1,onAction:function(a,c){this._bIng=!0,c.addClass("remove"),a.hide(c.find(b.DIV_NORMAL)),a.show(c.find(b.DIV_REMOVE))},cancelAction:function(a,c){this._bIng===!0&&(c.removeClass("remove"),a.hide(c.find(b.DIV_REMOVE)),a.show(c.find(b.DIV_NORMAL)),this._bIng=!1)},applyAction:function(a,b,c,d,e,f){a.show(c);var g=this,h=b.find(".contents").html();a.sendCRUD("removeUserGroup",{id:h,userId:d},function(){g.cancelAction(a,b),e(h),a.hide(c)},function(a){f(a)})}}}(jQuery),function(a){"use strict";pinpointApp.directive("groupMemberDirective",["$timeout","helpContentTemplate","helpContentService","AlarmUtilService","AnalyticsService",function(b,e,f,g,h){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/userGroup/groupMember.html?v="+G_BUILD_TIME,scope:!0,link:function(b,e){function f(){d.cancelAction(g,v)}function i(a){t.find(".message").html(a.errorMessage),g.hide(s),g.show(t)}function j(){w=[],b.groupMemberList=[],g.setTotal(r,w.length)}function k(c){return a("#"+b.prefix+c).length>0}function l(a){g.show(s),g.sendCRUD("getGroupMemberListInGroup",{userGroupId:u},function(a){w=a,b.groupMemberList=w,g.setTotal(r,w.length),g.hide(s),b.$emit("groupMember.loaded",w)},i)}function m(a){return g.extractID(v)===g.extractID(a)}function n(a){for(var c=0;c<w.length;c++)if(w[c].memberId==a){w.splice(c,1);break}b.$apply(function(){b.groupMemberList=w}),b.$emit("groupMember.removedMember",w,a),g.setTotal(r,w.length)}function o(a){for(var c=0;c<w.length;c++)if(w[c].memberId==a.userId){w[c].name=a.name,w[c].department=a.department;break}b.groupMemberList=w}b.prefix="groupMember_",b.groupMemberList=[];var p=a(e),q=p.find(".some-guide"),r=p.find(".total"),s=p.find(".some-loading"),t=p.find(".some-alert"),u="",v=null,w=[];b.onRemoveGroupMember=function(a){null!==v&&m(g.getNode(a,"li"))===!1&&f(),v=g.getNode(a,"li"),d.onAction(g,v)},b.onApplyRemoveGroupMember=function(){d.applyAction(g,u,v,s,function(a){n(a)},i)},b.onCancelRemoveGroupMember=function(){d.cancelAction(g,v)},b.onSortGroupMember=function(){if(""!==u){f();for(var a=[],c=w.length-1,d=0,e=c;e>=0;d++,e--)a[d]=w[e];w=a,b.groupMemberList=w}},b.onCloseAlert=function(){g.closeAlert(t,s)},b.canSort=function(){return""===u?"0.5":"1.0"},b.$on("groupMember.load",function(a,b,c){u=b,f(),j(),g.hide(q),l(c)}),b.$on("groupMember.selectNone",function(){u="",j(),g.show(q)}),b.$on("groupMember.addMember",function(a,d){return""===u?void b.$emit("groupMember.sendCallbackAddedUser",!1):(f(),void c.applyAction(g,d,u,s,k,function(a){h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_ADD_USER),w.push({name:a.name,memberId:a.userId,department:a.department,userGroupId:u}),b.groupMemberList=w,b.$emit("groupMember.sendCallbackAddedUser",!0,a.userId),g.setTotal(r,w.length),g.hide(s)},function(a){i(a),b.$emit("groupMember.sendCallbackAddedUser",!1,d.userId)}))}),b.$on("groupMember.updateUser",function(a,b){k(b.userId)&&(f(),o(b))})}}}]);var b={EXIST_A_SAME:"Exist a same user in the lists.",DIV_NORMAL:"div._normal",DIV_EDIT:"div._edit",DIV_REMOVE:"div._remove"},c={applyAction:function(a,b,c,d,e,f,g){a.show(d),e(b.userId)===!0?g():a.sendCRUD("addMemberInGroup",{userGroupId:c,memberId:b.userId},function(c){f(b),a.hide(d)},function(a){g(a)})}},d={_bIng:!1,onAction:function(a,c){this._bIng=!0,c.addClass("remove"),a.hide(c.find(b.DIV_NORMAL)),a.show(c.find(b.DIV_REMOVE))},cancelAction:function(a,c){this._bIng===!0&&(c.removeClass("remove"),a.hide(c.find(b.DIV_REMOVE)),a.show(c.find(b.DIV_NORMAL)),this._bIng=!1)},applyAction:function(a,b,c,d,e,f,g){a.show(d);var h=this,i=g||a.extractID(c);a.sendCRUD("removeMemberInGroup",{userGroupId:b,memberId:i},function(b){e(i),h.cancelAction(a,c),a.hide(d)},function(a){f(a)})}}}(jQuery),function(a){"use strict";function b(a){var b=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return b.test(a)}function c(a){var b=/^\d+$/;return b.test(a)}function d(b){a.each(b,function(a,b){b.addClass("blink-blink")})}function e(b){a.each(b,function(a,b){b.removeClass("blink-blink")})}pinpointApp.directive("pinpointUserDirective",["helpContentTemplate","helpContentService","AlarmUtilService","AnalyticsService","SystemConfigurationService",function(b,c,d,e,j){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/userGroup/pinpointUser.html?v="+G_BUILD_TIME,scope:!0,link:function(b,c){function k(){g.cancelAction(E,r),h.cancelAction(d,D),i.cancelAction(d,E,D,r)}function l(a){B.find(".message").html(a.errorMessage),d.hide(A),d.show(B)}function m(c){d.show(A),d.sendCRUD("getPinpointUserList",c||{},function(c){a.each(c,function(a,b){b.has=!1}),G=b.pinpointUserList=c,d.setTotal(z,n()),d.hide(A)},l)}function n(){return H.length+"/"+G.length}function o(a){for(var b=0;b<G.length;b++)if(G[b].userId==a)return G[b]}function p(){for(var b=y.find("ul"),c=E.length-1,e=c;e>=0;e--)b.prepend(E[e]);E[0].find("input").removeAttr("disabled"),d.hide(E[c].find(f.DIV_EDIT)),d.show(E[c].find(f.DIV_ADD)),a.each(E,function(a,b){d.show(b)}),E[0].find("input").focus()}function q(b){for(var c=E.length-1,e=c;e>=0;e--)D.after(E[e]);E[0].find("input").val(b.userId),
E[1].find("input").val(b.name),E[2].find("input").val(b.department),E[3].find("input").val(b.phoneNumber),E[4].find("input").val(b.email),E[0].find("input").attr("disabled","disabled"),d.hide(E[c].find(f.DIV_ADD)),d.show(E[c].find(f.DIV_EDIT)),a.each(E,function(a,b){d.show(b)}),E[0].find("input").focus()}function r(){a.each(E,function(a,b){d.hide(b),b.find("input").val("")})}function s(){var b=a.trim(E[0].find("input").val()),c=a.trim(E[1].find("input").val()),d=a.trim(E[2].find("input").val()),e=a.trim(E[3].find("input").val()),f=a.trim(E[4].find("input").val()),g={userId:b,name:c,department:d,phoneNumber:e,email:f};return g}function t(a){return d.extractID(D)===d.extractID(a)}function u(a){for(var b=0;b<G.length;b++)if(G[b].userId===a)return G[b];return null}function v(){g.applyAction(d,s(),E,A,function(a){e.send(e.CONST.MAIN,e.CONST.CLK_ALARM_CREATE_PINPOINT_USER),G.push(a),b.pinpointUserList=G,r(),d.setTotal(z,n())},l)}function w(b){H=b,a.each(G,function(a,b){b.has=!1;for(var c=0;c<H.length;c++)if(b.userId==H[c].memberId){b.has=!0;break}})}b.prefix="pinpointUser_",j.getConfig().then(function(a){b.canEditUserInfo=a.editUserInfo});var x=a(c),y=x.find(".wrapper"),z=x.find(".total"),A=x.find(".some-loading"),B=x.find(".some-alert"),C=x.find(".some-list-search input"),D=null,E=x.find(".new-group").toArray().map(function(b){return a(b)}),F=!1,G=[],H=[];b.pinpointUserList=[],b.onAddPinpointUser=function(){g.isOn()||(k(),g.onAction(function(){p()}))},b.onCancelAddPinpointUser=function(){g.cancelAction(E,function(){r()})},b.onApplyAddPinpointUser=function(){v()},b.onRemovePinpointUser=function(a){var b=d.getNode(a,"li");null!==D&&t(b)===!1&&k(b),D=b,h.onAction(d,D)},b.onCancelRemovePinpointUser=function(){h.cancelAction(d,D)},b.onApplyRemovePinpointUser=function(){h.applyAction(d,D,A,function(a){for(var c=0;c<G.length;c++)if(G[c].userId==a){G.splice(c,1);break}b.$apply(function(){b.pinpointUserList=G}),d.setTotal(z,n()),b.$emit("pinpointUser.sendUserRemoved",a)},l)},b.onUpdatePinpointUser=function(a){k(),D=d.getNode(a,"li"),i.onAction(d,D,function(a){q(u(a))})},b.onCancelUpdatePinpointUser=function(){i.cancelAction(d,E,D,r)},b.onApplyUpdatePinpointUser=function(){i.applyAction(d,s(),E,D,A,function(a){for(var c=0;c<G.length;c++)if(G[c].userId==a.userId){G[c].name=a.name,G[c].department=a.department,G[c].phoneNumber=a.phoneNumber,G[c].email=a.email;break}b.pinpointUserList=G,r(),b.$emit("pinpointUser.sendUserUpdated",a)},l)},b.onEditPinpointUserKeydown=function(a){13==a.keyCode?g.isOn()?b.onApplyAddPinpointUser():b.onApplyUpdatePinpointUser():27==a.keyCode&&(g.isOn()?b.onCancelAddPinpointUser():b.onCancelUpdatePinpointUser(),a.stopPropagation())},b.onSearchKeydown=function(a){13==a.keyCode?b.onSearch():27==a.keyCode&&a.stopPropagation()},b.onSearch=function(){k();var b=a.trim(C.val());return b.length<f.MIN_SEARCH_LENGTH?void C.focus():(d.show(A),e.send(e.CONST.MAIN,e.CONST.CLK_ALARM_FILTER_PINPOINT_USER),void m({searchKey:b}))},b.checkUser=function(a){d.show(A);var c=d.getNode(a,"li"),e=d.extractID(c);b.$emit("pinpointUser.sendUserAdd",o(e))},b.$on("pinpointUser.changeSelectedMember",function(a,c){w(c),b.$apply(function(){b.pinpointUserList=G}),d.setTotal(z,n()),d.hide(A)}),b.$on("pinpointUser.checkSelectedMember",function(a,c){y.removeClass("_disable-check"),w(c),b.pinpointUserList=G,d.setTotal(z,n())}),b.$on("pinpointUser.selectNone",function(){y.addClass("_disable-check"),a.each(G,function(a,b){b.has=!1}),H=[],b.pinpointUserList=G,d.setTotal(z,n())}),b.$on("pinpointUser.addUserCallback",function(a,c,e){if(c===!1)for(var f=0;f<b.pinpointUserList.length;f++)b.pinpointUserList[f].userId===e&&(b.pinpointUserList[f].has=!1);d.setTotal(z,n()),d.hide(A)}),b.onCloseAlert=function(){d.closeAlert(B,A)},b.$on("pinpointUser.load",function(a,b){k(),F===!1&&m(angular.isUndefined(b)?{}:{searchKey:b})})}}}]);var f={MIN_SEARCH_LENGTH:2,INPUT_USER_ID_AND_NAME:"Input user id and name",INPUT_PHONE_OR_EMAIL:"Input phone number or email",YOU_CAN_ONLY_INPUT_NUMBERS:"You can only input numbers",INVALID_EMAIL_FORMAT:"Invalid email format.",DIV_NORMAL:"div._normal",DIV_REMOVE:"div._remove",DIV_ADD:"div._add",DIV_EDIT:"div._edit"},g={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a){this._bIng=!0,a()},cancelAction:function(a,b){this._bIng===!0&&(e(a),b(),this._bIng=!1)},applyAction:function(a,e,g,h,i,j){var k=this;return a.show(h),""===e.userId||""===e.name?(d(g),void j({errorMessage:f.INPUT_USER_ID_AND_NAME})):""===e.phoneNumber&&""===e.email?(d(g),void j({errorMessage:f.INPUT_PHONE_OR_EMAIL})):""!==e.phoneNumber&&c(e.phoneNumber)===!1?(d(g),void j({errorMessage:f.YOU_CAN_ONLY_INPUT_NUMBERS})):""!==e.email&&b(e.email)===!1?(d(g),void j({errorMessage:f.INVALID_EMAIL_FORMAT})):void a.sendCRUD("createPinpointUser",e,function(b){e.number=b.number,i(e),k.cancelAction(g,function(){}),a.hide(h)},function(a){j(a)})}},h={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a,b){this._bIng=!0,b.addClass("remove"),a.hide(b.find(f.DIV_NORMAL)),a.show(b.find(f.DIV_REMOVE))},cancelAction:function(a,b){this._bIng===!0&&(b.removeClass("remove"),a.hide(b.find(f.DIV_REMOVE)),a.show(b.find(f.DIV_NORMAL)),this._bIng=!1)},applyAction:function(a,b,c,d,e){var f=this,g=a.extractID(b);a.sendCRUD("removePinpointUser",{userId:g},function(e){d(g),f.cancelAction(a,b),a.hide(c)},function(a){e(a)})}},i={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a,b,c){this._bIng=!0,a.hide(b),c(a.extractID(b))},cancelAction:function(a,b,c,d){this._bIng===!0&&(d(),e(b),a.show(c),this._bIng=!1)},applyAction:function(a,e,g,h,i,j,k){var l=this;return a.show(i),""===e.name?(d(g),void k({errorMessage:f.INPUT_USER_ID_AND_NAME})):""===e.phoneNumber&&""===e.email?(d(g),void k({errorMessage:f.INPUT_PHONE_OR_EMAIL})):""!==e.phoneNumber&&c(e.phoneNumber)===!1?(d(g),void k({errorMessage:f.YOU_CAN_ONLY_INPUT_NUMBERS})):""!==e.email&&b(e.email)===!1?(d(g),void k({errorMessage:f.INVALID_EMAIL_FORMAT})):void a.sendCRUD("updatePinpointUser",e,function(b){l.cancelAction(a,g,h,function(){}),j(e),a.hide(i)},function(a){k(a)})}}}(jQuery),function(a){"use strict";pinpointApp.directive("applicationConfigDirective",[function(){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/application/applicationConfig.html?v="+G_BUILD_TIME,link:function(a,b,c){var d=b,e=c.name,f=0;d[c.initState](),a.$on("configuration.selectMenu",function(b,c){e===c?(d.show(),a.$broadcast("applicationGroup.load")):(d.hide(),f=0)}),a.$on("applicationGroup.selectApp",function(b,c){a.$broadcast("applicationGroup.sub.load",c,f++),b.stopPropagation()})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("applicationGroupDirective",["CommonAjaxService",function(b){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/application/applicationGroup.html?v="+G_BUILD_TIME,scope:!0,link:function(c,d,e){function f(){i.find("ul").on("click",function(b){var c=a(b.toElement||b.target),d=c.get(0).tagName.toLowerCase();"span"===d||"img"===d?g(c.parents("li")):"li"===d&&g(c)})}function g(a){null!==k&&k.removeClass("selected"),a.addClass("selected"),k=a,c.$emit("applicationGroup.selectApp",a.attr("id"))}function h(){b.getApplicationList(function(a){angular.isArray(a)===!1||0===a.length||(c.applicationList=a)},function(){})}var i=a(d),j=!1,k=null;c.applicationList=[],f(),c.getAppId=function(a){return a.applicationName+"@"+a.serviceType},c.$on("applicationGroup.load",function(){j===!1&&(h(),j=!0)})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("alarmRuleDirective",["AlarmUtilService","AnalyticsService",function(f,g){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/application/alarmRule.html?v="+G_BUILD_TIME,scope:!0,link:function(h,i){function j(){c.cancelAction(y,r),d.cancelAction(f,A,r),e.cancelAction(f,A,y,r)}function k(a){return f.extractID(A)===f.extractID(a)}function l(a){z.find(".message").html(a.errorMessage),f.hide(x),f.show(z)}function m(){f.show(x),f.sendCRUD("getRuleList",{applicationId:B.split("@")[0]},function(a){C=!0,D=a,h.ruleList=a,f.hide(x)},l)}function n(){f.sendCRUD("getUserGroupList","",function(a){h.userGroupList=a},l)}function o(){h.ruleSets.length>1||f.sendCRUD("getRuleSet",{},function(a){h.ruleSets=a},l)}function p(){w.find("tbody").prepend(y[1]).prepend(y[0]),f.hide(y[0].find(b.DIV_EDIT)),f.show(y[0].find(b.DIV_ADD)),a.each(y,function(a,b){f.show(b)})}function q(c){f.hide(y[0].find(b.DIV_ADD)),f.show(y[0].find(b.DIV_EDIT)),y[0].find("select[name=rule]").val(c.checkerName),y[0].find("select[name=userGroup]").val(c.userGroupId),y[0].find("input[name=threshold]").val(c.threshold),y[0].find("select[name=type]").val(function(){return c.smsSend&&c.emailSend?"all":c.smsSend?"sms":c.emailSend?"email":""}()),y[1].find("input").val(c.notes),a.each(y,function(a,b){f.show(b)})}function r(){a.each(y,function(a,b){f.hide(b)}),y[0].find("select[name=rule]").val(""),y[0].find("select[name=userGroup]").val(""),y[0].find("input[name=threshold]").val("1"),y[0].find("select[name=type]").val("all"),y[1].find("input").val("")}function s(a){var b=y[0].find("select[name=type]").val(),c={applicationId:B.split("@")[0],serviceType:B.split("@")[1],userGroupId:y[0].find("select[name=userGroup]").val(),checkerName:y[0].find("select[name=rule]").val(),threshold:y[0].find("input[name=threshold]").val(),smsSend:"all"===b||"sms"===b,emailSend:"all"===b||"email"===b,notes:y[1].find("input").val()};return angular.isUndefined(a)===!1&&(c.ruleId=a),c}function t(a){for(var b=0;b<D.length;b++)if(D[b].ruleId==a)return D[b];return null}var u=a(i),v=u.find(".some-guide"),w=u.find(".wrapper"),x=u.find(".some-loading"),y=[u.find("tr._edit1"),u.find("tr._edit2")],z=u.find(".some-alert"),A=null,B="",C=!1,D=[];h.prefix="alarmRule_",h.ruleList=[],h.ruleSets=[],h.userGroupList=[],h.onAddAlarm=function(){""===B||c.isOn()||(j(),c.onAction(function(){p()}))},h.onApplyAddAlarm=function(){c.applyAction(f,s(),y,x,function(a,b){return f.hasDuplicateItem(D,function(c){return c.userGroupId===a&&c.checkerName===b})},function(a){g.sendMain(g.CONST.CLK_ALARM_CREATE_RULE),D.push(a),h.ruleList=D,r()},l)},h.onCancelAddAlarm=function(){c.cancelAction(y,r)},h.onRemoveAlarm=function(a){var b=f.getNode(a,"tr");null!==A&&k(b)===!1&&j(b),A=b,d.onAction(f,A)},h.onCancelRemoveAlarm=function(){d.cancelAction(f,A)},h.onApplyRemoveAlarm=function(){d.applyAction(f,A,x,function(a){for(var b=0;b<D.length;b++)if(D[b].ruleId==a){D.splice(b,1);break}h.$apply(function(){h.ruleList=D})},l)},h.onUpdateAlarm=function(a){j(),A=f.getNode(a,"tr"),e.onAction(f,A,function(a){A.after(y[1]).after(y[0]),q(t(a))})},h.onCancelUpdateAlarm=function(){e.cancelAction(f,A,y,r)},h.onApplyUpdateAlarm=function(){e.applyAction(f,s(f.extractID(A)),y,A,x,function(a,b,c){return f.hasDuplicateItem(D,function(d){return d.userGroupId===b&&d.checkerName===c&&d.ruleId!=a})},function(a){r();for(var b=0;b<D.length;b++)D[b].ruleId==a.ruleId&&(D[b].checkerName=a.checkerName,D[b].userGroupId=a.userGroupId,D[b].threshold=a.threshold,D[b].smsSend=a.smsSend,D[b].emailSend=a.emailSend,D[b].notes=a.notes);h.ruleList=D},l)},h.onCaptureUpdateClick=function(b){if("SPAN"===b.target.tagName.toUpperCase()){var c=a(b.target);c.hasClass("update-confirm")?h.onApplyUpdateAlarm():c.hasClass("update-cancel")?h.onCancelUpdateAlarm():c.hasClass("add-confirm")?h.onApplyAddAlarm():c.hasClass("add-cancel")&&h.onCancelAddAlarm()}},h.$on("applicationGroup.sub.load",function(a,b,c){B=b,j(),f.hide(v),m(!0),0===c&&n(),o()}),h.onCloseAlert=function(){f.hide(z)},h.getType=function(a){return a.smsSend&&a.emailSend?"Email, SMS":a.smsSend===!1&&a.emailSend===!1?"":a.smsSend?"SMS":a.emailSend?"Email":void 0}}}}]);var b={SELECT_USER_GROUP_OR_RULE:"Select user group or rule.",EXIST_A_SAME:"Exist a same rule set in the list",DIV_NORMAL:"div._normal",DIV_REMOVE:"div._remove",DIV_ADD:"div._add",DIV_EDIT:"div._edit"},c={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a){this._bIng=!0,a()},cancelAction:function(b,c){this._bIng===!0&&(a.each(b,function(a,b){b.removeClass("blink-blink")}),c(),this._bIng=!1)},applyAction:function(c,d,e,f,g,h,i){var j=this;return c.show(f),""===d.userGroupId||""===d.checkerName?(a.each(e,function(a,b){b.addClass("blink-blink")}),void i({errorMessage:b.SELECT_USER_GROUP_OR_RULE})):g(d.userGroupId,d.checkerName)?(a.each(e,function(a,b){b.addClass("blink-blink")}),void i({errorMessage:b.EXIST_A_SAME})):void c.sendCRUD("createRule",d,function(a){d.ruleId=a.ruleId,h(d),j.cancelAction(e,function(){}),c.hide(f)},function(a){i(a)})}},d={_bIng:!1,onAction:function(a,c){this._bIng=!0,c.addClass("remove"),a.hide(c.find(b.DIV_NORMAL)),a.show(c.find(b.DIV_REMOVE))},cancelAction:function(a,c){this._bIng===!0&&(c.removeClass("remove"),a.hide(c.find(b.DIV_REMOVE)),a.show(c.find(b.DIV_NORMAL)),this._bIng=!1)},applyAction:function(a,b,c,d,e){var f=this;a.show(c);var g=a.extractID(b);a.sendCRUD("removeRule",{ruleId:g},function(e){f.cancelAction(a,b),d(g),a.hide(c)},function(a){e(a)})}},e={_bIng:!1,onAction:function(a,b,c){this._bIng=!0,a.hide(b),c(a.extractID(b))},cancelAction:function(b,c,d,e){this._bIng===!0&&(e(),a.each(d,function(a,b){b.removeClass("blink-blink")}),b.show(c),this._bIng=!1)},applyAction:function(c,d,e,f,g,h,i,j){var k=this;return c.show(g),h(d.ruleId,d.applicationId,d.checkerName)?(a.each(e,function(a,b){b.addClass("blink-blink")}),void j({errorMessage:b.EXIST_A_SAME})):void c.sendCRUD("updateRule",d,function(a){k.cancelAction(c,f,e,function(){}),i(d),c.hide(g)},function(a){j(a)})}}}(jQuery),function(a){"use strict";pinpointApp.directive("installationDirective",["$http","InstallationAjaxService","helpContentService",function(b,c,d){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/installation/installation.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(b,e,f){function g(){c.getAgentInstallationInfo(function(a){0===a.code&&(b.downloadLink=a.message.downloadUrl,w=a.message.installationArgument,h("",""))})}function h(a,b){q.value=w+"\n"+t[0].replace(/\[Application Name\]/,a)+"\n"+t[1].replace(/\[AgentId\]/,b)}function i(a,b){a.get(0).className=b}function j(){u="",v="",b.inputAgentId="",b.inputApplicationName="",b.agentIdMessage="",b.applicationNameMessage="",i(s,"form-group has-feedback"),i(r,"form-group has-feedback"),i(s.find("span").hide(),"glyphicon form-control-feedback"),i(r.find("span").hide(),"glyphicon form-control-feedback")}function k(a){a.removeClass("has-error").addClass("has-success"),a.find("span").removeClass("glyphicon-remove").addClass("glyphicon-ok").show()}function l(a){a.removeClass("has-success").addClass("has-error"),a.find("span").removeClass("glyphicon-ok").addClass("glyphicon-remove").show()}function m(a){return!(0===a.length||a.length>n)}var n=24,o=a(e),p=f.name,q=o.find("textarea")[0],r=o.find(".application-name-input"),s=o.find(".agent-id-input"),t=["-Dpinpoint.applicationName=[Application Name]","-Dpinpoint.agentId=[AgentId]"],u="",v="",w="",x=d.configuration.installation.lengthGuide.replace(/\{\{MAX\_CHAR\}\}/,n);b.description=d.configuration.installation.desc,b.downloadLink="",b.applicationNameMessage="",b.agentIdMessage="",b.inputApplicationName="",b.inputAgentId="",o[f.initState](),b.copyArguments=function(){q.select();try{document.execCommand("copy")}catch(a){}},b.onKeyDown=function(a,c){13===a.keyCode&&("applicationName"===c?b.searchApplicationName():"agentId"===c&&b.searchAgentId())},b.searchApplicationName=function(){var a=b.inputApplicationName.trim();return m(a)===!1?(b.applicationNameMessage=x,void l(s)):void c.isAvailableApplicationName({applicationName:a},function(c){0===c.code?(u=a,b.applicationNameMessage="",k(r),h(a,v)):c.code===-1&&(u="",b.applicationNameMessage=c.message,l(r))})},b.searchAgentId=function(){var a=b.inputAgentId.trim();return m(a)===!1?(b.agentIdMessage=x,void l(s)):void c.isAvailableAgentId({agentId:a},function(c){0===c.code?(v=a,b.agentIdMessage="",k(s),h(u,a)):c.code===-1&&(v="",b.agentIdMessage=c.message,l(s))})},b.$on("configuration.selectMenu",function(a,b){p===b?(g(),o.show()):(o.hide(),j())})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("helpDirective",[function(){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/help/help.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(a,b,c){var d=b,e=c.name;d[c.initState](),a.enHelpList=[{title:"Quick start guide",link:"https://github.com/naver/pinpoint/blob/master/quickstart/README.md"},{title:"Technical Overview of Pinpoint",link:"https://github.com/naver/pinpoint/wiki/Technical-Overview-Of-Pinpoint"},{title:"Using Pinpont with Docker",link:"http://yous.be/2015/05/05/using-pinpoint-with-docker/"},{title:"Notes on Jetty Plugin for Pinpoint ",link:"https://github.com/cijung/Docs/blob/master/JettyPluginNotes.md"},{title:"About Alarm",link:"https://github.com/naver/pinpoint/blob/master/doc/alarm.md#alarm"}],a.koHelpList=[{title:"Pinpoint   Pinpoint ",link:"http://helloworld.naver.com/helloworld/1194202"},{title:"   ",link:"http://dev2.prompt.co.kr/33"},{title:"Pinpoint  ",link:"http://www.barney.pe.kr/blog/category/development/page/2/"},{title:"    1",link:"https://www.youtube.com/watch?v=hrvKaEaDEGs"},{title:"    2",link:"https://www.youtube.com/watch?v=fliKPGHGXK4"},{title:"AWS Ubuntu 14.04   ",link:"http://lky1001.tistory.com/132"},{title:"Alarm ",link:"https://github.com/naver/pinpoint/blob/master/doc/alarm.md#alarm-1"}],a.$on("configuration.selectMenu",function(a,b){e===b?d.show():d.hide()})}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("ThreadDumpInfoLayerDirectiveConfig",{ACTIVE_THREAD_LIGHT_DUMP_URL:"agent/activeThreadLightDump.pinpoint",ACTIVE_THREAD_DUMP_URL:"agent/activeThreadDump.pinpoint",PADDING_WIDTH:5,PADDING_HEIGHT:15}),pinpointApp.directive("threadDumpInfoLayerDirective",["ThreadDumpInfoLayerDirectiveConfig","$routeParams","$timeout","$http","$window","CommonUtilService","CommonAjaxService",function(b,c,d,e,f,g,h){return{restrict:"EA",replace:!0,templateUrl:"features/threadDumpInfoLayer/threadDumpInfoLayer.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(c,d){function h(a,b){b===!0&&a.ing===!0&&a.obj&&a.obj.abort&&a.obj.abort(),a.obj=null,a.ing=!1}function i(){t.obj=e({url:b.ACTIVE_THREAD_LIGHT_DUMP_URL+"?applicationName="+w+"&agentId="+v,method:"GET"}).then(function(a){a.data.code&&a.data.code===-1?q.find("> span").hide().end().find(".when-has-message").show().find("span").html(a.data.message):(c.threadList=a.data.message.threadDumpData,0===c.threadList.length&&q.find(".when-has-message").hide().end().find("> span").show()),s.val(""),o.hide(),n.show(),h(t)},function(){o.hide()}),t.ing=!0}function j(){var a=m(),c=parseInt(b.PADDING_WIDTH*a.docWidth/100),d=parseInt(b.PADDING_HEIGHT*a.docHeight/100),e=a.docWidth-2*c,f=a.docHeight-2*d,g=parseInt((f-a.titleHeight)/2);n.css({top:d,left:c,width:e,height:f}),p.css({height:g-a.tableHeadHeight-a.margin}),q.css({height:g}),r.css({height:g})}function k(){n.find(".panel-heading").css("cursor","default").find("button").hide(),l()}function l(){var b=m(),d=parseInt((b.docHeight-b.titleHeight-b.navHeight)/2);n.css({top:b.navHeight+"px",left:"0px",width:"100%",height:"100%"}),p.css({height:d-b.tableHeadHeight-b.margin}),q.css({height:d}),r.css({height:d}),a(window).on("resize",function(){var a=m(),b=a.docHeight-a.titleHeight-a.navHeight-d-a.tableHeadHeight-a.margin;0===c.threadList.length?q.css({height:b+96}):p.css({height:b})})}function m(){return{docWidth:f.document.body.clientWidth,docHeight:f.document.body.clientHeight,navHeight:40,titleHeight:78,tableHeadHeight:67,margin:30}}var n=a(d),o=n.find("i"),p=n.find(".thread-list"),q=n.find(".panel-body"),r=n.find(".detail-message"),s=n.find("textarea"),t={obj:null,ing:!1},u={obj:null,ing:!1},v="",w="";c.threadList=[],c.sortType="-execTime",j(),c.$on("thread-dump-info-window.open",function(a,b,c){k(),w=b,v=c,i()}),c.$on("thread-dump-info-layer.open",function(a,b,c){h(t,!0),n.is(":visible")&&o.show(),w=b,v=c,i()}),c.$on("thread-dump-info-layer.close",function(){c.hideThreadDump()}),c.changeSortType=function(a){c.sortType=(c.sortType.indexOf(a)<=0?"-":"")+a},c.hideThreadDump=function(){h(t,!0),h(u,!0),n.hide(),o.hide(),s.val("")},c.loadDetailMessage=function(c){var d=a(a(c.target).parents("tr")[0]);d.parent().find(".selected").removeClass("selected").end().end().addClass("selected"),o.show(),h(u,!0),u.obj=e({url:b.ACTIVE_THREAD_DUMP_URL+"?applicationName="+w+"&agentId="+v+"&threadName="+d.find("td:nth-child(3)").html()+"&localTraceId="+d.attr("data-traceId"),method:"GET"}).then(function(a){var b="";b=a.data.message.threadDumpData.length>0?a.data.message.threadDumpData[0].detailMessage:"There is no message( may be completed )",s.val(b),h(u),o.hide()},function(){o.hide()}),u.ing=!0},c.formatDate=function(a){return g.formatDate(a,"MM/DD HH:mm:ss SSS")}}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("RealtimeChartCtrlConfig",{sendPrefix:"applicationName=",keys:{CODE:"code",TYPE:"type",RESULT:"result",STATUS:"status",COMMAND:"command",MESSAGE:"message",TIME_STAMP:"timeStamp",PARAMETERS:"parameters",APPLICATION_NAME:"applicationName",ACTIVE_THREAD_COUNTS:"activeThreadCounts"},values:{PING:"PING",PONG:"PONG",REQUEST:"REQUEST",RESPONSE:"RESPONSE",ACTIVE_THREAD_COUNT:"activeThreadCount"},template:{agentChart:'<div class="agent-chart"><div></div><span class="glyphicon glyphicon-new-window"></span></div>',chartDirective:Handlebars.compile('<realtime-chart-directive timeout-max-count="{{timeoutMaxCount}}" chart-color="{{chartColor}}" xcount="{{xAxisCount}}" show-extra-info="{{showExtraInfo}}" request-label="requestLabelNames" namespace="{{namespace}}" width="{{width}}" height="{{height}}"></realtime-chart-directive>')},css:{borderWidth:2,height:180,navBarHeight:42,titleHeight:30},sumChart:{width:260,height:120},otherChart:{width:120,height:60},"const":{MIN_Y:10}}),pinpointApp.controller("RealtimeChartCtrl",["RealtimeChartCtrlConfig","$scope","$element","$location","$rootScope","$compile","$timeout","$window","SystemConfigurationService","LocalStorageManagerService","UrlVoService","RealtimeWebsocketService","AnalyticsService","TooltipService",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){W=d.find("div.agent-sum-chart"),X=d.find("div.agent-sum-chart div:first-child span:first-child"),Y=d.find("div.agent-sum-chart div:first-child span:last-child"),Z=d.find("div.agent-chart-list"),$=d.find(".connection-message"),_=d.find(".glyphicon-pushpin"),$.hide(),X.html(""),Y.html("0")}function q(){if(s("sum")===!1){var a=c.$new();W.append(g(b.template.chartDirective({width:b.sumChart.width,height:b.sumChart.height,namespace:"sum",chartColor:"sumChartColor",xAxisCount:ba,showExtraInfo:"true",timeoutMaxCount:aa}))(a)),ha.push(a),ia.sum=-1}}function r(){angular.isDefined(ia.sum)?(ia={},ia.sum=-1):ia={}}function s(a){return angular.isDefined(ia[a])}function t(d){var e=c.$new(),f=a(b.template.agentChart).append(g(b.template.chartDirective({width:b.otherChart.width,height:b.otherChart.height,namespace:ga.length,chartColor:"agentChartColor",xAxisCount:ba,showExtraInfo:"false",timeoutMaxCount:aa}))(e));ha.push(c.$new()),Z.append(f),z(d,ga.length),ga.push(f)}function u(){m.open({onopen:function(a){H()},onmessage:function(a){v(a)},onclose:function(a){c.$apply(function(){L()})},ondelay:function(){m.close()},retry:function(){c.retryConnection()}})}function v(a){switch($.hide(),a[b.keys.TYPE]){case b.values.PING:m.send(oa);break;case b.values.RESPONSE:var c=a[b.keys.RESULT];if(c[b.keys.APPLICATION_NAME]!==ea)return;var d=c[b.keys.ACTIVE_THREAD_COUNTS],e=E(d);S(Object.keys(d).length),F(e),w(d,e,c[b.keys.TIME_STAMP])}}function w(a,d,e){var f=Math.max(G(),b["const"].MIN_Y),g=0,h=!0;for(var i in a)if(y(i,g),a[i][b.keys.CODE]===ca?(h=!1,c.$broadcast("realtimeChartDirective.onData."+ia[i],a[i][b.keys.STATUS],e,f,h)):c.$broadcast("realtimeChartDirective.onError."+ia[i],a[i],e,f),B(g),g++,g>=c.maxPageSize)break;C(g),c.$broadcast("realtimeChartDirective.onData.sum",d,e,f,h),Y.html(g)}function x(a){return pa[b.keys.PARAMETERS][b.keys.APPLICATION_NAME]=a,JSON.stringify(pa)}function y(a,b){s(a)===!1&&(A(b)?z(a,b):t(a)),D(b,a)}function z(a,b){ia[a]=b}function A(a){return ga.length>a}function B(a){ga[a].show()}function C(a){for(var b=a;b<ga.length;b++)ga[b].hide()}function D(a,b){ga[a].find("div").attr("data-name",b).html(b)}function E(a){var c=[0,0,0,0];for(var d in a)a[d][b.keys.CODE]===ca&&jQuery.each(a[d][b.keys.STATUS],function(a,b){c[a]+=b});return c}function F(a){ja.push(a.reduce(function(a,b){return a+b})),ja.length>ba&&ja.shift()}function G(){return d3.max(ja,function(a){return a})}function H(){m.send(x(ea))}function I(){m.isOpened()===!1?u():H(),na=!0}function J(){na=!1,m.stopReceive(x(""))}function K(){f.$broadcast("realtimeChartDirective.clear.sum"),a.each(ga,function(a,b){f.$broadcast("realtimeChartDirective.clear."+a),b.hide()}),a.each(ha,function(a,b){b.$destroy()}),ha.length=0,h(function(){W.find("svg").remove(),a.each(ga,function(a,b){b.remove()}),ga.length=0}),ia={}}function L(){$.css("background-color","rgba(200, 200, 200, 0.9)"),$.find("h4").css("color","red").html("Closed connection.<br/><br/>Select node again."),$.find("button").show(),$.show()}function M(){$.css("background-color","rgba(138, 171, 136, 0.5)"),$.find("h4").css("color","blue").html("Waiting Connection..."),$.find("button").hide(),$.show()}function N(){U(),d.css("top","initial").animate({left:0,bottom:-parseInt(k.getRealtimeLayerHeight()||b.css.height)},500,function(){}),S(0)}function O(){var a=k.getRealtimeLayerHeight()||b.css.height;d.css("height",a),d.animate({bottom:0,left:0},500,function(){Z.css("height",a-b.css.titleHeight)})}function P(){d.css("top","initial").innerWidth(d.parent().width()-b.css.borderWidth+"px")}function Q(){_.css("color",la?"red":"")}function R(a){for(var b=[],c=2;c<=a;c++)b.push(c);return b}function S(a){if(c.serverTotalCount=a,a<=c.maxPageSize)c.showServerPaging=!1,c.pagingValue=[];else{c.showServerPaging=!0;var b=a/c.maxPageSize+(a%c.maxPageSize>0?1:0);c.pagingValue=R(b)}}function T(){var a=e.absUrl(),b=a.indexOf(e.path());return a.substring(0,b)}function U(){f.$broadcast("thread-dump-info-layer.close")}function V(){J(),K(),$.hide(),ea="",fa="",X.html(ea),Y.html("0")}d=a(d);var W,X,Y,Z,$,_,aa=10,ba=10,ca=0,da="",ea="",fa="",ga=[],ha=[],ia={},ja=[0],ka=!0,la=!0,ma=!1,na=!0,oa=function(){var a={};return a[b.keys.TYPE]=b.values.PONG,JSON.stringify(a)}(),pa=function(){var a={};return a[b.keys.TYPE]=b.values.REQUEST,a[b.keys.COMMAND]=b.values.ACTIVE_THREAD_COUNT,a[b.keys.PARAMETERS]={},a}(),qa=null;o.init("realtime"),c.maxPageSize=m.getPagingSize(),c.pagingValue=[],c.sumChartColor=["rgba(44, 160, 44, 1)","rgba(60, 129, 250, 1)","rgba(248, 199, 49, 1)","rgba(246, 145, 36, 1)"],c.agentChartColor=["rgba(44, 160, 44, .8)","rgba(60, 129, 250, .8)","rgba(248, 199, 49, .8)","rgba(246, 145, 36, .8)"],c.requestLabelNames=["1s","3s","5s","Slow"],c.serverTotalCount=0,c.showServerPaging=!1,c.bInitialized=!1,a(document).on("visibilitychange",function(){if(l.isRealtime()!==!1)switch(document.visibilityState){case"hidden":qa=h(function(){m.close(),qa=null},6e4);break;case"visible":null!==qa?h.cancel(qa):c.retryConnection(),qa=null}}),p(),c.openRATChart=function(a){i.open(T()+"/realtime/"+ea+"@"+fa+"/"+a,"RealTime Active Thread Chart Paging View ["+a+"]","width=1280px,height=800px,menubar=no,toolbar=no,location=no,resizable=yes,scrollbars=no,status=no")},c.$on("realtimeChartController.close",function(){N();var a=na;V(),na=a,Q()}),c.$on("realtimeChartController.initialize",function(a,b,d,e,f){U(),la===!0&&da===f||l.isRealtime()!==!1&&(ma=!angular.isUndefined(b)&&b,d=angular.isUndefined(d)?"":d,e=angular.isUndefined(e)?"":e,da=f,ka===!0&&(p(),ka=!1),j.getConfig().then(function(a){if(a.showActiveThread!==!1&&na!==!1){if(ma===!1)return void N();r(),q(),P(),c.bInitialized=!0,ea=d,fa=e,X.html(ea),O(),M(),I(),Q()}}))}),c.retryConnection=function(){M(),I()},c.pin=function(){la=!la,n.send(n.CONST.MAIN,la?n.CONST.CLK_REALTIME_CHART_PIN_ON:n.CONST.CLK_REALTIME_CHART_PIN_OFF),Q()},c.showAgentInfo=function(b){a(b.target).hasClass("paging")||a(b.target).parent().hasClass("paging")||j.getConfig().then(function(c){if(c.showActiveThreadDump===!0){var d=a(b.target);if(d.hasClass("agent-chart-list"))return;var e=d.parents(".agent-chart").find("div").attr("data-name"),g=k.getThreadDumpLayerOpenType();null===g||"window"===g?i.open(T()+"/threadDump/"+ea+"@"+fa+"/"+e+"?"+Date.now().valueOf(),"Thread Dump Info","width=1280px,height=800px,menubar=no,toolbar=no,location=no,resizable=yes,scrollbars=no,status=no"):f.$broadcast("thread-dump-info-layer.open",ea,e),n.send(n.CONST.MAIN,n.CONST.CLK_OPEN_THREAD_DUMP_LAYER)}})},a(i).on("resize",function(){P();var a=i.innerHeight-b.css.navBarHeight;d.resizable("option","maxHeight",a),parseInt(d.css("height"))>a&&a>b.css.height&&(d.css("height",a),Z.css("height",a-b.css.titleHeight),k.setRealtimeLayerHeight(a))}),d.resizable({minHeight:b.css.height,maxHeight:i.innerHeight-b.css.navBarHeight,handles:"n",resize:function(a,c){Z.css("height",c.size.height-b.css.titleHeight),k.setRealtimeLayerHeight(c.size.height)}})}])}(jQuery),function(){"use strict";angular.module("pinpointApp").directive("statisticChartDirective",["helpContentService",function(a){return{template:"<div style='width:100%;height:270px'><div class='chart'></div><div class='loading'><i class='xi-spinner-3 xi-spin xi-3x'></i></div><div class='no-data'><span></span></div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(b,c,d){function e(){s="multipleValueAxesId-"+b.namespace,p.attr("id",s)}function f(){return""!==s}function g(a,b){a&&p.css("width",a),b&&p.css("height",b)}function h(){n.dataProvider=o.data,o.empty||o.fixMax?j(n):k(n),n.validateData(),q[o.empty?"show":"hide"](),r.hide()}function i(){var a={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:50,markerSize:10,valueAlign:"left",valueFunction:function(a,b){return parseInt(b)===-1?"":b}},usePrefixes:!0,dataProvider:o.data,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"left",title:o.yAxisTitle,minimum:0,labelFunction:o.labelFunc}],graphs:[{valueAxis:"v1",balloonText:"[[title]] : [[value]]"+o.appendUnit+"<br><strong>[[description]]</strong>",legendValueText:"[[value]]"+o.appendUnit,lineColor:"#66B2FF",fillColor:"#66B2FF",lineThickness:1.5,title:o.category[2],valueField:o.field[2],descriptionField:o.field[4],fillAlphas:0,connect:!1,dashLength:2},{valueAxis:"v1",balloonText:"[[title]] : [[value]]"+o.appendUnit,legendValueText:"[[value]]"+o.appendUnit,lineColor:"#4C0099",fillColor:"#4C0099",lineThickness:1.5,title:o.category[0],valueField:o.field[0],fillAlphas:0,connect:!1},{valueAxis:"v1",balloonText:"[[title]] : [[value]]"+o.appendUnit+"<br><strong>[[description]]</strong>",legendValueText:"[[value]]"+o.appendUnit,lineColor:"#0000CC",fillColor:"#0000CC",lineThickness:1.5,title:o.category[1],valueField:o.field[1],descriptionField:o.field[3],fillAlphas:0,connect:!1,dashLength:2}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}},chartCursor:{categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1,listeners:[{event:"changed",method:function(a){b.$emit("statisticChartDirective.cursorChanged",a,b.namespace)}}]}};(o.empty||o.fixMax)&&j(a),n=AmCharts.makeChart(s,a),q[o.empty?"show":"hide"](),r.hide()}function j(a){for(var b=0;b<a.valueAxes.length;b++)a.valueAxes[b].maximum=o.defaultMax}function k(a){for(var b=0;b<a.valueAxes.length;b++)delete a.valueAxes[b].maximum}function l(a){if(a&&angular.isNumber(a)&&a>=n.startIndex&&a<=n.endIndex&&n.dataProvider[a]&&n.dataProvider[a].time)try{n.chartCursor.showCursorAt(n.dataProvider[a].time)}catch(b){}else n.chartCursor.hideCursor()}function m(){n&&(n.validateNow(),
n.validateSize())}var n,o,p,q,r,s="",t=a.inspector.noDataCollected;p=c.find("div.chart"),r=c.find("div.loading"),q=c.find("div.no-data").hide(),q.find("span").html(t),b.$on("statisticChartDirective.initAndRenderWithData."+b.namespace,function(a,b,c,d){r.show(),o=b,f()?h():(e(),g(c,d),i())}),b.$on("statisticChartDirective.showCursorAt",function(a,c,d){o&&o.empty===!1&&b.namespace!==d&&l(c)}),b.$on("statisticChartDirective.resize."+b.namespace,function(a){m()})}}}])}(),function(a){pinpointApp.constant("applicationStatisticDirectiveConfig",{ID:"APPLICATION_STATISTIC_DRTV_"}),pinpointApp.directive("applicationStatisticDirective",["applicationStatisticDirectiveConfig","$sce","$http","$timeout","CommonUtilService","UrlVoService","AlertsService","ProgressBarService","AgentDaoService","AgentAjaxService","TooltipService","AnalyticsService","helpContentService",function(b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"EA",replace:!0,templateUrl:"features/applicationStatistic/applicationStatistic.html?v"+G_BUILD_TIME,link:function(c,d,e){function h(){a("._wrongApp").popover("destroy")}function i(){["statHeap","statPermGen","statJVMCpu","statSystemCpu","statTPS","statActiveThread","statResponseTime","statDataSource","statOpenFileDescriptor","statDirectBufferCount","statDirectBufferMemory","statMappedBufferCount","statMappedBufferMemory"].forEach(function(a){l.init(a)})}function j(a,b){var d={to:b,from:a,sampleRate:1,applicationId:g.getApplicationName()};d.from>0&&d.to>0&&(k.getStatMemory(d,function(a){angular.isUndefined(a.exception)?(c.$broadcast("statisticChartDirective.initAndRenderWithData.application-heap",p({title:"Memory Heap",fixMax:!1,defaultMax:1e5,yAxisTitle:"Memory(bytes)",labelFunc:function(a){return o(a,["","K","M","G"])}},a.charts.x,a.charts.y.MEMORY_HEAP),"100%","270px"),c.$broadcast("statisticChartDirective.initAndRenderWithData.application-non-heap",p({title:"Memory Non Heap",fixMax:!1,defaultMax:1e5,yAxisTitle:"Memory(bytes)",labelFunc:function(a){return o(a,["","K","M","G"])}},a.charts.x,a.charts.y.MEMORY_NON_HEAP),"100%","270px")):console.log("error")}),k.getStatCpuLoad(d,function(a){angular.isUndefined(a.exception)&&(c.$broadcast("statisticChartDirective.initAndRenderWithData.application-jvm",p({title:"JVM Cpu Usage",fixMax:!0,appendUnit:"%",defaultMax:100,yAxisTitle:"Cpu Usage (%)",labelFunc:function(a){return a+"%"}},a.charts.x,a.charts.y.CPU_LOAD_JVM),"100%","270px"),c.$broadcast("statisticChartDirective.initAndRenderWithData.application-system",p({title:"System Cpu Usage",fixMax:!0,appendUnit:"%",defaultMax:100,yAxisTitle:"Cpu Usage (%)",labelFunc:function(a){return a+"%"}},a.charts.x,a.charts.y.CPU_LOAD_SYSTEM),"100%","270px"))}),k.getStatTPS(d,function(a){angular.isUndefined(a.exception)?c.$broadcast("statisticChartDirective.initAndRenderWithData.application-tps",p({title:"Transaction Per Second",fixMax:!1,defaultMax:10,yAxisTitle:"Transaction(count)",labelFunc:function(a){return o(a,["","K","M","G"])}},a.charts.x,a.charts.y.TRANSACTION_COUNT),"100%","270px"):console.log("error")}),k.getStatActiveThread(d,function(a){angular.isUndefined(a.exception)?c.$broadcast("statisticChartDirective.initAndRenderWithData.application-active-thread",p({title:"Active Thread",fixMax:!1,defaultMax:10,yAxisTitle:"Active Thread(count)",labelFunc:function(a){return o(a,["","K","M","G"])}},a.charts.x,a.charts.y.ACTIVE_TRACE_COUNT),"100%","270px"):console.log("error")}),k.getStatResponseTime(d,function(a){angular.isUndefined(a.exception)?c.$broadcast("statisticChartDirective.initAndRenderWithData.application-response-time",p({title:"Response Time",fixMax:!1,defaultMax:100,yAxisTitle:"Response Time(ms)",labelFunc:function(a){return o(a,["ms","sec","min"])}},a.charts.x,a.charts.y.RESPONSE_TIME),"100%","270px"):console.log("error")}),k.getStatDataSource(d,function(a){angular.isUndefined(a.exception)?(c.dataSourceData=a,w=!1,m(a[c.dataSourceSelectedIndex].charts.x,a[c.dataSourceSelectedIndex].charts.y.ACTIVE_CONNECTION_SIZE)):console.log("error")}),k.getStatOpenFileDescriptor(d,function(a){angular.isUndefined(a.exception)?c.$broadcast("statisticChartDirective.initAndRenderWithData.application-open-file-descriptor",p({title:"Open File Descriptor",fixMax:!1,defaultMax:100,yAxisTitle:"File Descriptor(count)",labelFunc:function(a){return a}},a.charts.x,a.charts.y.OPEN_FILE_DESCRIPTOR_COUNT),"100%","270px"):console.log("error")}),k.getStatDirectBuffer(d,function(a){angular.isUndefined(a.exception)?(c.$broadcast("statisticChartDirective.initAndRenderWithData.application-direct-buffer-count",p({title:"Direct Buffer Count",fixMax:!1,defaultMax:100,yAxisTitle:"Buffer (count)",labelFunc:function(a){return a}},a.charts.x,a.charts.y.DIRECT_COUNT),"100%","270px"),c.$broadcast("statisticChartDirective.initAndRenderWithData.application-mapped-buffer-count",p({title:"Mapped Buffer Count",fixMax:!1,defaultMax:100,yAxisTitle:"Buffer (count)",labelFunc:function(a){return a}},a.charts.x,a.charts.y.MAPPED_COUNT),"100%","270px"),c.$broadcast("statisticChartDirective.initAndRenderWithData.application-direct-buffer-memory",p({title:"Direct Buffer memory",fixMax:!1,defaultMax:100,yAxisTitle:"Memory (bytes)",labelFunc:function(a){return o(a,["","K","M","G"])}},a.charts.x,a.charts.y.DIRECT_MEMORY_USED),"100%","270px"),c.$broadcast("statisticChartDirective.initAndRenderWithData.application-mapped-buffer-memory",p({title:"Mapped Buffer Memory",fixMax:!1,defaultMax:100,yAxisTitle:"Memory (bytes)",labelFunc:function(a){return o(a,["","K","M","G"])}},a.charts.x,a.charts.y.MAPPED_MEMORY_USED),"100%","270px")):console.log("error")}))}function m(a,b){var d=p({title:"Data Source",fixMax:!1,defaultMax:10,yAxisTitle:"Connection(count)",labelFunc:function(a,b){return b}},a,b);w=d.empty,c.$broadcast("statisticChartDirective.initAndRenderWithData.application-data-source",d,"100%","270px")}function o(a,b){for(var c=a,d=0;c>=1e3;)d++,c/=1e3;return c+b[d]+" "}function p(a,b,c){for(var d=b.length,e=c.length,f={data:[],empty:0===e,field:["avg","max","min","maxAgent","minAgent"],fixMax:a.fixMax,category:["Avg","Max","Min"],labelFunc:a.labelFunc,yAxisTitle:a.yAxisTitle,defaultMax:a.defaultMax,appendUnit:a.appendUnit||""},g=0;g<d;++g){var h={time:moment(b[g]).format("YYYY-MM-DD HH:mm:ss")};e>g&&(h.avg=c[g][4]===-1?null:c[g][4].toFixed(2),h.min=c[g][0]===-1?null:c[g][0].toFixed(2),h.max=c[g][2]===-1?null:c[g][2].toFixed(2),h.minAgent=c[g][1],h.maxAgent=c[g][3]),f.data.push(h)}return f}function q(a){if(angular.isUndefined(a)||null===a){var b=[];b[0]=g.getQueryStartTime(),b[1]=g.getQueryEndTime(),c.selectTime===-1&&(c.selectTime=g.getQueryEndTime()),r(c.selectTime),s(b),v(u(b))}else c.selectTime=a.selectedTime,r(c.selectTime),s(a.selectionTimeSeries,a.timeSeries,a.selectedTime),v(a.timeSeries)}function r(a){c.targetPicker=moment(a).format("YYYY-MM-DD HH:mm:ss")}function s(b,d,e){null!==x?d&&e?x.resetTimeSeriesAndSelectionZone(b,d,e):x.resetTimeSeriesAndSelectionZone(b,u(b)):x=new TimeSlider("timeSlider-for-application-statistic",{width:a("#timeSlider-for-application-statistic").get(0).getBoundingClientRect().width,height:90,handleSrc:"images/handle.png",timeSeries:d||u(b),handleTimeSeries:b,selectTime:e||b[1],timelineData:{}}).addEvent("clickEvent",function(a){}).addEvent("selectTime",function(a){c.selectTime=a,r(a),t(x.getSliderTimeSeries(),x.getSelectionTimeSeries(),a)}).addEvent("changeSelectionZone",function(a){j(a[0],a[1]),t(x.getSliderTimeSeries(),a,x.getSelectTime())}).addEvent("changeSliderTimeSeries",function(a){})}function t(a,b,d){c.$emit("up.changed.timeSliderOption",a,b,d)}function u(a){var b=a[0],c=a[1],d=TimeSlider.MAX_TIME_RANGE,e=c-b;if(e>d)return[c-d,c];var f=3*e;return f>d?[c-d,c]:[c-f,c]}function v(a){x.addData({agentStatusTimeline:{timelineSegments:[{startTimestamp:a[0],endTimestamp:a[1],value:"EMPTY"}],includeWarning:!1},agentEventTimeline:{timelineSegments:[]}})}b.ID+=f.getRandomNum(),c.dataSourceData,c.dataSourceSelectedIndex=0,c.noDataCollected=n.inspector.noDataCollected;var w=!1;c.$on("down.select.application",function(a,b,c){h(),q(c),void 0===c||null===c?j(g.getQueryStartTime(),g.getQueryEndTime()):j(c.selectionTimeSeries[0],c.selectionTimeSeries[1])}),c.$on("down.changed.application",function(){h(),q(),j(g.getQueryStartTime(),g.getQueryEndTime())}),c.$on("down.changed.period",function(){h(),q(),j(g.getQueryStartTime(),g.getQueryEndTime())}),c.selectTime=-1;var x=null;c.selectDataSource=function(a){for(var b=a.target;"TR"!==b.nodeName.toUpperCase();)if(b=b.parentNode,"BODY"===b.nodeName.toUpperCase())return;c.dataSourceSelectedIndex=parseInt(b.getAttribute("data-source")),m(c.dataSourceData[c.dataSourceSelectedIndex].charts.x,c.dataSourceData[c.dataSourceSelectedIndex].charts.y.ACTIVE_CONNECTION_SIZE)},c.movePrev2=function(){x.movePrev(),v(x.getSliderTimeSeries())},c.moveNext2=function(){x.moveNext(),v(x.getSliderTimeSeries())},c.moveHead2=function(){x.moveHead(),v(x.getSliderTimeSeries())},c.zoomInTimeSlider2=function(){x.zoomIn(),v(x.getSliderTimeSeries())},c.zoomOutTimeSlider2=function(){x.zoomOut(),v(x.getSliderTimeSeries())},c.$on("statisticChartDirective.cursorChanged",function(a,b,d){"undefined"==typeof b.index?x.hideFocus():x.showFocus(moment(b.target.chart.dataProvider[b.index].time).valueOf()),c.$broadcast("statisticChartDirective.showCursorAt",b.index,d)}),c.emptyDataSource=function(){return w},i()}}}])}(jQuery),function(){"use strict";pinpointApp.controller("MainCtrl",["filterConfig","$scope","$timeout","$routeParams","locationService","UrlVoService","NavbarVoService","$window","filteredMapUtilService","$rootElement","SystemConfigurationService","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){return e.path().split("/")[1]||"main"}function o(){var a="/"+n()+"/"+q.getApplication()+"/";q.isRealtime()?(a+=q.getPeriodType(),h.$routeParams={application:q.getApplication(),readablePeriod:q.getPeriodType()}):a+=q.getReadablePeriod()+"/"+q.getQueryEndDateTime(),e.path()!==a&&("/main"===e.path()?e.path(a).replace():e.skipReload().path(a).replace(),h.$routeParams={application:q.getApplication(),readablePeriod:q.getReadablePeriod().toString(),queryEndDateTime:q.getQueryEndDateTime().toString()},b.$$phase||b.$apply())}function p(a,b){var c=i.getFilteredMapUrlWithFilterVo(q,a,b);h.open(c,"")}l.send(l.CONST.MAIN_PAGE),k.getConfig().then(function(a){l.sendMain(l.CONST.VERSION,a.version)});var q,r;b.hasScatter=!1,h.htoScatter={},r=!1,b.sidebarLoading=!0,c(function(){q=new g,d.application&&q.setApplication(d.application),d.readablePeriod&&q.setReadablePeriod(d.readablePeriod),d.queryEndDateTime&&q.setQueryEndDateTime(d.queryEndDateTime),q.setCalleeRange(m.getCalleeByApp(d.application)),q.setCallerRange(m.getCallerByApp(d.application)),q.setBidirectional(m.getBidirectionalByApp(d.application)),q.setWasOnly(m.getWasOnlyByApp(d.application)),f.initUrlVo("main",d),q.isRealtime()?b.$broadcast("navbarDirective.initialize.realtime.andReload",q):angular.isDefined(d.application)&&angular.isUndefined(d.readablePeriod)?b.$broadcast("navbarDirective.initialize.andReload",q):(h.$routeParams=d,f.autoCalculateByQueryEndDateTimeAndReadablePeriod(),q.autoCalculateByQueryEndDateTimeAndReadablePeriod(),b.$broadcast("navbarDirective.initialize",q),b.$broadcast("serverListDirective.initialize",q),b.$broadcast("scatterDirective.initialize.forMain",q),b.$broadcast("serverMapDirective.initialize",q))},500),b.getMainContainerClass=function(){return""},b.getInfoDetailsClass=function(){var a=[];return b.hasScatter&&a.push("has-scatter"),b.hasFilter&&a.push("has-filter"),a.join(" ")},b.$on("serverMapDirective.hasData",function(a){r=!1,b.sidebarLoading=!1}),b.$on("serverMapDirective.hasNoData",function(a){r=!0,b.sidebarLoading=!1}),b.$on("navbarDirective.changed",function(a,c){r=!1,q=c,o(q),h.htoScatter={},b.hasScatter=!1,b.sidebarLoading=!0,b.$broadcast("realtimeChartController.close"),b.$broadcast("sidebarTitleDirective.empty.forMain"),b.$broadcast("serverListDirective.initialize",q),b.$broadcast("nodeInfoDetailsDirective.hide"),b.$broadcast("groupedApplicationListDirective.hide"),b.$broadcast("scatterDirective.initialize.forMain",q),b.$broadcast("serverMapDirective.initialize",q),b.$broadcast("sidebarTitleDirective.empty.forMain")}),b.$on("serverMapDirective.passingTransactionResponseToScatterChart",function(a,c){b.$broadcast("scatterDirective.initializeWithNode.forMain",c)}),b.$on("serverMapDirective.nodeClicked",function(a,c,d,e,f){b.hasScatter=!1,b.hasFilter=!1,d.isWas===!0&&d.isAuthorized===!0?(b.hasScatter=!0,b.$broadcast("scatterDirective.initializeWithNode.forMain",d)):b.$broadcast("scatterDirective.stopRequest.forMain"),b.$broadcast("sidebarTitleDirective.initialize.forMain",d,q),b.$broadcast("groupedApplicationListDirective.initialize",d,q),b.$broadcast("nodeInfoDetailsDirective.initialize",d,q),q&&q.isRealtime()&&b.$broadcast("realtimeChartController.initialize",d.isWas,d.applicationName,d.serviceType,q.getApplication()+"/"+q.getReadablePeriod()+"/"+q.getQueryEndDateTime()+"/"+q.getCallerRange())}),b.$on("serverMapDirective.linkClicked",function(a,c,d,e){b.hasScatter=!1;var f=i.findFilterInNavbarVo(d.sourceInfo.applicationName,d.sourceInfo.serviceType,d.targetInfo.applicationName,d.targetInfo.serviceType,q);f?(b.hasFilter=!0,b.$broadcast("filterInformationDirective.initialize.forMain",f.oServerMapFilterVoService)):b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forMain",d,q),b.$broadcast("groupedApplicationListDirective.initialize",d,q),b.$broadcast("nodeInfoDetailsDirective.initialize",d,q)}),b.$on("serverMapDirective.openFilteredMap",function(a,b,c){p(b,c)}),b.$on("main.controller.openFilterWizard",function(a,c,d){b.$broadcast("serverMapDirective.openFilterWizard",c,d)}),b.$on("linkInfoDetailsDirective.ResponseSummary.barClicked",function(a,b){p(b)})}])}(),function(){"use strict";pinpointApp.constant("InspectorCtrlConfig",{ID:"INSPECTOR_CTRL_",PAGE_NAME:"inspector",SLASH:"/"}),pinpointApp.controller("InspectorCtrl",["InspectorCtrlConfig","$scope","$routeParams","$timeout","SystemConfigurationService","locationService","CommonUtilService","UrlVoService","AnalyticsService","helpContentService",function(a,b,c,d,e,f,g,h,i,j){b.selectedAgent=!1,b.timeSliderOption=null,b.showStatistic=!0,e.getConfig().then(function(a){b.showStatistic=a.showApplicationStat}),b.guideMessage=j.applicationInspectorGuideMessage,a.ID+=g.getRandomNum(),i.send(i.CONST.INSPECTOR_PAGE),h.initUrlVo("inspector",c),b.$on("up.changed.application",function(a,c,e){b.selectedAgent=!1,h.setApplication(e),h.setAgentId(""),d(function(){k(function(){b.timeSliderOption=null,b.$broadcast("down.changed.application",c)})})}),b.$on("up.changed.period",function(a,c){k(function(){b.timeSliderOption=null,b.$broadcast("down.changed.period",!0,c)})}),b.$on("up.changed.agent",function(a,c,e,f){b.selectedAgent=!0,d(function(){e&&e.agentId===h.getAgentId()?b.$broadcast("down.changed.agent",c,e,f):(g.isEmpty(e.agentId)===!1&&h.setAgentId(e.agentId),k(function(){b.$broadcast("down.changed.agent",c,e,f,b.timeSliderOption)}))})}),b.$on("up.select.application",function(a,c){b.selectedAgent=!1,h.setAgentId(""),d(function(){k(function(){b.$broadcast("down.select.application",c,b.timeSliderOption)})})}),b.$on("up.changed.timeSliderOption",function(a,c,d,e){b.timeSliderOption={timeSeries:c,selectionTimeSeries:d,selectedTime:e}});var k=function(a){var b=l();f.path()!==b&&f.skipReload().path(b).replace(),a()},l=function(){var b=["",a.PAGE_NAME,h.getApplication(),h.getReadablePeriod(),h.getQueryEndDateTime()].join(a.SLASH);return""!==h.getAgentId()&&(b+=a.SLASH+h.getAgentId()),b}}])}(),function(a){"use strict";pinpointApp.constant("TransactionListConfig",{applicationUrl:"transactionmetadata.pinpoint",MIN_TRANSACTION_LIST_HEIGHT:75,MAX_FETCH_BLOCK_SIZE:100,TRANSACTION_LIST_HANDLE_POSITION:"transactionList.resizer"}),pinpointApp.controller("TransactionListCtrl",["TransactionListConfig","$scope","$location","locationService","$routeParams","$rootScope","$timeout","$window","$http","webStorage","TimeSliderVoService","TransactionDaoService","AnalyticsService","helpContentService",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){alert(a),e.path("/main/"+f.application+"/"+f.readablePeriod+"/"+f.queryEndDateTime).replace()}function q(a){I=new l,I.setTotal(H.length),B(a)}function r(){return angular.isDefined(i.opener)}function s(){if(angular.isUndefined(i.opener)||null===i.opener)return!1;var a=i.opener.$routeParams;if(angular.isDefined(f)&&angular.isDefined(a))if("realtime"===a.readablePeriod){if(angular.equals(f.application,a.application))return!0}else if(angular.equals(f.application,a.application)&&angular.equals(f.readablePeriod,a.readablePeriod)&&angular.equals(f.queryEndDateTime,a.queryEndDateTime))return!0;return!1}function t(a){var b=a.split("|");return 6===b.length?{applicationName:b[0],type:b[1],min:b[2],max:b[3],agent:b[4],include:b[5]}:{applicationName:b[0],nXFrom:b[1],nXTo:b[2],nYFrom:b[3],nYTo:b[4],agent:b[5],include:b[6]}}function u(){return{applicationName:f.application.split("@")[0],nXFrom:parseInt(J[1])-1e3,nXTo:parseInt(J[1])+1e3,nYFrom:0,nYTo:0}}function v(a){return angular.isDefined(i.opener.htoScatter[a])}function w(a){var b=i.opener.htoScatter[a.applicationName];return a.type?b.getDataByRange(a.type,a.min,a.max,a.agent,a.include):b.getDataByXY(a.nXFrom,a.nXTo,a.nYFrom,a.nYTo,a.agent,a.include)}function x(a){c.$emit("transactionTableDirective.appendTransactionList",a.metadata)}function y(){if(!H)return i.alert("Query failed - Query parameter cache deleted.\n\nPossibly due to scatter chart being refreshed."),!1;F=0;for(var a=[],c=E+b.MAX_FETCH_BLOCK_SIZE,d=E,e=0;d<c&&d<H.length;d++,e++)d>0&&a.push("&"),a=a.concat(["I",e,"=",H[d][0]],["&T",e,"=",H[d][1]],["&R",e,"=",H[d][2]]),F++,E++;return a}function z(){C(y(),function(a){return 0===a.metadata.length?(c.$emit("timeSliderDirective.disableMore"),c.$emit("timeSliderDirective.changeMoreToDone"),!1):(a.metadata.length<b.MAX_FETCH_BLOCK_SIZE||a.metadata.length+I.getCount()>=I.getTotal()?(c.$emit("timeSliderDirective.disableMore"),c.$emit("timeSliderDirective.changeMoreToDone"),I.setInnerFrom(G.nXFrom)):(c.$emit("timeSliderDirective.enableMore"),I.setInnerFrom(_.last(a.metadata).collectorAcceptTime)),x(a),A(a.metadata.length),I.addCount(a.metadata.length),c.$emit("timeSliderDirective.setInnerFromTo",I),void(c.sidebarLoading=!1))})}function A(a){a>F&&I.setTotal(I.getTotal()+a-F)}function B(a){var d=y();C(d,function(d){return 0===d.metadata.length?(c.$emit("timeSliderDirective.disableMore"),c.$emit("timeSliderDirective.changeMoreToDone"),L<M?(L++,h(function(){B(a)},3e3)):(i.alert("There is no data."),i.close()),!1):(d.metadata.length<b.MAX_FETCH_BLOCK_SIZE||d.metadata.length>=I.getTotal()?(c.$emit("timeSliderDirective.disableMore"),c.$emit("timeSliderDirective.changeMoreToDone"),I.setInnerFrom(G.nXFrom)):(c.$emit("timeSliderDirective.enableMore"),I.setInnerFrom(_.last(d.metadata).collectorAcceptTime)),x(d),A(d.metadata.length),I.setFrom(G.nXFrom),I.setTo(G.nXTo),I.setInnerTo(G.nXTo),I.setCount(d.metadata.length),c.$emit("timeSliderDirective.initialize",I),c.sidebarLoading=!1,void(a&&D({agentId:d.metadata[0].agentId,spanId:d.metadata[0].spanId,traceId:J[0],collectorAcceptTime:J[1],elapsed:J[2]})))})}function C(a,c){j.post(b.applicationUrl,a.join(""),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a,b){angular.isFunction(c)&&c(a)}).error(function(a,b){i.alert("Failed to fetching the request information.")})}function D(a){var b="index.html?vs="+Date.now()+"#/transactionDetail";a.traceId&&a.collectorAcceptTime&&(b+="/"+i.encodeURIComponent(a.traceId)+"/"+a.collectorAcceptTime+"/"+a.agentId+"/"+a.spanId),K==b?c.$emit("transactionTableDirective.completedDetailPageLoad"):(K=b,d.path("/transactionList/"+f.application+"/"+f.readablePeriod+"/"+f.queryEndDateTime+"/"+a.traceId+"-"+a.collectorAcceptTime+"-"+a.elapsed,!1),h(function(){c.transactionDetailUrl=b}))}n.send(n.CONST.TRANSACTION_LIST_PAGE);var E,F,G,H,I,J,K="";h(function(){E=0,c.transactionDetailUrl="index.html?vs="+Date.now()+"#/transactionDetail",c.sidebarLoading=!0;var d=r(),e=s(),g=!angular.isUndefined(f.transactionInfo);if(g){var j=f.transactionInfo.lastIndexOf("-"),l=f.transactionInfo.lastIndexOf("-",j-1);J=[f.transactionInfo.substring(0,l),f.transactionInfo.substring(l+1,j),f.transactionInfo.substring(j+1)]}d&&e?(G=t(i.name),v(G.applicationName)?(H=w(G),q(g)):p(o.transactionList.openError.noData.replace(/\{\{application\}\}/,G.applicationName))):g===!1?p(o.transactionList.openError.noParent):(G=u(),H=[[J[0],J[1],J[2]]],q(g)),h(function(){var c=null===k.get(b.TRANSACTION_LIST_HANDLE_POSITION)?(window.innerHeight-40)/2:parseInt(k.get(b.TRANSACTION_LIST_HANDLE_POSITION));c=Math.max(b.MIN_TRANSACTION_LIST_HEIGHT,c),0!==a("#main-container").length&&a("#main-container").layout({north__minSize:30,north__size:c,center__maskContents:!0,onresize:function(){"north"===arguments[0]&&k.add(b.TRANSACTION_LIST_HANDLE_POSITION,arguments[2].innerHeight)}})},100)},100);var L=0,M=3;c.$on("transactionTableDirective.applicationSelected",function(a,b){D(b)}),c.$on("timeSliderDirective.moreClicked",function(a){c.sidebarLoading=!0,c.$emit("timeSliderDirective.disableMore"),h(function(){z()},1e3)}),c.completedDetailPageLoad=function(){c.$emit("transactionTableDirective.completedDetailPageLoad")}}])}(jQuery),function(){"use strict";pinpointApp.constant("TransactionDetailConfig",{applicationUrl:"transactionInfo.pinpoint",CALL_STACK:"#CallStacks",SERVER_MAP:"#ServerMap",TIMELINE:"#Timeline"}),pinpointApp.controller("TransactionDetailCtrl",["TransactionDetailConfig","$scope","$rootScope","$routeParams","$timeout","$rootElement","AlertsService","ProgressBarService","TransactionDaoService","$window","$location","AnalyticsService","TooltipService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){b.transactionDetail=a,b.logLinkEnable=a.logLinkEnable||!1,b.loggingTransactionInfo=a.loggingTransactionInfo||!1,b.logButtonName=a.logButtonName||"",b.logPageUrl=a.logPageUrl||"",b.logDisableMessage=a.disableButtonMessage||"",b.completeStateClass=o(a.completeState),b.$digest(),f.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()}function o(a){var b="label-important";return"Complete"===a?b="label-success":"Progress"===a&&(b="label-warning"),b}function p(){w===!1&&(w=!0,b.$broadcast("distributedCallFlowDirective.initialize.forTransactionDetail",b.transactionDetail))}function q(){return z===a.CALL_STACK}function r(){return z===a.SERVER_MAP}function s(){u=!0,t=0,B.val(""),b.searchColumn="self",b.searchPlaceholder="1000(ms)",A.find("input").val("").attr("placeholder","1000(ms)"),r()?A.hide():(A.show(),$("#traceTabs option:first").attr("selected","selected"),q()?$("#traceTabs option:last").removeAttr("disabled"):$("#traceTabs option:last").attr("disabled","disabled"),$("#traceTabs option:first").removeAttr("selected"))}l.send(l.CONST.TRANSACTION_DETAIL_PAGE),c.wrapperClass="no-navbar",c.wrapperStyle={"padding-top":"70px"};var t=0,u=!1,v=!0,w=!1,x=new g(f),y=new h(f),z=a.CALL_STACK,A=$("#traceTabs ._searchForm"),B=A.find("input");$("#customLogPopup").modal("hide"),e(function(){d.traceId&&d.focusTimestamp&&(y.startLoading(),y.setLoading(30),i.getTransactionDetail(d.agentId,d.spanId,d.traceId,d.focusTimestamp,function(a,b){a||b.exception?(y.stopLoading(),a?x.showError("There is some error while downloading the data."):x.showError(b.exception)):(y.setLoading(70),n(b),p(),e(function(){y.setLoading(100),y.stopLoading()},100))}))}),b.viewLog=function(a){return b.loggingTransactionInfo===!1?($("#customLogPopup").find("h4").html("Notice").end().find("div.modal-body").html(b.logDisableMessage).end().modal("show"),!1):void window.open(a)},b.openInNewWindow=function(){j.open(k.absUrl())},window.onresize=function(a){b.$broadcast("distributedCallFlowDirective.resize.forTransactionDetail"),b.$broadcast("timelineDirective.resize")},b.openTransactionView=function(a){a.preventDefault(),console.log("#/transactionView/"+b.transactionDetail.agentId+"/"+b.transactionDetail.transactionId+"/"+b.transactionDetail.callStackStart+"/"+d.spanId),j.open("#/transactionView/"+b.transactionDetail.agentId+"/"+b.transactionDetail.transactionId+"/"+b.transactionDetail.callStackStart+"/"+d.spanId)},b.$on("transactionDetail.selectDistributedCallFlowRow",function(c,d){l.send(l.CONST.CALLSTACK,l.CONST.CLK_DISTRIBUTED_CALL_FLOW),$("#traceTabs li:nth-child(1) a").trigger("click"),z=a.CALL_STACK,s(),b.$broadcast("distributedCallFlowDirective.selectRow.forTransactionDetail",d)}),b.$on("transactionDetail.searchActionResult",function(a,c){"Loop"===c?t=1:(b.searchMessage=c,""===c&&t++)}),B.val(""),b.searchColumn="self",b.searchPlaceholder="1000(ms)",b.selectSearchColumn=function(){u=!0,"self"===b.searchColumn?b.searchPlaceholder="1000(ms)":b.searchPlaceholder="input your text"},b.searchByClick=function(){var a=$.trim(B.val());if(""!==a)if(u&&(t=0,u=!1),"self"===b.searchColumn){var c=parseInt(a);q()?b.$broadcast("distributedCallFlowDirective.searchCall.forTransactionDetail",c,t):b.$broadcast("timelineDirective.searchCall",c,t)}else b.$broadcast("distributedCallFlowDirective.searchArgument.forTransactionDetail",a,t)},b.searchByKeydown=function(a){13===a.keyCode?b.searchByClick():t=0},$("#traceTabs li:nth-child(1) a").bind("click",function(b){l.send(l.CONST.CALLSTACK,l.CONST.CLK_DISTRIBUTED_CALL_FLOW),z=a.CALL_STACK,s(),b.preventDefault()}),$("#traceTabs li:nth-child(2) a").bind("click",function(c){l.send(l.CONST.CALLSTACK,l.CONST.CLK_SERVER_MAP),z=a.SERVER_MAP,s(),b.$broadcast("serverMapDirective.initializeWithMapData",!1,b.transactionDetail),c.preventDefault()}),$("#traceTabs li:nth-child(3) a").bind("click",function(c){l.send(l.CONST.CALLSTACK,l.CONST.CLK_RPC_TIMELINE),z=a.TIMELINE,s(),v&&(b.$broadcast("timelineDirective.initialize",b.transactionDetail),v=!1),c.preventDefault()}),m.init("callTree");try{top.angular.element(top.document.getElementById("main-container")).scope().completedDetailPageLoad()}catch(C){}}])}(),function(){"use strict";pinpointApp.controller("FilteredMapCtrl",["filterConfig","$scope","$routeParams","$timeout","TimeSliderVoService","NavbarVoService","$window","filteredMapUtilService","$rootElement","AnalyticsService",function(a,b,c,d,e,f,g,h,i,j){function k(a,b){var c=h.getFilteredMapUrlWithFilterVo(o,a,b);g.open(c,"")}function l(a){angular.isDefined(a)&&angular.forEach(a,function(a,c){var d=angular.copy(a);b.$broadcast("scatterDirective.initializeWithData.forFilteredMap",c,a),b.$broadcast("scatterDirective.initializeWithData.forServerList",c,d)})}function m(){var a=new f;a.setApplication(o.getApplication()).setQueryStartTime(o.getQueryStartTime()).setQueryEndTime(p.getInnerFrom()).autoCalcultateByQueryStartTimeAndQueryEndTime(),b.sidebarLoading=!0,b.$broadcast("timeSliderDirective.disableMore"),b.$broadcast("serverMapDirective.fetch",a.getQueryPeriod(),a.getQueryEndTime())}function n(){u=!1,v===!1&&t===!1&&(m(),u=!0)}j.send(j.CONST.FILTEREDMAP_PAGE);var o,p,q,r,s,t=!1,u=!0,v=!1;b.hasScatter=!1,g.htoScatter={},r=!1,s=!1,b.sidebarLoading=!1,d(function(){o=new f,c.application&&o.setApplication(c.application),c.readablePeriod&&o.setReadablePeriod(c.readablePeriod),c.queryEndDateTime&&o.setQueryEndDateTime(c.queryEndDateTime),c.filter&&o.setFilter(c.filter),c.hint&&o.setHint(c.hint),g.$routeParams=c,o.autoCalculateByQueryEndDateTimeAndReadablePeriod(),p=(new e).setFrom(o.getQueryStartTime()).setTo(o.getQueryEndTime()).setInnerFrom(o.getQueryEndTime()-1).setInnerTo(o.getQueryEndTime()),d(function(){b.$broadcast("timeSliderDirective.initialize",p),b.$broadcast("serverListDirective.initialize",o),b.$broadcast("scatterDirective.initialize.forFilteredMap",o),b.$broadcast("serverMapDirective.initialize",o)})},500),b.getMainContainerClass=function(){return""},b.getInfoDetailsClass=function(){var a=[];return b.hasScatter&&a.push("has-scatter"),b.hasFilter&&a.push("has-filter"),a.join(" ")},b.$on("serverMapDirective.hasData",function(){b.sidebarLoading=!1}),b.$on("serverMapDirective.hasNoData",function(){b.sidebarLoading=!1,n()}),b.$on("serverMapDirective.fetched",function(a,c,d){p.setInnerFrom(c),r=!0,s=!0,b.$broadcast("timeSliderDirective.setInnerFromTo",p),l(d.applicationScatterData)}),b.$on("serverMapDirective.allFetched",function(a,c){v=!0,p.setInnerFrom(p.getFrom()),r=!0,s=!0,b.$broadcast("timeSliderDirective.setInnerFromTo",p),b.$broadcast("timeSliderDirective.changeMoreToDone"),b.$broadcast("timeSliderDirective.disableMore"),l(c.applicationScatterData)}),b.$on("timeSliderDirective.changeLoadingStatus",function(a,b){t=b,t===!1&&u===!1&&m()}),b.$on("timeSliderDirective.moreClicked",function(){m()}),b.$on("serverMapDirective.nodeClicked",function(a,c,d,e){q=!0,b.hasScatter=!1,d.isWas===!0&&(b.hasScatter=!0,b.$broadcast("scatterDirective.showByNode.forFilteredMap",d)),b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forFilteredMap",d,o),b.$broadcast("groupedApplicationListDirective.initialize",d,o),b.$broadcast("nodeInfoDetailsDirective.initialize",d,o),r=!1,n()}),b.$on("serverMapDirective.linkClicked",function(a,c,d,e){q=!1,b.hasScatter=!1;var f=h.findFilterInNavbarVo(d.sourceInfo.applicationName,d.sourceInfo.serviceType,d.targetInfo.applicationName,d.targetInfo.serviceType,o);f?(b.hasFilter=!0,b.$broadcast("filterInformationDirective.initialize.forFilteredMap",f.oServerMapFilterVoService)):b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forFilteredMap",d),b.$broadcast("groupedApplicationListDirective.initialize",d,o),b.$broadcast("nodeInfoDetailsDirective.initialize",d,o),s=!1}),b.$on("serverMapDirective.openFilteredMap",function(a,b,c){k(b,c)}),b.$on("linkInfoDetailsDirective.openFilteredMap",function(a,b,c){k(b,c)}),b.$on("linkInfoDetailsDirective.openFilterWizard",function(a,c,d){b.$broadcast("serverMapDirective.openFilterWizard",c,d)}),b.$on("linkInfoDetailsDirective.ResponseSummary.barClicked",function(a,b,c){k(b,c)})}])}(),function(){"use strict";pinpointApp.constant("TransactionViewConfig",{applicationUrl:"transactionInfo.pinpoint"}),pinpointApp.controller("TransactionViewCtrl",["TransactionViewConfig","$scope","$rootScope","$rootElement","CommonUtilService","AlertsService","ProgressBarService","$timeout","$routeParams","NavbarVoService","TransactionDaoService","AgentDaoService","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){m.send(m.CONST.TRANSACTION_VIEW_PAGE);var o,p,q,r,s,t,u,v;c.wrapperClass="no-navbar",c.wrapperStyle={"padding-top":"30px"},o=new f(d),p=new g(d),h(function(){i.agentId&&i.traceId&&i.focusTimestamp&&(p.startLoading(),p.setLoading(30),k.getTransactionDetail(i.agentId,i.spanId,i.traceId,i.focusTimestamp,function(a,c){(a||c.exception)&&(p.stopLoading(),a?o.showError("There is some error while downloading the data."):o.showError(c.exception)),p.setLoading(70),q(c),s(),t(),h(function(){p.setLoading(100),p.stopLoading(),$("#main-container").layout({north__minSize:50,north__size:320,onload_end:function(){b.$broadcast("distributedCallFlowDirective.resize.forTransactionView")},onresize_end:function(a){"center"===a&&(b.$broadcast("distributedCallFlowDirective.resize.forTransactionView"),b.$broadcast("agentChartGroupDirective.resize.forTransactionView"),b.$broadcast("serverMapDirective.zoomToFit"))},center__maskContents:!0})},100)}),u(i.agentId,i.focusTimestamp))},500),q=function(a){b.transactionDetail=a,b.completeStateClass=r(a.completeState),b.$digest(),d.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()},r=function(a){var b="label-important";return"Complete"===a?b="label-success":"Progress"===a&&(b="label-warning"),b},s=function(){b.$broadcast("distributedCallFlowDirective.initialize.forTransactionView",b.transactionDetail)},t=function(){var a=new j;a.setReadablePeriod(n.getPeriodTime()[0]),a.setQueryEndDateTime(e.formatDate(i.focusTimestamp)),b.$broadcast("serverMapDirective.initializeWithMapData",!0,b.transactionDetail,a)},u=function(a,c){c=parseInt(c,10);var d={agentId:a,from:c-6e5,to:c+6e5,
sampleRate:l.getSampleRate(20)};b.$broadcast("agentChartGroupDirective.initialize.forTransactionView",d)},v=function(a){b.$broadcast("agentChartGroupDirective.showCursorAt.forTransactionView",a)},b.$on("distributedCallFlowDirective.rowSelected.forTransactionView",function(a,b){var c;if(b.execTime){var d=5e3,e=new Date(b.execTime);c=moment(Math.floor(e.getTime()/d)*d).format("YYYY-MM-DD HH:mm:ss")}else c=!1;v(c)})}])}(),function(){"use strict";pinpointApp.controller("ScatterFullScreenModeCtrl",["$scope","$rootScope","$window","$routeParams","$timeout","UrlVoService","AnalyticsService",function(a,b,c,d,e,f,g){g.send(g.CONST.SCATTER_FULL_SCREEN_PAGE),c.htoScatter=c.htoScatter||{},c.$routeParams=c.$routeParams||d,b.wrapperClass="no-navbar",b.wrapperStyle={"padding-top":"0px"},e(function(){f.initUrlVo("scatterFullScreenMode",d),f.autoCalculateByQueryEndDateTimeAndReadablePeriod(),a.$broadcast("scatterDirective.initialize.forMain"),a.$broadcast("scatterDirective.initializeWithNode.forMain",{key:f.getApplicationName()+"^"+f.getServiceType(),serviceType:f.getServiceType(),applicationName:f.getApplicationName(),agentIds:f.getAgentList()},800,600)},500)}])}(),function(a){"use strict";pinpointApp.constant("ThreadDumpConfig",{}),pinpointApp.controller("ThreadDumpCtrl",["ThreadDumpConfig","$scope","$routeParams","$rootScope","$window","$http",function(a,b,c,d){d.wrapperStyle={"padding-top":"0px"},d.$broadcast("thread-dump-info-window.open",c.application.split("@")[0],c.agentId)}])}(jQuery),function(){"use strict";pinpointApp.constant("RealtimeCtrlConfig",{sendPrefix:"applicationName=",keys:{CODE:"code",TYPE:"type",RESULT:"result",STATUS:"status",COMMAND:"command",MESSAGE:"message",TIME_STAMP:"timeStamp",PARAMETERS:"parameters",APPLICATION_NAME:"applicationName",ACTIVE_THREAD_COUNTS:"activeThreadCounts"},values:{PING:"PING",PONG:"PONG",REQUEST:"REQUEST",RESPONSE:"RESPONSE",ACTIVE_THREAD_COUNT:"activeThreadCount"},template:{agentChart:'<div class="agent-chart"><div></div><span class="glyphicon glyphicon-new-window"></span></div>',chartDirective:Handlebars.compile('<realtime-chart-directive timeout-max-count="{{timeoutMaxCount}}" chart-color="{{chartColor}}" xcount="{{xAxisCount}}" show-extra-info="{{showExtraInfo}}" request-label="requestLabelNames" namespace="{{namespace}}" width="{{width}}" height="{{height}}"></realtime-chart-directive>')},css:{borderWidth:2,height:180,navBarHeight:42,titleHeight:30},otherChart:{width:120,height:60},"const":{MIN_Y:10}}),pinpointApp.controller("RealtimeCtrl",["RealtimeCtrlConfig","$scope","$rootScope","$routeParams","$compile","$location","$timeout","$rootElement","$window","RealtimeWebsocketService","LocalStorageManagerService","SystemConfigurationService","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){S=h.find("div.agent-chart-list"),T=h.find(".connection-message"),T.hide()}function p(){l.getConfig().then(function(a){a.showActiveThread!==!1&&(q(),r(),u(),v())})}function q(){U={}}function r(){}function s(a){return angular.isDefined(U[a])}function t(){T.css("background-color","rgba(200, 200, 200, 0.9)"),T.find("h4").css("color","red").html("Closed connection.<br/><br/>Select node again."),T.find("button").show(),T.show()}function u(){T.css("background-color","rgba(138, 171, 136, 0.5)"),T.find("h4").css("color","blue").html("Waiting Connection..."),T.find("button").hide(),T.show()}function v(){j.isOpened()===!1?w():x()}function w(){j.open({onopen:function(a){x()},onmessage:function(a){z(a)},onclose:function(a){b.$apply(function(){t()})},ondelay:function(){j.close()},retry:function(){b.retryConnection()}})}function x(){j.send(y())}function y(){return Z[a.keys.PARAMETERS][a.keys.APPLICATION_NAME]=b.applicationName,JSON.stringify(Z)}function z(c){switch(T.hide(),c[a.keys.TYPE]){case a.values.PING:j.send(Y);break;case a.values.RESPONSE:var d=c[a.keys.RESULT];if(d[a.keys.APPLICATION_NAME]!==b.applicationName)return;var e=d[a.keys.ACTIVE_THREAD_COUNTS],f=A(e);C(Object.keys(e).length),B(f),D(e,f,d[a.keys.TIME_STAMP])}}function A(b){var c=[0,0,0,0];for(var d in b)b[d][a.keys.CODE]===Q&&jQuery.each(b[d][a.keys.STATUS],function(a,b){c[a]+=b});return c}function B(a){W.push(a.reduce(function(a,b){return a+b})),W.length>P&&W.shift()}function C(a){g(function(){b.serverTotalCount=a,b.to>b.serverTotalCount&&(b.to=b.serverTotalCount)})}function D(c,d,e){var f=Math.max(E(),a["const"].MIN_Y),g=0,h=!0;for(var i in c)g+1>=b.from&&g<b.to&&(F(i,g),c[i][a.keys.CODE]===Q?(h=!1,b.$broadcast("realtimeChartDirective.onData."+U[i],c[i][a.keys.STATUS],e,f,h)):b.$broadcast("realtimeChartDirective.onError."+U[i],c[i],e,f),J(g)),g++;K(g)}function E(){return d3.max(W,function(a){return a})}function F(a,b){s(a)===!1&&(I(b)?H(a,b):G(a,b)),L(b,a)}function G(c,d){var f=b.$new(),g=$(a.template.agentChart).append(e(a.template.chartDirective({width:a.otherChart.width,height:a.otherChart.height,namespace:V.length,chartColor:"agentChartColor",xAxisCount:P,showExtraInfo:"false",timeoutMaxCount:O}))(f));S.append(g),H(c,V.length),V[d]=g}function H(a,b){U[a]=b}function I(a){return V.length>a}function J(a){V[a].show()}function K(a){for(var b=a;b<V.length;b++)V[b].hide()}function L(a,b){V[a].find("div").attr("data-name",b).html(b)}function M(){o(),p()}function N(){var a=f.absUrl(),b=a.indexOf(f.path());return a.substring(0,b)}m.send(m.CONST.REALTIME),c.wrapperStyle={"padding-top":"0px"};var O=10,P=10,Q=0,R=j.getPagingSize();b.applicationName=d.application.split("@")[0],b.serviceType=d.application.split("@")[1],b.currentPage=parseInt(d.page,10),b.serverTotalCount="-",b.from=(b.currentPage-1)*R+1,b.to=b.currentPage*R;var S,T,U={},V=[],W=[0],X=null,Y=function(){var b={};return b[a.keys.TYPE]=a.values.PONG,JSON.stringify(b)}(),Z=function(){var b={};return b[a.keys.TYPE]=a.values.REQUEST,b[a.keys.COMMAND]=a.values.ACTIVE_THREAD_COUNT,b[a.keys.PARAMETERS]={},b}();b.agentChartColor=["rgba(44, 160, 44, .8)","rgba(60, 129, 250, .8)","rgba(248, 199, 49, .8)","rgba(246, 145, 36, .8)"],b.requestLabelNames=["1s","3s","5s","Slow"],$(document).on("visibilitychange",function(){switch(document.visibilityState){case"hidden":X=g(function(){j.close(),X=null},6e4);break;case"visible":null!==X?g.cancel(X):b.retryConnection(),X=null}}),M(),b.retryConnection=function(){u(),v()},b.showAgentInfo=function(a){$(a.target).hasClass("page")||l.getConfig().then(function(c){if(c.showActiveThreadDump===!0){var d=$(a.target);if(d.hasClass("agent-chart-list"))return;var e=d.parents(".agent-chart").find("div").attr("data-name"),f=k.getThreadDumpLayerOpenType();null!==f&&"window"!==f||i.open(N()+"/threadDump/"+b.applicationName+"@"+b.serviceType+"/"+e+"?"+Date.now().valueOf(),"Thread Dump Info","width=1280px,height=800px,menubar=no,toolbar=no,location=no,resizable=yes,scrollbars=no,status=no"),m.send(m.CONST.MAIN,m.CONST.CLK_OPEN_THREAD_DUMP_LAYER)}})}}])}();
//# sourceMappingURL=pinpoint.min.js.map